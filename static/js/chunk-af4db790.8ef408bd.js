(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-af4db790"],{"0c24":function(e,t,a){"use strict";var n=a("2878"),o=a.n(n);o.a},2878:function(e,t,a){},"6c8d":function(e,t,a){"use strict";a("9e76"),a("9dd9"),a("9a33");t["a"]={getUUid:function(){for(var e=[],t="0123456789abcdef",a=0;a<36;a++)e[a]=t.substr(Math.floor(16*Math.random()),1);e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-";var n=e.join("");return n},getTime:function(e){var t=new Date(e),a=t.getFullYear()+"-",n=(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-",o=(t.getDate()<10?"0"+t.getDate():t.getDate())+" ",i=(t.getHours()<10?"0"+t.getHours():t.getHours())+":",l=(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":",r=t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds();return a+n+o+i+l+r},getDate:function(e){var t=new Date(e),a=t.getFullYear()+"-",n=(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-",o=t.getDate()<10?"0"+t.getDate():t.getDate();return a+n+o},ConvertLevel:function(e){return"Basic"==e?"基地":"Plant"==e?"电厂":"机组"},IsCanDisplayImage:function(e){for(var t="jpg,png,gif,bmp,icon,jpeg",a=t.split(","),n=0;n<a.length;n++)if(a[n]==e)return!0;return!1},getQueryVariable:function(e){var t=window.location.href,a=t.split("?");if(a.length>1){a=a[1].split("&");for(var n=0;n<a.length;n++){var o=a[n].split("=");if(o[0]==e)return o[1]}return null}return null},setCookie:function(e,t){var a=30,n=new Date;n.setTime(n.getTime()+24*a*60*60*1e3),document.cookie=e+"="+escape(t)+";expires="+n.toGMTString()},getCookie:function(e){var t,a=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(a))?unescape(t[2]):null},delCookie:function(e){var t=new Date;t.setTime(t.getTime()-1);var a=getCookie(e);null!=a&&(document.cookie=e+"="+a+";expires="+t.toGMTString())}}},"9e76":function(e,t,a){"use strict";var n=a("69b3"),o=a("eafa"),i=a("e754"),l=a("7108");a("0aed")("match",1,(function(e,t,a,r){return[function(a){var n=e(this),o=void 0==a?void 0:a[t];return void 0!==o?o.call(a,n):new RegExp(a)[t](String(n))},function(e){var t=r(a,e,this);if(t.done)return t.value;var s=n(e),c=String(this);if(!s.global)return l(s,c);var d=s.unicode;s.lastIndex=0;var p,m=[],u=0;while(null!==(p=l(s,c))){var g=String(p[0]);m[u]=g,""===g&&(s.lastIndex=i(c,o(s.lastIndex),d)),u++}return 0===u?null:m}]}))},a267:function(e,t,a){e.exports=a.p+"static/img/close.9efce744.png"},b29c:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dashboard-container"},[n("div",{staticClass:"sidebar-container"},[n("div",{staticClass:"tree_content"},[n("el-tree",{staticStyle:{"font-size":"14px"},attrs:{data:e.treeData,"node-key":"id","default-expand-all":"","highlight-current":"",props:e.defaultProps,"expand-on-click-node":!1,"render-content":e.renderContent}})],1)]),e._v(" "),n("div",{staticClass:"main-container"},[n("div",[n("el-form",{ref:"form",attrs:{model:e.form}},[n("el-form-item",{attrs:{label:"基地"}},[n("el-select",{staticClass:"el-form-item_input",staticStyle:{width:"100px"},attrs:{size:"small",placeholder:"请选择基地"},on:{change:e.getSearchStataionData},model:{value:e.form.baseStation,callback:function(t){e.$set(e.form,"baseStation",t)},expression:"form.baseStation"}},e._l(e.companyData,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),e._v(" "),n("span",{staticClass:"el-form-item_titel my_el-form-item_tite"},[e._v("电站")]),e._v(" "),n("el-select",{staticClass:"el-form-item_input",staticStyle:{width:"100px"},attrs:{size:"small",placeholder:"请选择电站"},model:{value:e.form.applicablePlant,callback:function(t){e.$set(e.form,"applicablePlant",t)},expression:"form.applicablePlant"}},e._l(e.stataionData,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),e._v(" "),n("span",{staticClass:"el-form-item_titel my_el-form-item_tite"},[e._v("编号")]),e._v(" "),n("el-input",{staticClass:"el-form-item_input",staticStyle:{width:"100px"},attrs:{size:"small",placeholder:"请输入编号"},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}}),e._v(" "),n("span",{staticClass:"el-form-item_titel my_el-form-item_tite"},[e._v("名称：")]),e._v(" "),n("el-input",{staticClass:"el-form-item_input",staticStyle:{width:"120px"},attrs:{size:"small",placeholder:"请输入名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),e._v(" "),n("span",{staticClass:"el-form-item_titel my_el-form-item_tite"},[e._v("适用区域：")]),e._v(" "),n("el-select",{staticClass:"el-form-item_input",staticStyle:{width:"120px"},attrs:{size:"small",placeholder:"请选择"},model:{value:e.form.applicableRange,callback:function(t){e.$set(e.form,"applicableRange",t)},expression:"form.applicableRange"}},e._l(e.ApplyData,(function(e){return n("el-option",{key:e.id,attrs:{label:e.constDesc,value:e.id}})})),1),e._v(" "),n("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:function(t){return e.getDataList("check")}}},[e._v("查询")]),e._v(" "),n("el-button",{attrs:{type:"info",size:"small",icon:"el-icon-refresh-right"},on:{click:function(t){return e.resetGetDataList()}}},[e._v("重置")])],1)],1)],1),e._v(" "),n("div",{staticStyle:{height:"calc(100vh - 150px)"},attrs:{id:"table_content"}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"font-size":"12px"},attrs:{data:e.tableData,border:"",height:e.tableHeader}},[n("el-table-column",{attrs:{prop:"applicablePlantName",label:"电站"}}),e._v(" "),n("el-table-column",{attrs:{prop:"name",label:"名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.name)+"["+e._s(t.row.code)+"]")])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"barcode",label:"物项条码",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"category",label:"物项类别"}}),e._v(" "),n("el-table-column",{attrs:{prop:"purposeType",label:"物项分类",width:"80"}}),e._v(" "),n("el-table-column",{attrs:{prop:"easyRange",label:"阀值"}}),e._v(" "),n("el-table-column",{attrs:{prop:"applicableRangeName",label:"适用区域"}}),e._v(" "),n("el-table-column",{attrs:{prop:"unit",label:"单位",width:"50"}}),e._v(" "),n("el-table-column",{attrs:{prop:"remark",label:"备注说明",width:"100"}}),e._v(" "),n("el-table-column",{attrs:{label:"图片",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("img",{staticStyle:{width:"40px",height:"40px",cursor:"pointer"},attrs:{src:"/fme/UC/firstImageInfo?bussinessId="+t.row.id+"&randomNum="+e.RndNum()},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}})]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{staticClass:"el-icon-edit",attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}}),e._v(" "),n("el-button",{staticClass:"el-icon-delete",attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}})]}}])},[n("template",{slot:"header"},[n("span",[e._v("\n              操作\n              "),n("i",{staticClass:"el-icon-circle-plus",staticStyle:{color:"#409eff","margin-left":"3px","font-size":"17px",cursor:"pointer",top:"2px",position:"relative"},on:{click:e.addListClick}})])])],2)],1),e._v(" "),n("div",{staticClass:"my_el_pagination"},[n("el-pagination",{attrs:{"current-page":e.PageIndex,"page-sizes":[20,50,100],"page-size":e.size,layout:"prev, pager, next, jumper,sizes,total",total:e.total},on:{"size-change":e.handleSizeChange,"update:currentPage":function(t){e.PageIndex=t},"update:current-page":function(t){e.PageIndex=t},"current-change":e.handleCurrentChange}})],1)],1)]),e._v(" "),n("div",{attrs:{id:"BasicInfoAdd"}},[n("el-dialog",{attrs:{title:"物项编辑管理",visible:e.dialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("div",[n("el-form",{ref:"addForm",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.addForm,rules:e.rules,"label-position":e.labelPosition}},[n("el-form-item",{attrs:{label:"基地",prop:"baseStation","label-width":"80px"}},[n("el-select",{staticClass:"el-form-item_input",attrs:{size:"small",placeholder:"请选择基地"},on:{change:e.getBjStataionData},model:{value:e.addForm.baseStation,callback:function(t){e.$set(e.addForm,"baseStation",t)},expression:"addForm.baseStation"}},e._l(e.companyData,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),e._v(" "),n("el-form-item",{attrs:{label:"电站",prop:"applicablePlant","label-width":"80px"}},[n("el-select",{staticClass:"el-form-item_input",attrs:{size:"small",placeholder:"请选择电站"},on:{change:function(t){return e.$forceUpdate()}},model:{value:e.addForm.applicablePlant,callback:function(t){e.$set(e.addForm,"applicablePlant",t)},expression:"addForm.applicablePlant"}},e._l(e.stataionData,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),e._v(" "),n("el-form-item",{attrs:{label:"物项类别",prop:"category","label-width":"80px"}},[n("el-select",{staticClass:"el-form-item_input",attrs:{size:"small",placeholder:"请选择物项类别"},on:{change:e.setLdConstRecByTypeInfoCategoryData},model:{value:e.addForm.category,callback:function(t){e.$set(e.addForm,"category",t)},expression:"addForm.category"}},e._l(e.ConstRecByTypeInfoCategoryData,(function(e){return n("el-option",{key:e.id,attrs:{label:e.constDesc,value:e.constDesc}})})),1)],1),e._v(" "),n("el-form-item",{attrs:{label:"物项分类",prop:"purposeType","label-width":"80px"}},[n("el-select",{attrs:{size:"small",placeholder:"请选择物项分类"},model:{value:e.addForm.purposeType,callback:function(t){e.$set(e.addForm,"purposeType",t)},expression:"addForm.purposeType"}},e._l(e.purposeTypeData,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.code}})})),1)],1),e._v(" "),n("el-form-item",{attrs:{label:"编号",prop:"code","label-width":"80px"}},[n("el-input",{staticClass:"el-form-item_input",attrs:{size:"small",placeholder:"请输入编号"},model:{value:e.addForm.code,callback:function(t){e.$set(e.addForm,"code",t)},expression:"addForm.code"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"名称",prop:"name","label-width":"80px"}},[n("el-input",{staticClass:"el-form-item_input",attrs:{size:"small",placeholder:"请输入名称"},model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"物品条码","label-width":"80px"}},[n("el-input",{staticClass:"el-form-item_input",attrs:{size:"small",placeholder:"请输入物品条码"},model:{value:e.addForm.barcode,callback:function(t){e.$set(e.addForm,"barcode",t)},expression:"addForm.barcode"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"适用区域","label-width":"80px"}},[n("el-select",{staticClass:"el-form-item_input",attrs:{size:"small",placeholder:"请选择物适用区域"},model:{value:e.addForm.applicableRange,callback:function(t){e.$set(e.addForm,"applicableRange",t)},expression:"addForm.applicableRange"}},e._l(e.ApplyData,(function(e){return n("el-option",{key:e.id,attrs:{label:e.constDesc,value:e.id}})})),1)],1),e._v(" "),n("el-form-item",{attrs:{label:"单位","label-width":"80px"}},[n("el-select",{staticClass:"el-form-item_input",attrs:{size:"small",placeholder:"请选择物适用区域"},model:{value:e.addForm.unit,callback:function(t){e.$set(e.addForm,"unit",t)},expression:"addForm.unit"}},e._l(e.unitData,(function(e){return n("el-option",{key:e.id,attrs:{label:e.constDesc,value:e.constDesc}})})),1)],1),e._v(" "),n("el-form-item",{attrs:{label:"阀值","label-width":"80px"}},[n("el-input",{staticClass:"el-form-item_input",attrs:{size:"small",type:"number",placeholder:"请输入阀值"},model:{value:e.addForm.easyRange,callback:function(t){e.$set(e.addForm,"easyRange",t)},expression:"addForm.easyRange"}})],1),e._v(" "),n("el-form-item",{staticStyle:{"margin-bottom":"0px !important",width:"100%",padding:"15px 0px 0 0"},attrs:{label:"图片","label-width":"80px"}},[n("div",{staticClass:"fjcontent",staticStyle:{float:"left","margin-right":"30px"}},e._l(e.fileData,(function(t){return n("div",{key:t.id,staticClass:"fjlist",staticStyle:{"min-width":"120px"}},["png"==t.type||"jpeg"==t.type||"gif"==t.type||"jpg"==t.type?n("div",{staticClass:"fjlistconent"},[n("img",{staticClass:"flclose",attrs:{src:a("a267")},on:{click:function(a){return e.deleteFileClick(t)}}}),e._v(" "),n("div",{on:{click:function(a){return e.downloadClick(t)}}},[n("img",{staticClass:"fjimg",attrs:{src:e.showImageInfo+t.id}})]),e._v(" "),n("div",{staticClass:"fjname"},[e._v("\n                   "+e._s(t.name)+"\n                ")])]):e._e()])})),0),e._v(" "),n("el-button",{staticStyle:{float:"left"},attrs:{type:"primary",size:"small"},on:{click:e.setImgClick}},[e._v("上传图片")]),e._v(" "),n("input",{staticStyle:{display:"none"},attrs:{type:"file",accept:"image/png, image/jpeg, image/gif, image/jpg",id:"file"},on:{change:function(t){return e.changepic(this)}}})],1),e._v(" "),n("el-form-item",{attrs:{label:"备注说明","label-width":"80px"}},[n("el-input",{staticStyle:{width:"497px"},attrs:{type:"textarea",placeholder:"请输入备注说明"},model:{value:e.addForm.remark,callback:function(t){e.$set(e.addForm,"remark",t)},expression:"addForm.remark"}})],1)],1)],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addDataListClick()}}},[e._v("确 定")])],1)])],1),e._v(" "),n("el-dialog",{attrs:{title:"添加物项分类",visible:e.dialogVisibleaddWx},on:{"update:visible":function(t){e.dialogVisibleaddWx=t}}},[n("div",[n("el-form",{ref:"addWxForm",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.addWxForm,rules:e.addWxFormrules,"label-position":e.labelPosition}},[n("el-form-item",{attrs:{label:"物项类别",prop:"category","label-width":"150px"}},[n("el-select",{staticClass:"el-form-item_input",staticStyle:{width:"250px"},attrs:{size:"small",placeholder:"请选择物项类别"},model:{value:e.addWxForm.category,callback:function(t){e.$set(e.addWxForm,"category",t)},expression:"addWxForm.category"}},e._l(e.ConstRecByTypeInfoCategoryData,(function(e){return n("el-option",{key:e.id,attrs:{label:e.constDesc,value:e.constDesc}})})),1)],1),e._v(" "),n("el-form-item",{attrs:{label:"物项分类编码",prop:"code","label-width":"150px"}},[n("el-input",{staticClass:"el-form-item_input",staticStyle:{width:"250px"},attrs:{size:"small",placeholder:"请输入物项分类编码"},model:{value:e.addWxForm.code,callback:function(t){e.$set(e.addWxForm,"code",t)},expression:"addWxForm.code"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"物项分类名称",prop:"name","label-width":"150px"}},[n("el-input",{staticClass:"el-form-item_input",staticStyle:{width:"250px"},attrs:{size:"small",placeholder:"请输入物项分类名称"},model:{value:e.addWxForm.name,callback:function(t){e.$set(e.addWxForm,"name",t)},expression:"addWxForm.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"备注说明","label-width":"150px"}},[n("el-input",{staticStyle:{width:"250px"},attrs:{type:"textarea",placeholder:"请输入备注说明"},model:{value:e.addWxForm.remark,callback:function(t){e.$set(e.addWxForm,"remark",t)},expression:"addWxForm.remark"}})],1)],1)],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogVisibleaddWx=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.addWxTreeClick}},[e._v("确 定")])],1)])],1)},o=[],i=(a("5ab2"),a("6d57"),a("e10e"),a("ce3c")),l=(a("cc57"),a("52c1")),r=a("b775"),s=a("7c15"),c=a("6c8d"),d=a("a336"),p=a.n(d);function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(Object(a),!0).forEach((function(t){Object(i["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var g={name:"Dashboard",data:function(){return{fileData:[],loading:!1,imgSrc:"",dialogVisible:!1,dialogVisibleaddWx:!1,labelPosition:"right",PageIndex:1,tableHeader:0,fileList:[],companyData:[],stataionData:[],size:50,total:1,tableData:[],treeData:[],purposeTypeData:[],rules:{baseStation:[{required:!0,message:"请选择基地",trigger:"change"}],applicablePlant:[{required:!0,message:"",trigger:"change"}],purposeType:[{required:!0,message:"请选择物项分类",trigger:"change"}],category:[{required:!0,message:"请选择物项类别",trigger:"change"}],code:[{required:!0,message:"请输入编号",trigger:"blur"}],name:[{required:!0,message:"请输入名称",trigger:"blur"}]},selectData:{category:"",purposeType:""},addForm:{category:"",purposeType:"",code:"",name:"",barcode:"",baseStation:"",applicablePlant:"",applicableRange:"",unit:"",remark:"",id:"",parentId:"",originalPic:"",easyRange:""},form:{code:"",name:"",baseStation:"",applicablePlant:"",applicableRange:""},addWxFormrules:{category:[{required:!0,message:"请选择物项类别",trigger:"change"}],code:[{required:!0,message:"请输入物项分类编码",trigger:"blur"}],name:[{required:!0,message:"请输入物项分类名称",trigger:"blur"}]},addWxForm:{category:"",code:"",name:"",remark:"",id:"",parentId:0},ApplyData:[],defaultProps:{children:"children",label:"name",id:"id"},ConstRecByTypeInfoCategoryData:[],unitData:[],showImageInfo:s["a"].showImageInfo}},watch:{dialogVisible:function(e){var t=this;e&&(t.$nextTick((function(){var e=p()(window).height()-70;p()("#BasicInfoAdd .el-dialog").css("width","650px"),p()("#BasicInfoAdd .el-dialog").css("max-height",e-10+"px"),p()("#BasicInfoAdd .el-dialog__body").css("max-height",e-150+"px"),p()("#BasicInfoAdd .el-dialog").css("margin-top","60px"),p()("#BasicInfoAdd .el-dialog__body").css("overflow-y","auto")})),t.getgetConstRecByTypeInfoCategory(),t.getgetConstRecByTypeInfoUnit())},dialogVisibleaddWx:function(e){var t=this;e&&(t.$nextTick((function(){p()(".el-dialog").css("width","550px")})),t.getgetConstRecByTypeInfoCategory())}},mounted:function(){var e=this;e.getDataList(),e.getDataTreeList(),e.getCompanyData(),e.getApply(),e.setHeight(),p()(".hamburger-close").show(),p()(window).resize((function(){e.setHeight()}))},methods:{downloadClick:function(e){var t=document.createElement("a");t.href=s["a"].serverUrl()+"/fme/UC/downloadFileInfo?fileID="+e.id,document.body.appendChild(t),t.click()},RndNum:function(){for(var e="",t=0;t<1e3;t++)e+=Math.floor(10*Math.random());return e},getFileList:function(e,t){var a=this;Object(r["a"])({url:s["a"].getFileInfo,method:"get",params:{businessid:e,businessType:t}}).then((function(e){200==e.code&&(a.fileData=[],a.fileData=e.result)}))},addListClick:function(){var e=this;e.dialogVisible=!0,e.$nextTick((function(){e.addForm={},e.$refs["addForm"].resetFields(),e.addForm.id=c["a"].getUUid(),e.addForm.category=e.selectData.category,e.addForm.purposeType=e.selectData.purposeType,e.selectData.purposeType&&e.initsetConstRecByTypeInfoCategoryData(e.selectData.category)})),e.getCompanyData(),e.fileData=[],e.dialogVisible=!0},initsetConstRecByTypeInfoCategoryData:function(e){var t=this;console.log(e),console.log(333),t.setConstRecByTypeInfoCategoryData(e)},getCompanyData:function(){var e=this;Object(r["a"])({url:s["a"].getStationUnitInfo,method:"get",params:{parent:"0",unitlevel:"Basic"}}).then((function(t){e.companyData=t.result}))},getSearchStataionData:function(e){var t=this;t.getStataionData(e),t.$set(t.form,"applicablePlant","")},getBjStataionData:function(e){var t=this;t.$set(t.addForm,"applicablePlant",""),t.getStataionData(e)},getStataionData:function(e){var t=this;Object(r["a"])({url:s["a"].getStationUnitInfo,method:"get",params:{parent:e,unitlevel:"Plant"}}).then((function(e){t.stataionData=e.result,t.$forceUpdate()}))},addDataListClick:function(){var e=this,t=this;this.$refs["addForm"].validate((function(a){if(a){for(var n=0;n<t.purposeTypeData.length;n++)t.purposeTypeData[n].code==t.addForm.purposeType&&(t.addForm.parentId=t.purposeTypeData[n].id);Object(r["a"])({url:s["a"].saveBpComponent,method:"post",data:t.addForm}).then((function(e){200==e.code?(t.$message({type:"success",message:"操作成功!"}),t.getDataList(),t.dialogVisible=!1):t.$message({type:"info",message:e.message})}))}else console.log(e.addForm)}))},deleteFileClick:function(e){var t=this;Object(r["a"])({url:s["a"].deleteFile,method:"get",params:{fileID:e.id}}).then((function(e){200==e.code&&(t.$message({type:"success",message:"删除成功!"}),t.imgSrc="",t.getFileList(t.addForm.id,"Component"),t.getDataList())}))},setImgClick:function(){p()("#file").trigger("click")},changepic:function(){var e=this;if(e.fileData.length>0)e.$message({message:"只能上传一张图片，删除图片后再上传",type:"warning"});else{var t=new FileReader,a=document.getElementById("file").files[0];t.readAsDataURL(a);var n=new FormData;n.append("file",document.getElementById("file").files[0]);JSON.parse(sessionStorage.userInfo)["toKey"];n.append("SubType","Component"),n.append("BusinessID",e.addForm.id),p.a.ajax({url:s["a"].uploadFile,type:"POST",data:n,headers:{"X-CSRFToken":JSON.parse(sessionStorage.userInfo)["toKey"]},processData:!1,contentType:!1,beforeSend:function(){},success:function(t){e.addForm.originalPic=t.result.id,e.getFileList(e.addForm.id,"Component"),e.getDataList()},error:function(e){console.log(e)}})}},setHeight:function(){var e=this;e.$nextTick((function(){var t=document.getElementById("table_content"),a=t.offsetHeight;e.tableHeader=a-60}))},setLdConstRecByTypeInfoCategoryData:function(e){var t=this;t.$set(t.addForm,"purposeType",""),t.$forceUpdate(),console.log(111),t.setConstRecByTypeInfoCategoryData(e)},setConstRecByTypeInfoCategoryData:function(e){var t=this;Object(r["a"])({url:s["a"].getBpComponentTypeByCategory,method:"get",params:{category:e}}).then((function(e){t.purposeTypeData=e.result,console.log(t.purposeTypeData)}))},getgetConstRecByTypeInfoUnit:function(){var e=this;Object(r["a"])({url:s["a"].getConstRecByTypeInfoUnit,method:"get"}).then((function(t){e.unitData=t.result}))},getgetConstRecByTypeInfoCategory:function(){var e=this;Object(r["a"])({url:s["a"].getConstRecByTypeInfoCategory,method:"get"}).then((function(t){e.ConstRecByTypeInfoCategoryData=t.result}))},getApply:function(){var e=this;Object(r["a"])({url:s["a"].getConstRecByTypeInfoWorkRegion,method:"get"}).then((function(t){var a=[],n={constDesc:"全部",id:"全部"};a=t.result,a.unshift(n),e.ApplyData=a}))},handleEdit:function(e,t){var a=this;a.dialogVisible=!0,a.$nextTick((function(){a.$refs["addForm"].resetFields(),a.getCompanyData(),a.addForm={category:t.category,purposeType:t.purposeType,code:t.code,name:t.name,baseStation:t.baseStation,applicablePlant:t.applicablePlant,barcode:t.barcode,applicableRange:t.applicableRange,unit:t.unit,remark:t.remark,id:t.id,parentId:t.parentId,easyRange:t.easyRange},a.getFileList(t.id,"Component"),a.getStataionData(t.baseStation),console.log(a.addForm)}))},handleDelete:function(e,t){var a=this;this.$confirm("您确定要删除该信息吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(r["a"])({url:s["a"].deleteBpComponent,method:"post",data:{id:t.id}}).then((function(e){200==e.code?(a.$message({type:"success",message:"删除成功!"}),a.getDataList()):a.$message({type:"info",message:e.message})}))})).catch((function(){}))},resetGetDataList:function(){var e=this;e.form={code:"",name:"",applicableRange:"全部"},e.getDataList()},getDataList:function(e){var t=this;"全部"==t.form.applicableRange&&(t.form.applicableRange=""),t.loading=!0,"check"==e&&(t.PageIndex=1);var a={code:t.form.code,name:t.form.name,applicableRange:t.form.applicableRange,applicablePlant:t.form.applicablePlant,baseStation:t.form.baseStation,category:"",parentId:t.form.id,PageSize:t.size,PageIndex:t.PageIndex};Object(r["a"])({url:s["a"].getComponentInfo,method:"post",data:a}).then((function(e){var a=e.result.rows;t.loading=!1;for(var n={},o=0;o<t.ApplyData.length;o++)n[t.ApplyData[o]["id"]]=t.ApplyData[o]["constDesc"];t.tableData=a,t.total=parseInt(e.result.records)}))},addWxTreeClick:function(){var e=this,t=this;this.$refs["addWxForm"].validate((function(a){a?Object(r["a"])({url:s["a"].saveBpComponent,method:"post",data:t.addWxForm}).then((function(e){200==e.code?(t.$message({type:"success",message:"操作成功!"}),t.getDataTreeList(),t.dialogVisibleaddWx=!1):t.$message({type:"info",message:e.message})})):console.log(e.addWxForm)}))},getDataListClick:function(e){var t=this;t.form.id=e.id,t.selectData={},e.attribute.constDesc?t.selectData.category=e.attribute.constDesc:(t.selectData.category=e.attribute.category,t.selectData.purposeType=e.attribute.code),t.getDataList()},appendTreeData:function(e){var t=this;t.dialogVisibleaddWx=!0,t.$nextTick((function(){t.addWxForm={},t.$refs["addWxForm"].resetFields(),t.addWxForm.parentId=0,t.addWxForm.id=c["a"].getUUid(),t.addWxForm.category=e.name}))},removeTree:function(e){var t=this;this.$confirm("您确定要删除该节点吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(r["a"])({url:s["a"].deleteBpComponent,method:"post",data:{id:e.id}}).then((function(e){200==e.code?(t.$message({type:"success",message:"删除成功!"}),t.getDataTreeList()):t.$message({type:"info",message:e.message})}))})).catch((function(){}))},allClick:function(){var e=this;e.PageIndex=1,e.form={code:"",name:"",baseStation:"",applicablePlant:"",applicableRange:""},e.getDataList()},renderContent:function(e,t){var a=this,n=t.node,o=t.data;t.store;return"全部"==n.label?e("span",{class:"custom-tree-node"},[e("span",{on:{click:function(){return a.allClick()}}},[n.label])]):"null"!=JSON.stringify(o.children)&&""!=JSON.stringify(o.children)&&void 0!=JSON.stringify(o.children)&&"undefined"!=JSON.stringify(o.children)?e("span",{class:"custom-tree-node"},[e("span",{on:{click:function(){return a.getDataListClick(o)}}},[n.label]),e("span",[e("i",{class:"el-icon-circle-plus",style:"color:#409eff;margin-left: 10px;font-size:16px",on:{click:function(){return a.appendTreeData(o)}}})])]):e("span",{class:"custom-tree-node"},[e("span",{on:{click:function(){return a.getDataListClick(o)}}},[n.label]),e("span",[e("i",{class:"el-icon-remove",style:"color:red;margin-left: 10px;font-size:16px",on:{click:function(){return a.removeTree(o)}}})])])},getDataTreeList:function(){var e=this;Object(r["a"])({url:s["a"].getComponentTypeTree,method:"get"}).then((function(t){e.treeData=t.result,e.$nextTick((function(){p()(".el-tree-node__children").removeClass("el-tree-node__children")}))}))},handleSizeChange:function(e){var t=this;t.size=e,t.getDataList(),console.log("每页 ".concat(e," 条"))},handleCurrentChange:function(e){var t=this;t.PageIndex=e,t.getDataList()}},computed:u({},Object(l["b"])(["name"]))},f=g,b=(a("0c24"),a("9ca4")),h=Object(b["a"])(f,n,o,!1,null,"7a1c4024",null);t["default"]=h.exports}}]);