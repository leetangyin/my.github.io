(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fdefc4ca"],{"013f":function(e,t,a){var i=a("4ce5"),n=a("224c"),l=a("008a"),o=a("eafa"),r=a("5dd2");e.exports=function(e,t){var a=1==e,s=2==e,c=3==e,d=4==e,p=6==e,m=5==e||p,u=t||r;return function(t,r,f){for(var g,h,b=l(t),v=n(b),k=i(r,f,3),y=o(v.length),I=0,x=a?u(t,y):s?u(t,0):void 0;y>I;I++)if((m||I in v)&&(g=v[I],h=k(g,I,b),e))if(a)x[I]=h;else if(h)switch(e){case 3:return!0;case 5:return g;case 6:return I;case 2:x.push(g)}else if(d)return!1;return p?-1:c||d?d:x}}},"0ac7":function(e,t,a){"use strict";var i=a("e753"),n=a.n(i);n.a},"3b7c":function(e,t,a){"use strict";var i=a("cfb2"),n=a.n(i);n.a},"3cc4":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAADaUlEQVR4Xu2a7X3aMBCH/8cCZYOmE5ROEDFB0wkaoN/bTJB0gmSAgukEpRNU3YBMULpBMkC5/s427xjOlgAFS58lWffoXnUm1HxQzeVHBBA1oOYEognUXAGiE4wmEE2gJIH2gC+Z0ALQLLnUfTpjAsKj7dDYfbNsB7UJmISbmCIB4crXxyvvw3iwPbqpvH5poR7AgB8AfPbxUS97TPHBfqKR615lAPwBcOH6QY/rf9ouOWtjGQA8Pzzjq+3RnUdhVFuZPt+BcJtP/m27ZFQLd0yKALQEzYCjBuwzAZNwC4x7LdSt8xjjIg8fvAmYAVsAl04AZHGBh38JAIYAPjoDILzbluwED0AEN9/4ClmmWG00MCrK9F4EgGpS61ZFAH3+Apo72TDzAJPwBTFeL98pE559FDCyN6YYg/AKnpIxr4mQ6fM1CElBeBvaHnV0yl48Ky3KgKbt0MR1L1nvF8CeMGi7pP6eD+E0e6gPpMkE8wgwTFV0fTA6tkcSJoMaXgEEJZnyMBGAEhQ0JqDdSzMvdXb/YHw8euz6XpAakBdVEk2kuDqo7wgOQC78r/mja50ApFGkkeYR2Ysz48b2SN4iDzaC0YAtSdR326Xrg0mebxwEAJPwLRjLb4xe8nwNvJMDMH2WXsPiphmPaMDYDj1pBHCdczIAeaPlfk34ZzTQ8pXna+CcBEAqPEM8/eLhhCHCy817a3sFCSAtaRk/VoTPPP5B430RjKNqwEaMX5xKavwhMUrdPhP+uprL0QCYhE1+80fpKmtL7+MB6PPT1jJZY6gV5oQHQJomU8hbwdsK8pReEhwAkSAPfXYDgsR+oLjV3YA0XHaNSVVfcDQTmJ0+D4HyMvR+RaI6RIFlgc2AN7tIhLbt0L7bLm0Owb4HrDU65JziKAVCqXDoQuToJrB+2C1VoEB4c/a1wIo5SD8BeFgKk5IYiSYcvCDSa0Cf5Re1WcdHmhLlGhM7+v55hJAwKRFi9qRubZfaLuqtWasH4OMvsT1/dqWp8hSjOWiGl26SHyeYVXCb4UuDeTanoO+/Yg7Z/4iLXMFTD9C5GFqK43JL8ndWuZx+R99/wzFmsEdgtA5dIqtNoMxF+5orpXPVDE97hqABaIVwmRcBuNA7h7VRA87hFl1kiBrgQu8c1kYNOIdbdJGh9hrwH6TuDl+Yu6btAAAAAElFTkSuQmCC"},"5dd2":function(e,t,a){var i=a("81dc");e.exports=function(e,t){return new(i(e))(t)}},"68a9":function(e,t,a){},"6c8d":function(e,t,a){"use strict";a("9e76"),a("9dd9"),a("9a33");t["a"]={getUUid:function(){for(var e=[],t="0123456789abcdef",a=0;a<36;a++)e[a]=t.substr(Math.floor(16*Math.random()),1);e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-";var i=e.join("");return i},getTime:function(e){var t=new Date(e),a=t.getFullYear()+"-",i=(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-",n=(t.getDate()<10?"0"+t.getDate():t.getDate())+" ",l=(t.getHours()<10?"0"+t.getHours():t.getHours())+":",o=(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":",r=t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds();return a+i+n+l+o+r},getDate:function(e){var t=new Date(e),a=t.getFullYear()+"-",i=(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-",n=t.getDate()<10?"0"+t.getDate():t.getDate();return a+i+n},ConvertLevel:function(e){return"Basic"==e?"基地":"Plant"==e?"电厂":"机组"},IsCanDisplayImage:function(e){for(var t="jpg,png,gif,bmp,icon,jpeg",a=t.split(","),i=0;i<a.length;i++)if(a[i]==e)return!0;return!1},getQueryVariable:function(e){var t=window.location.href,a=t.split("?");if(a.length>1){a=a[1].split("&");for(var i=0;i<a.length;i++){var n=a[i].split("=");if(n[0]==e)return n[1]}return null}return null},setCookie:function(e,t){var a=30,i=new Date;i.setTime(i.getTime()+24*a*60*60*1e3),document.cookie=e+"="+escape(t)+";expires="+i.toGMTString()},getCookie:function(e){var t,a=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(a))?unescape(t[2]):null},delCookie:function(e){var t=new Date;t.setTime(t.getTime()-1);var a=getCookie(e);null!=a&&(document.cookie=e+"="+a+";expires="+t.toGMTString())}}},"760f":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"dashboard-container"},[i("div",{staticClass:"sidebar-container"},[i("div",{staticClass:"left_form"},[i("el-form",{ref:"form",attrs:{model:e.leftForm,"label-width":"70px",size:"mini"}},[i("el-form-item",{attrs:{label:"基地"}},[i("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"基地"},on:{change:e.getStataionData},model:{value:e.leftForm.companyId,callback:function(t){e.$set(e.leftForm,"companyId",t)},expression:"leftForm.companyId"}},e._l(e.companyData,(function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"电站","label-width":"70px"}},[i("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"电站"},on:{change:e.getRepairSequenceData},model:{value:e.leftForm.companyStationConfigId,callback:function(t){e.$set(e.leftForm,"companyStationConfigId",t)},expression:"leftForm.companyStationConfigId"}},e._l(e.stataionData,(function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"大修轮次","label-width":"70px"}},[i("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"大修轮次"},on:{change:e.sequenceDataFn},model:{value:e.leftForm.sequenceId,callback:function(t){e.$set(e.leftForm,"sequenceId",t)},expression:"leftForm.sequenceId"}},e._l(e.sequenceData,(function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),e._v(" "),e.leftForm.sequenceId?i("div",{staticClass:"activity_time"},[e._v("\n        "+e._s(e.planTime)+"\n      ")]):i("div",{staticClass:"activity_time"},[e._v("暂无开始时间 至 暂无结束时间")]),e._v(" "),i("div",{staticClass:"my_line"}),e._v(" "),i("div",{staticStyle:{"margin-top":"10px"}},[i("div",{staticClass:"areaTree"},e._l(e.areaList,(function(t){return i("div",{key:t.id,staticClass:"area-item",class:t.id==e.getDataForm.repairWorkRangeManagerId?"areaSelected":"",on:{click:function(a){return e.areaClick(t.id)}}},[i("div",[i("div",{staticStyle:{float:"left",width:"130px"}},[i("p",[i("span",{domProps:{textContent:e._s(t.companystationrangename)}}),e._v("[\n                  "),i("span",{domProps:{textContent:e._s(t.companystationrangecode)}}),e._v("]\n                ")]),e._v(" "),i("p",[e._v("\n                  人数：\n                  "),i("span",{domProps:{textContent:e._s(t.checkinusercount)}}),e._v("/\n                  "),i("span",{domProps:{textContent:e._s(t.onlineusercount)}})]),e._v(" "),i("p",[e._v("\n                  物项：\n                  "),i("span",{domProps:{textContent:e._s(t.checkincomponentcount)}}),e._v("/\n                  "),i("span",{domProps:{textContent:e._s(t.checkoutcomponentcount)}})])])])])})),0)])],1)]),e._v(" "),i("div",{staticClass:"main-container"},[i("div",[i("el-form",{ref:"getDataForm",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.getDataForm,size:"small","highlight-current-row":"","label-position":e.labelPosition}},[i("el-form-item",{attrs:{label:"姓名"}},[i("el-input",{staticClass:"el-form-item_input",staticStyle:{width:"120px"},attrs:{placeholder:"请输入姓名"},model:{value:e.getDataForm.checkPerson,callback:function(t){e.$set(e.getDataForm,"checkPerson",t)},expression:"getDataForm.checkPerson"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"物品信息"}},[i("el-input",{staticClass:"el-form-item_input",staticStyle:{width:"120px"},attrs:{placeholder:"请输入物品信息"},model:{value:e.getDataForm.name,callback:function(t){e.$set(e.getDataForm,"name",t)},expression:"getDataForm.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"时间"}},[i("el-date-picker",{staticStyle:{width:"140px"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.getDataForm.planStartDatetime,callback:function(t){e.$set(e.getDataForm,"planStartDatetime",t)},expression:"getDataForm.planStartDatetime"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"至"}},[i("el-date-picker",{staticStyle:{width:"140px"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.getDataForm.planEndDatetime,callback:function(t){e.$set(e.getDataForm,"planEndDatetime",t)},expression:"getDataForm.planEndDatetime"}})],1),e._v(" "),i("el-form-item",{attrs:{label:""}},[i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:function(t){return e.getDataList()}}},[e._v("查询")]),e._v(" "),i("el-button",{attrs:{type:"info",size:"small",icon:"el-icon-refresh-right"},on:{click:function(t){return e.resetGetDataList()}}},[e._v("重置")]),e._v(" "),i("el-button",{attrs:{type:"info",size:"small",icon:"el-icon-search"},on:{click:function(t){return e.checkOutClick()}}},[e._v("偏差分析")])],1)],1)],1),e._v(" "),i("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"人员登记",name:"first"}},[i("div",{staticStyle:{height:"calc(100vh - 260px)",overflow:"hidden"},attrs:{id:"table_content"}},[i("el-table",{staticStyle:{width:"100%","font-size":"12px"},attrs:{data:e.tableData1,height:e.tableHeader}},[i("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{attrs:{id:"table_content_table"}},[i("el-table",{staticStyle:{width:"100%","font-size":"12px","box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)",margin:"10px 0"},attrs:{data:t.row.tableData,border:""}},[i("el-table-column",{attrs:{prop:"name",label:"物项",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",["Y"==t.row.isForeighEvent?i("i",{staticClass:"el-icon-s-flag",staticStyle:{color:"red","font-size":"18px"},attrs:{title:"已标记成异物事件"}}):"Y"==t.row.isDeviation&&"Y"!=t.row.isDeviationProcess?i("i",{staticClass:"el-icon-s-flag",staticStyle:{color:"yellow","font-size":"18px"},attrs:{title:"偏差未处理"}}):"Y"==t.row.isDeviation&&"Y"==t.row.isDeviationProcess?i("i",{staticClass:"el-icon-s-flag",staticStyle:{color:"green","font-size":"18px"},attrs:{title:"偏出已处理"}}):e._e(),e._v("\n                          "+e._s(t.row.name+"["+t.row.code+"]")+"\n                        ")])]}}],null,!0)}),e._v(" "),i("el-table-column",{attrs:{prop:"checkInQuantity",align:"center",label:"登记数量"}}),e._v(" "),i("el-table-column",{attrs:{label:"带出数量",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",[e._v("\n                          "+e._s(t.row.checkOutQuantity+t.row.useQuantity)+"\n                        ")])]}}],null,!0)}),e._v(" "),i("el-table-column",{attrs:{prop:"aiCompareResult",align:"center",label:"AI对比结果"}}),e._v(" "),i("el-table-column",{attrs:{prop:"releaseReason",label:"原因"}}),e._v(" "),i("el-table-column",{attrs:{prop:"usePerson",label:"登记人"}}),e._v(" "),i("el-table-column",{attrs:{prop:"checkInPic",label:"登记图片",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticStyle:{"text-align":"center",display:"table-cell","vertical-align":"middle"}},[t.row.checkInPic?i("img",{staticStyle:{width:"50%",display:"block",margin:"0 auto"},attrs:{src:e.showImageFileId(t.row.checkInPic)}}):e._e()])]}}],null,!0)}),e._v(" "),i("el-table-column",{attrs:{prop:"returnPerson",label:"带出人"}}),e._v(" "),i("el-table-column",{attrs:{label:"带出图片",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.checkOutPic?i("div",{staticStyle:{"text-align":"center",display:"table-cell","vertical-align":"middle"}},[i("img",{staticStyle:{width:"50%",display:"block",margin:"0 auto"},attrs:{src:e.showImageFileId(t.row.checkOutPic)}})]):e._e()]}}],null,!0)}),e._v(" "),i("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return["Y"!=t.row.isComplete?i("div",[i("el-button",{staticStyle:{height:"25px",width:"52px",display:"inline-block",position:"relative"},attrs:{size:"mini"},on:{click:function(a){return e.handlExit(t.$index,t.row,!0)}}},[i("img",{staticStyle:{top:"0px",width:"23px",left:"14px",position:"absolute"},attrs:{src:a("3cc4")}})]),e._v(" "),"Y"!=t.row.isDeviation?i("el-button",{staticClass:"el-icon-edit",attrs:{size:"mini"},on:{click:function(a){return e.editComponent(t.$index,t.row)}}}):e._e(),e._v(" "),"Y"!=t.row.isDeviation?i("el-button",{staticClass:"el-icon-delete",attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleComponentDelete(t.$index,t.row)}}}):e._e()],1):i("div",[i("el-button",{staticClass:"el-icon-document",attrs:{size:"mini"},on:{click:function(a){return e.handlExit(t.$index,t.row,!1,1)}}})],1)]}}],null,!0)})],1)],1)]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"状态",width:"70",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",["Y"==t.row.isForeighEvent?i("i",{staticClass:"el-icon-s-flag",staticStyle:{color:"red","font-size":"18px"},attrs:{title:"已标记成异物事件"}}):"Y"==t.row.isDeviation&&"Y"!=t.row.isDeviationProcess?i("i",{staticClass:"el-icon-s-flag",staticStyle:{color:"yellow","font-size":"18px"},attrs:{title:"偏差未处理"}}):"Y"==t.row.isDeviation&&"Y"==t.row.isDeviationProcess?i("i",{staticClass:"el-icon-s-flag",staticStyle:{color:"green","font-size":"18px"},attrs:{title:"偏出已处理"}}):e._e(),e._v(" "),"offline"==t.row.isOnline?i("span",[i("i",{staticClass:"el-icon-s-custom",staticStyle:{color:"#dcdfe6","font-size":"18px"}})]):i("span",[i("i",{staticClass:"el-icon-s-custom",staticStyle:{color:"#409eff","font-size":"18px"}})])])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"姓名",prop:"checkPerson",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:"进入时间",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticStyle:{"text-align":"center",display:"table-cell","vertical-align":"middle"}},[i("div",[e._v(e._s(t.row.checkInDatetime))]),e._v(" "),t.row.checkInPic?i("img",{staticStyle:{height:"40px",width:"40px",display:"block",margin:"0 auto"},attrs:{src:e.showImageFileId(t.row.checkInPic)}}):e._e()])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"退出时间",prop:"name",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.checkOutDatetime?i("div",{staticStyle:{"text-align":"center",display:"table-cell","vertical-align":"middle"}},[i("div",[e._v(e._s(t.row.checkOutDatetime))]),e._v(" "),t.row.checkOutPic?i("img",{staticStyle:{height:"40px",width:"40px",display:"block",margin:"0 auto"},attrs:{src:e.showImageFileId(t.row.checkOutPic)}}):e._e()]):i("div",{staticStyle:{"text-align":"center"}},[e._v("暂无信息")])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"大修轮次",prop:"repairSequenceCode",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:"工作区域",prop:"name",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:"携物情况",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[null!=t.row.checkInQuantity?i("span",[i("a",[e._v(e._s(t.row.checkInQuantity)+"/"+e._s(e.checkOutCnt(t.row)))])]):i("span",[i("a",[e._v("0")])])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"工作票",prop:"workOrderNo",width:"80"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticClass:"el-icon-circle-plus",attrs:{size:"mini"},on:{click:function(a){return e.indexHandleEdit(t.$index,t.row)}}}),e._v(" "),null==t.row.checkOutDatetime?i("el-button",{staticClass:"el-icon-edit",attrs:{size:"mini"},on:{click:function(a){return e.editPersonClick(t.$index,t.row)}}}):e._e(),e._v(" "),null!=t.row.checkOutDatetime?i("el-button",{staticClass:"el-icon-document",attrs:{size:"mini"},on:{click:function(a){return e.editPersonClick(t.$index,t.row)}}}):e._e()]}}])},[i("template",{slot:"header"},[i("span",[e._v("\n                  操作\n                  "),i("i",{staticClass:"el-icon-circle-plus",staticStyle:{color:"#409eff","margin-left":"3px","font-size":"17px",cursor:"pointer",top:"2px",position:"relative"},on:{click:e.addListClick}})])])],2)],1)],1),e._v(" "),i("div",{staticClass:"my_el_pagination"},[i("el-pagination",{attrs:{"current-page":e.PageIndex,"page-sizes":[20,50,100],"page-size":e.size,layout:"prev, pager, next, jumper,sizes,total",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)]),e._v(" "),i("el-tab-pane",{attrs:{label:"物品登记",name:"second"}},[i("div",{staticStyle:{height:"calc(100vh - 260px)",overflow:"hidden"}},[i("el-table",{staticStyle:{width:"100%","font-size":"12px"},attrs:{data:e.tableWpData,border:"",height:e.tableHeader}},[i("el-table-column",{attrs:{label:"序号",type:"index","show-overflow-tooltip":"",width:"50"}}),e._v(" "),i("el-table-column",{attrs:{label:"物项信息"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v("\n                  "+e._s(t.row.name+"["+t.row.code+"]")+"\n                ")])]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"checkInQuantity",label:"登记数量"}}),e._v(" "),i("el-table-column",{attrs:{label:"带出数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",[e._v("\n                  "+e._s(t.row.checkOutQuantity+t.row.useQuantity)+"\n                ")])]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"repairSequenceCode",label:"大修轮次"}}),e._v(" "),i("el-table-column",{attrs:{prop:"checkInCompanyStationRangeId",label:"工作区域"}}),e._v(" "),i("el-table-column",{attrs:{prop:"usePerson",label:"登记人"}}),e._v(" "),i("el-table-column",{attrs:{prop:"checkInPic",label:"登记图片"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticStyle:{"text-align":"center",display:"table-cell","vertical-align":"middle",cursor:"pointer"}},[t.row.checkInPic?i("img",{staticStyle:{width:"50%",display:"block",margin:"0 auto"},attrs:{src:e.showImageFileId(t.row.checkInPic)},on:{click:function(a){return e.handlExit(t.$index,t.row,!1)}}}):e._e()])]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"returnPerson",label:"带出人"}}),e._v(" "),i("el-table-column",{attrs:{prop:"date",label:"带出图片"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.checkOutPic?i("div",{staticStyle:{"text-align":"center",display:"table-cell","vertical-align":"middle"}},[i("img",{staticStyle:{width:"50%",display:"block",margin:"0 auto"},attrs:{src:e.showImageFileId(t.row.checkOutPic)},on:{click:function(a){return e.handlExit(t.$index,t.row,!1)}}})]):e._e()]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"remark",label:"备注"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作"}},[void 0],2)],1)],1),e._v(" "),i("div",{staticClass:"my_el_pagination"},[i("el-pagination",{attrs:{"page-sizes":[20,50,100],"current-page":e.wpPageIndex,"page-size":e.wpSize,layout:"prev, pager, next, jumper,sizes,total",total:e.wptotal},on:{"size-change":e.handleWpSizeChange,"current-change":e.handleWpCurrentChange}})],1)])],1)],1),e._v(" "),i("AddToolPage",{ref:"AddToolPage",on:{choseItmeClick:e.choseItmeClick}}),e._v(" "),i("manForm"),e._v(" "),i("addPage",{ref:"addpage",on:{addClick:e.addClick}}),e._v(" "),i("itemsDetails",{ref:"itemsDetails"}),e._v(" "),i("exititemsDetails",{ref:"exititemsDetails",on:{cancellationClick:e.cancellationClick}}),e._v(" "),i("editorsDetails",{ref:"editorsDetails",on:{addDetailClick:e.addDetailClick}}),e._v(" "),i("checkOutComponent",{ref:"checkOutComponent",on:{checkOutComponentClick:e.checkOutComponentClick}})],1)},n=[],l=a("ce3c"),o=(a("cc57"),a("a336")),r=a.n(o),s=a("b775"),c=a("7c15"),d=a("6c8d"),p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app_page_com",attrs:{id:"app_page_com"}},[a("el-dialog",{attrs:{title:"选择物项",visible:e.dialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("hamburger",{staticClass:"hamburger-close",staticStyle:{cursor:"pointer"},attrs:{"is-active":e.isActive},on:{toggleClick:e.toggleSideBar}}),e._v(" "),a("el-card",{staticClass:"box-card",staticStyle:{height:"100%"}},[a("div",{staticClass:"dashboard-container"},[a("div",{staticClass:"sidebar-container"},[a("el-tree",{staticStyle:{"font-size":"14px"},attrs:{data:e.treeData,"node-key":"id","default-expand-all":"",props:e.defaultProps}})],1),e._v(" "),a("div",{staticClass:"main-container"},[a("div",[a("el-form",{ref:"true",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.form,size:"small","highlight-current-row":"","label-position":e.labelPosition}},[a("el-form-item",{attrs:{label:"编号"}},[a("el-input",{staticClass:"el-form-item_input",staticStyle:{width:"130px"},attrs:{placeholder:"请输入编号"},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{staticClass:"el-form-item_input",staticStyle:{width:"130px"},attrs:{placeholder:"请输入名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"适用区域"}},[a("el-select",{staticClass:"el-form-item_input",attrs:{size:"small",placeholder:"请选择"},model:{value:e.form.applicableRange,callback:function(t){e.$set(e.form,"applicableRange",t)},expression:"form.applicableRange"}},e._l(e.ApplyData,(function(e){return a("el-option",{key:e.id,attrs:{label:e.constDesc,value:e.id}})})),1)],1),e._v(" "),a("el-form-item",[a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:function(t){return e.getDataList()}}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"info",size:"small",icon:"el-icon-refresh-right"},on:{click:function(t){return e.resetGetDataList()}}},[e._v("重置")])],1)],1)],1),e._v(" "),a("div",{attrs:{id:"gj"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"singleTable",staticStyle:{"font-size":"12px"},attrs:{data:e.tableData,border:"",height:e.tableHeader,"highlight-current-row":""},on:{"current-change":e.handleCurrentTableChange}},[a("el-table-column",{attrs:{prop:"code",label:"编号",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"barcode",label:"物项条码",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"category",label:"物项类别"}}),e._v(" "),a("el-table-column",{attrs:{prop:"purposeType",label:"物项分类",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"applicableRangeName",label:"适用区域"}}),e._v(" "),a("el-table-column",{attrs:{prop:"easyRange",label:"阀值"}}),e._v(" "),a("el-table-column",{attrs:{prop:"unit",label:"单位",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{label:"图片",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{width:"50px",height:"40px"},attrs:{src:"/fme/UC/firstImageInfo?bussinessId="+e.row.id}})]}}])})],1),e._v(" "),a("div",{staticClass:"my_el_pagination"},[a("el-pagination",{attrs:{"page-sizes":[10,15,20],"page-size":e.size,layout:"prev, pager, next, jumper,total",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)])])]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("关 闭")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.choseItmeClick}},[e._v(" 选 择")])],1)],1)],1)},m=[],u=(a("e697"),a("4f1e")),f={name:"Access",watch:{dialogVisible:function(e){var t=this;e&&(t.$nextTick((function(){var e=r()(window).height()-70;r()("#app_page_com").find(".el-dialog").css("width","1100px"),r()("#app_page_com").find(".el-dialog").css("margin-top","60px"),r()("#app_page_com").find(".el-dialog").css("height",e+"px"),r()("#app_page_com").find(".el-dialog").css("overflow","hidden"),r()("#app_page_com").find(".el-dialog__body").css("height",e-140+"px"),r()("#app_page_com").find(".el-card__body").css("height","100%").css("padding",0),t.tableHeader=e-270,r()("#app_page_com").find(".el-dialog__footer").css("padding-top","40px")})),t.getDataTreeList(),t.getApply())}},data:function(){return{currentRow:null,loading:!1,ApplyData:[],tableHeader:0,initItem:{},labelPosition:"right",searchForm:{startDate:"",endData:"",checked:!1,checkedNo:!1},tableData:[],size:50,total:1,PageIndex:1,dialogVisible:!1,isActive:!0,form:{code:"",name:"",baseStation:"",applicablePlant:"",applicableRange:"全部"},treeData:[],defaultProps:{children:"children",label:"name",id:"id"}}},components:{Hamburger:u["a"]},mounted:function(){r()(".hamburger-close").show()},methods:{choseItmeClick:function(){var e=this;if(!e.currentRow)return e.$message.error("请选择一条数据"),!1;e.currentRow.tableIndex=e.initItem.tableIndex;var t={key:e.currentRow,val:e.initItem};e.$emit("choseItmeClick",t),e.dialogVisible=!1},handleCurrentTableChange:function(e){this.currentRow=e,this.$refs.singleTable.setCurrentRow(e)},getApply:function(){var e=this;Object(s["a"])({url:c["a"].getConstRecByTypeInfoWorkRegion,method:"get"}).then((function(t){var a=[],i={constDesc:"全部",id:"全部"};a=t.result,a.unshift(i),e.ApplyData=a,e.getDataList()}))},getDataTreeList:function(){var e=this;Object(s["a"])({url:c["a"].getComponentTypeTree,method:"get"}).then((function(t){e.treeData=t.result}))},handleSizeChange:function(e){console.log("每页 ".concat(e," 条"))},getDataList:function(){var e=this;"全部"==e.form.applicableRange&&(e.form.applicableRange=""),e.loading=!0;var t={code:e.form.code,name:e.form.name,applicableRange:e.form.applicableRange,baseStation:e.form.baseStation,applicablePlant:e.form.applicablePlant,category:"",parentId:e.form.id,PageSize:e.size,PageIndex:e.PageIndex};Object(s["a"])({url:c["a"].getComponentInfo,method:"get",params:t}).then((function(t){var a=t.result.rows;e.loading=!1;e.tableData=a,e.total=parseInt(t.result.records)}))},handleCurrentChange:function(e){var t=this;t.PageIndex=e,t.getDataList()},init:function(e){var t=this;t.initItem=e,t.form.applicablePlant=e.stataionId,t.form.baseStation=e.companyId,t.dialogVisible=!0},toggleSideBar:function(){var e=this;e.isActive=!e.isActive,e.$nextTick((function(){console.log(r()(".app_page_com").find(".sidebar-container").css("display")),"block"==r()(".app_page_com").find(".sidebar-container").css("display")?(r()(".app_page_com").find(".sidebar-container").hide(),r()(".app_page_com").find(".main-container").css("width","100%")):(r()(".app_page_com").find(".main-container").css("width","calc(100% - 210px"),r()(".app_page_com").find(".sidebar-container").show())}))}}},g=f,h=(a("0ac7"),a("9ca4")),b=Object(h["a"])(g,p,m,!1,null,"a6cdf88a",null),v=b.exports,k=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"manForm"}},[a("div",[a("el-dialog",{attrs:{title:"人员进出控制",visible:e.dialogVisible,"close-on-click-modal":!1,top:"5%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",[a("el-form",{ref:"addForm",attrs:{inline:!0,model:e.addForm,rules:e.rules,"label-position":e.labelPosition}},[a("el-form-item",{attrs:{label:"姓名",prop:"deptNo",required:!0,"label-width":"80px"}},[a("el-input",{staticClass:"el-form-item_input",attrs:{size:"small",placeholder:"请输入姓名"},model:{value:e.addForm.deptNo,callback:function(t){e.$set(e.addForm,"deptNo",t)},expression:"addForm.deptNo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"身份证",prop:"deptName","label-width":"80px",required:!0}},[a("el-input",{staticClass:"el-form-item_input",attrs:{size:"small",placeholder:"请输入身份证"},model:{value:e.addForm.deptName,callback:function(t){e.$set(e.addForm,"deptName",t)},expression:"addForm.deptName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"进入时间","label-width":"80px"}},[a("el-date-picker",{staticStyle:{width:"173px"},attrs:{type:"date",size:"small",placeholder:"选择日期"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"至","label-width":"80px",id:"zhi"}},[a("el-date-picker",{staticStyle:{width:"173px"},attrs:{type:"date",size:"small",placeholder:"选择日期"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"人员类型",prop:"deptNo",required:!0,"label-width":"80px"}},[a("el-input",{staticClass:"el-form-item_input",attrs:{size:"small",placeholder:"请输入人员类型"},model:{value:e.addForm.deptNo,callback:function(t){e.$set(e.addForm,"deptNo",t)},expression:"addForm.deptNo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"工作区域",prop:"deptName","label-width":"80px",required:!0}},[a("el-input",{staticClass:"el-form-item_input",attrs:{size:"small",placeholder:"请输入工作区域"},model:{value:e.addForm.deptName,callback:function(t){e.$set(e.addForm,"deptName",t)},expression:"addForm.deptName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注","label-width":"80px"}},[a("el-input",{staticStyle:{width:"442px"},attrs:{type:"textarea",placeholder:"请输入备注"},model:{value:e.addForm.remark,callback:function(t){e.$set(e.addForm,"remark",t)},expression:"addForm.remark"}})],1),e._v(" "),a("div",{attrs:{id:"img_list"}},[a("el-form-item",{attrs:{label:"",prop:"deptNo",required:!0,"label-width":"80px"}},[a("div",{staticClass:"img_list_titel"},[e._v("进入图片验证")]),e._v(" "),a("img",{staticStyle:{width:"30%",display:"block",margin:"0 auto"},attrs:{src:"http://bpsoft.cn:9009/swps/UC/showImageInfo?fileId=70a130d8-4234-4294-80b8-6513572554bd"}})]),e._v(" "),a("el-form-item",{attrs:{label:"",prop:"deptName","label-width":"80px",required:!0}},[a("div",{staticClass:"img_list_titel"},[e._v("退出图片验证")]),e._v(" "),a("img",{staticStyle:{width:"30%",display:"block",margin:"0 auto"},attrs:{src:"http://bpsoft.cn:9009/swps/UC/showImageInfo?fileId=70a130d8-4234-4294-80b8-6513572554bd"}})])],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.addClick}},[e._v("退出区域")])],1)])],1)])},y=[],I={watch:{dialogVisible:function(e){var t=this;e?r()("#manForm").find(".el-dialog").css("width","650px"):(t.addForm={deptName:"",deptNo:"",deptDescription:"",deptAddress:"",parent:"",deptId:""},t.$refs["addForm"].resetFields())}},data:function(){return{dialogVisible:!1,labelPosition:"right",titel:"",addForm:{type:1,deptName:"",deptNo:"",deptDescription:"",deptAddress:"",parent:"",deptId:""},level:"",rules:{deptName:[{required:!0,message:"请输入电站编号",trigger:"blur"}],deptNo:[{required:!0,message:"请输入现场编号",trigger:"blur"}]}}},mounted:function(){},methods:{addClick:function(){var e=this,t=this;this.$refs["addForm"].validate((function(a){a?t.$emit("addClick",t.addForm):console.log(e.addForm)}))},closeClick:function(){var e=this;e.dialogVisible=!1},init:function(e,t){var a=this;a.dialogVisible=!0,a.type=t,1==t?(a.addForm.createBy=JSON.parse(sessionStorage.userInfo)["displayName"],a.addForm.type=t,e.parent?a.addForm.parent=e.deptId:a.addForm.parent=0):2==t&&(a.addForm={type:t,deptName:e.deptName,deptNo:e.deptNo,deptDescription:e.deptDescription,deptAddress:e.deptAddress,parent:e.parent,deptId:e.deptId,createBy:e.createBy})}}},x=I,_=(a("8936"),Object(h["a"])(x,k,y,!1,null,"4ab1a78c",null)),D=_.exports,S=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"access_add"}},[i("div",[i("el-dialog",{attrs:{title:e.titel,visible:e.dialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("el-form",{ref:"addForm",attrs:{inline:!0,model:e.addForm,rules:e.rules,"label-position":e.labelPosition}},[i("el-form-item",{attrs:{label:"基地",prop:"companyId","label-width":"100px"}},[i("el-select",{staticClass:"el-form-item_input",staticStyle:{width:"176px"},attrs:{size:"small",disabled:!e.isUpload,placeholder:"请选择基地"},on:{change:e.getStataionData},model:{value:e.addForm.companyId,callback:function(t){e.$set(e.addForm,"companyId",t)},expression:"addForm.companyId"}},e._l(e.companyData,(function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"电站",prop:"stationId","label-width":"100px"}},[i("el-select",{staticClass:"el-form-item_input",staticStyle:{width:"176px"},attrs:{size:"small",disabled:!e.isUpload,placeholder:"请选择电站"},on:{change:e.getRepairSequenceData},model:{value:e.addForm.stationId,callback:function(t){e.$set(e.addForm,"stationId",t)},expression:"addForm.stationId"}},e._l(e.stataionData,(function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"大修轮次",prop:"repairSequenceId","label-width":"100px"}},[i("el-select",{staticClass:"el-form-item_input",staticStyle:{width:"176px"},attrs:{size:"small",disabled:!e.isUpload,placeholder:"请选择大修轮次"},on:{change:e.getRangeData},model:{value:e.addForm.repairSequenceId,callback:function(t){e.$set(e.addForm,"repairSequenceId",t)},expression:"addForm.repairSequenceId"}},e._l(e.sequenceData,(function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"工作区域",prop:"repairWorkRangeManagerId","label-width":"100px"}},[i("el-select",{staticClass:"el-form-item_input",staticStyle:{width:"176px"},attrs:{size:"small",disabled:!e.isUpload},model:{value:e.addForm.repairWorkRangeManagerId,callback:function(t){e.$set(e.addForm,"repairWorkRangeManagerId",t)},expression:"addForm.repairWorkRangeManagerId"}},e._l(e.rangeData,(function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),e._v(" "),i("el-form-item",{ref:"checkPerson",attrs:{label:"登记人",prop:"checkPerson","label-width":"100px"}},[i("el-input",{staticClass:"el-form-item_input",staticStyle:{width:"176px"},attrs:{disabled:!e.isUpload,size:"small",placeholder:"请选择登记人"},nativeOn:{click:function(t){return e.staffSelectClick()}},model:{value:e.addForm.checkPerson,callback:function(t){e.$set(e.addForm,"checkPerson",t)},expression:"addForm.checkPerson"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"登记时间",prop:"checkInDatetime","label-width":"100px"}},[i("el-date-picker",{staticStyle:{width:"176px"},attrs:{size:"small",disabled:!e.isUpload,type:"datetime",placeholder:"请选择登记时间"},model:{value:e.addForm.checkInDatetime,callback:function(t){e.$set(e.addForm,"checkInDatetime",t)},expression:"addForm.checkInDatetime"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"工单号",prop:"workOrderNo","label-width":"100px"}},[i("el-input",{staticClass:"el-form-item_input",staticStyle:{width:"176px"},attrs:{disabled:!e.isUpload,size:"small",placeholder:"请输入工单号"},model:{value:e.addForm.workOrderNo,callback:function(t){e.$set(e.addForm,"workOrderNo",t)},expression:"addForm.workOrderNo"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"人员类型",prop:"personType","label-width":"100px"}},[i("el-select",{staticClass:"el-form-item_input",staticStyle:{width:"176px"},attrs:{size:"small",disabled:!e.isUpload},model:{value:e.addForm.personType,callback:function(t){e.$set(e.addForm,"personType",t)},expression:"addForm.personType"}},e._l(e.personTypeData,(function(e){return i("el-option",{key:e.id,attrs:{label:e.constDesc,value:e.constDesc}})})),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"退出时间",prop:"checkOutDatetime","label-width":"100px"}},[i("el-date-picker",{staticStyle:{width:"176px"},attrs:{disabled:!e.isUpload,size:"small",type:"datetime",placeholder:"请选择退出时间"},model:{value:e.addForm.checkOutDatetime,callback:function(t){e.$set(e.addForm,"checkOutDatetime",t)},expression:"addForm.checkOutDatetime"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"创建人","label-width":"100px"}},[i("span",[e._v(e._s(e.addForm.createdBy))])]),e._v(" "),i("el-form-item",{staticStyle:{width:"497px",padding:"10px 0 0 0"},attrs:{label:"登记图片","label-width":"100px"}},[i("input",{staticStyle:{display:"none"},attrs:{type:"file",accept:"image/png, image/jpeg, image/gif, image/jpg",id:"file"},on:{change:function(t){return e.changepic("CheckIn")}}}),e._v(" "),i("div",{staticClass:"fjcontent",staticStyle:{float:"left","margin-right":"30px"}},e._l(e.fileData,(function(t){return i("div",{key:t.id,staticClass:"fjlist",staticStyle:{"min-width":"120px"}},["png"==t.type||"jpeg"==t.type||"gif"==t.type||"jpg"==t.type?i("div",{staticClass:"fjlistconent"},[e.isUpload?i("img",{staticClass:"flclose",attrs:{src:a("a267")},on:{click:function(a){return e.deleteFileClick(t)}}}):e._e(),e._v(" "),i("div",{on:{click:function(a){return e.downloadClick(t)}}},[i("img",{staticClass:"fjimg",attrs:{src:e.showImageInfo+t.id}})]),e._v(" "),i("div",{staticClass:"fjname"},[e._v("\n                  "+e._s(t.name)+"\n                ")])]):e._e()])})),0),e._v(" "),e.isUpload&&0==e.fileData.length?i("el-button",{staticStyle:{float:"left"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.setImgClick("CheckIn")}}},[e._v("上传图片")]):e._e()],1),e._v(" "),i("el-form-item",{staticStyle:{width:"497px",padding:"10px 0"},attrs:{label:"退出图片","label-width":"100px"}},[i("input",{staticStyle:{display:"none"},attrs:{type:"file",accept:"image/png, image/jpeg, image/gif, image/jpg",id:"fileOut"},on:{change:function(t){return e.changepic("CheckOut")}}}),e._v(" "),i("div",{staticClass:"fjcontent",staticStyle:{float:"left","margin-right":"30px"}},e._l(e.fileOutData,(function(t){return i("div",{key:t.id,staticClass:"fjlist",staticStyle:{"min-width":"120px"}},["png"==t.type||"jpeg"==t.type||"gif"==t.type||"jpg"==t.type?i("div",{staticClass:"fjlistconent"},[e.isUpload?i("img",{staticClass:"flclose",attrs:{src:a("a267")},on:{click:function(a){return e.deleteFileClick(t)}}}):e._e(),e._v(" "),i("div",{on:{click:function(a){return e.downloadClick(t)}}},[i("img",{staticClass:"fjimg",attrs:{src:e.showImageInfo+t.id}})]),e._v(" "),i("div",{staticClass:"fjname"},[e._v("\n                  "+e._s(t.name)+"\n                ")])]):e._e()])})),0),e._v(" "),e.isUpload&&0==e.fileOutData.length?i("el-button",{staticStyle:{float:"left"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.setImgClick("CheckOut")}}},[e._v("上传图片")]):e._e()],1),e._v(" "),i("el-form-item",{attrs:{label:"备注","label-width":"100px"}},[i("el-input",{staticStyle:{width:"477px"},attrs:{disabled:!e.isUpload,type:"textarea",placeholder:"请输入备注"},model:{value:e.addForm.remark,callback:function(t){e.$set(e.addForm,"remark",t)},expression:"addForm.remark"}})],1)],1),e._v(" "),e.isUpload?i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.addClick}},[e._v("确 定")])],1):e._e()],1)],1),e._v(" "),i("StaffSelect",{ref:"staffSelect",on:{addStaffClick:e.addStaffClick}})],1)},w=[],C=a("9805"),F={watch:{dialogVisible:function(e){var t=this;e?t.$nextTick((function(){var e=r()(window).height()-70;r()("#access_add").find(".el-dialog").css("width","650px"),r()("#access_add").find(".el-dialog").css("margin-top","60px"),r()("#access_add").find(".el-dialog").css("max-height",e-130+"px"),r()("#access_add").find(".el-dialog").css("overflow","hidden"),r()("#access_add").find(".el-dialog__body").css("max-height",e-280+"px").css("overflow-y","auto")})):(t.addForm={companyCode:"",companyName:"",companyId:"",checkInDatetime:"",checkOutPic:"",remark:"",id:"",magneticCardId:"",stationId:"",repairSequenceId:"",checkInPic:"",checkPerson:"",checkInGroupType:"",repairWorkRangeManagerId:"",checkOutDatetime:"",personType:"",checkInCompanyStationRangeId:"",workOrderNo:"",createdBy:"",idCard:""},t.isUpload=!0,t.$refs["addForm"].resetFields(),t.fileData=[],t.fileOutData=[])}},data:function(){return{stataionData:[],sequenceData:[],rangeData:[],fileOutData:[],imgSrc:"",showImageInfo:c["a"].showImageInfo,downloadFileInfo:c["a"].downloadFileInfo,fileData:[],isUpload:!0,personTypeData:[],dialogVisible:!1,titel:"",labelPosition:"right",companyData:[],isEdit:!1,rules:{companyId:[{required:!0,message:"请选择基地",trigger:"blur"}],stationId:[{required:!0,message:"请选择电站",trigger:"blur"}],checkInDatetime:[{required:!0,message:"请选择登记日期",trigger:"blur"}],personType:[{required:!0,message:"请选择人员类型",trigger:"blur"}],checkPerson:[{required:!0,message:"请选择登记人",trigger:"blur"}],repairSequenceId:[{required:!0,message:"请选择大修轮次",trigger:"blur"}],repairWorkRangeManagerId:[{required:!0,message:"请选择工作区域",trigger:"blur"}]},addForm:{companyCode:"",companyName:"",companyId:"",checkInDatetime:"",checkOutDatetime:"",checkOutPic:"",createdBy:"",remark:"",id:"",magneticCardId:"",checkInPic:"",stationId:"",repairSequenceId:"",checkInGroupType:"",checkPerson:"",repairWorkRangeManagerId:"",personType:"",workOrderNo:"",checkInCompanyStationRangeId:"",idCard:""}}},components:{StaffSelect:C["a"]},methods:{downloadClick:function(e){var t=document.createElement("a");t.href=c["a"].serverUrl()+"/fme/UC/downloadFileInfo?fileID="+e.id,document.body.appendChild(t),t.click()},addStaffClick:function(e){var t=this;if(e.length>0){var a=e[0];t.addForm.checkPerson=a.displayName,t.addForm.idCard=a.idCard,t.addForm.magneticCardId=a.magneticCardId,t.$refs["checkPerson"].clearValidate()}else t.addForm.checkPerson="",t.addForm.idCard="",t.addForm.magneticCardId="";t.$refs["staffSelect"].closeClick()},staffSelectClick:function(){var e=this;e.$refs["staffSelect"].init({deptNos:"",selectedUser:e.addForm.checkPerson},"0")},addClick:function(){var e=this;this.$refs["addForm"].validate((function(t){if(t){for(var a in e.rangeData)e.rangeData[a].id==e.addForm.repairWorkRangeManagerId&&(e.addForm.checkInCompanyStationRangeId=e.rangeData[a].companyStationRangeId,e.addForm.checkInGroupType=e.rangeData[a].groupType);e.$emit("addClick",e.addForm)}else;}))},getPersonTypeData:function(){var e=this;Object(s["a"])({url:c["a"].getConstRecByTypeInfo,method:"get",params:{type:"personType"}}).then((function(t){e.personTypeData=t.result}))},closeClick:function(){var e=this;e.dialogVisible=!1},getCompanyData:function(){var e=this;Object(s["a"])({url:c["a"].getStationUnitInfo,method:"get",params:{parent:"0",unitlevel:"Basic"}}).then((function(t){e.companyData=t.result}))},getFileList:function(e){var t=this;Object(s["a"])({url:c["a"].getFileInfo,method:"get",params:{businessid:t.addForm.id,businessType:e}}).then((function(a){200==a.code&&("CheckIn"==e?(t.fileData=[],t.fileData=a.result,null!=t.fileData&&0!=t.fileData.length||(t.addForm.checkInPic="")):(t.fileOutData=[],t.fileOutData=a.result,null!=t.fileOutData&&0!=t.fileOutData.length||(t.addForm.checkOutPic="")))}))},deleteFileClick:function(e){var t=this;Object(s["a"])({url:c["a"].deleteFile,method:"get",params:{fileID:e.id}}).then((function(a){"200"==a.code?(t.$message({type:"success",message:"删除成功!"}),t.getFileList(e.businessSubType),t.$emit("getDataList")):t.$message({type:"info",message:a.message})}))},setImgClick:function(e){var t=this;"CheckIn"==e?t.fileData.length>0?t.$message({message:"登记图片只能上传一张图片，删除图片后再上传",type:"warning"}):0==t.fileData.length&&r()("#file").trigger("click"):t.fileOutData.length>0?t.$message({message:"退出图片只能上传一张图片，删除图片后再上传",type:"warning"}):0==t.fileOutData.length&&r()("#fileOut").trigger("click")},changepic:function(e){var t=this,a=new FileReader,i="file";"CheckOut"==e&&(i="fileOut");var n=document.getElementById(i).files[0];a.readAsDataURL(n);var l=new FormData;l.append("file",document.getElementById(i).files[0]);JSON.parse(sessionStorage.userInfo)["toKey"];l.append("SubType",e),l.append("BusinessID",t.addForm.id),r.a.ajax({url:c["a"].uploadFile,type:"POST",data:l,headers:{"X-CSRFToken":JSON.parse(sessionStorage.userInfo)["toKey"]},processData:!1,contentType:!1,beforeSend:function(){},success:function(a){"CheckIn"==e?t.addForm.checkInPic=a.result.id:t.addForm.checkOutPic=a.result.id,t.getFileList(e),t.$emit("getDataList")},error:function(e){}}),a.onload=function(e){}},getStataionData:function(e){var t=this;t.addForm.companyId=e;var a=t.companyData.find((function(t){return t.id===e}));null!=a&&(t.addForm.companyCode=a.code,t.addForm.companyName=a.name),Object(s["a"])({url:c["a"].getStationUnitInfo,method:"get",params:{parent:t.addForm.companyId,unitlevel:"Plant"}}).then((function(e){"200"==e.code?t.stataionData=e.result:t.$message({type:"info",message:e.message})}))},getRepairSequenceData:function(e){var t=this;Object(s["a"])({url:c["a"].getRepairSequenceInfo,method:"get",params:{companyId:e,subId:0}}).then((function(e){t.sequenceData=e.result}))},getRangeData:function(e){var t=this;Object(s["a"])({url:c["a"].getRepairSequenceInfo,method:"get",params:{companyId:e,subId:1}}).then((function(e){"200"==e.code?t.rangeData=e.result:t.$message({type:"info",message:e.message})}))},init:function(e,t){var a=this;a.dialogVisible=!0,a.isEdit=t,a.titel="人员登记",a.isUpload=!0,t?(a.addForm={companyCode:e.companyCode,companyName:e.companyName,companyId:e.companyId,checkInDatetime:e.checkInDatetime,remark:e.remark,id:e.id,createdBy:e.createdBy,checkOutDatetime:e.checkOutDatetime,magneticCardId:e.magneticCardId,stationId:e.stationId,repairSequenceId:e.repairSequenceId,repairWorkRangeManagerId:e.repairWorkRangeManagerId,personType:e.personType,checkInCompanyStationRangeId:e.checkInCompanyStationRangeId,idCard:e.idCard,checkInPic:e.checkInPic,workOrderNo:e.workOrderNo,checkOutPic:e.checkOutPic,checkPerson:e.checkPerson},a.getPersonTypeData(),a.getCompanyData(),a.getStataionData(e.companyId),a.getRepairSequenceData(e.stationId),a.getRangeData(e.repairSequenceId),a.getFileList("CheckIn"),a.getFileList("CheckOut"),null!=e.checkOutDatetime&&(a.isUpload=!1)):(a.addForm.companyId=e.companyId,a.getPersonTypeData(),a.getCompanyData(),a.addForm.createdBy=e.createdBy,a.addForm.id=e.id,""!=e.companyId&&(a.getStataionData(a.addForm.companyId),""!=e.stationId&&(a.addForm.stationId=e.stationId,a.getRepairSequenceData(e.stationId),""!=e.repairSequenceId&&(a.addForm.repairSequenceId=e.repairSequenceId,a.getRangeData(e.repairSequenceId),""!=e.repairWorkRangeManagerId&&(a.addForm.repairWorkRangeManagerId=e.repairWorkRangeManagerId)))))}}},O=F,P=Object(h["a"])(O,S,w,!1,null,"a493819e",null),R=P.exports,N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("el-dialog",{attrs:{title:"物品详情",visible:e.dialogVisible,"close-on-click-modal":!1,top:"5%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",[a("el-form",{ref:"addForm",attrs:{inline:!0,model:e.addForm,rules:e.rules,"label-position":e.labelPosition}},[a("div",{attrs:{id:"img_list"}},[a("el-form-item",{staticStyle:{width:"40%","margin-right":"0px"},attrs:{label:"",prop:"deptNo",required:!0,"label-width":"70px"}},[a("img",{staticStyle:{width:"70%",display:"block",margin:"0 auto"},attrs:{src:"http://bpsoft.cn:9009/swps/UC/showImageInfo?fileId=70a130d8-4234-4294-80b8-6513572554bd"}})]),e._v(" "),a("div",{staticStyle:{width:"20%"}},[a("br"),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("div",{staticStyle:{width:"90%",margin:"0 auto"}},[a("el-progress",{attrs:{"text-inside":!0,"stroke-width":26,percentage:70}})],1)]),e._v(" "),a("el-form-item",{staticStyle:{width:"40%"},attrs:{label:"",prop:"deptName","label-width":"80px",required:!0}},[a("img",{staticStyle:{width:"70%",display:"block",margin:"0 auto"},attrs:{src:"http://bpsoft.cn:9009/swps/UC/showImageInfo?fileId=70a130d8-4234-4294-80b8-6513572554bd"}})])],1),e._v(" "),a("el-divider",{attrs:{"content-position":"left"}},[e._v("管理员摄像机[RX20]")]),e._v(" "),a("div",{staticClass:"item_content"},[a("el-form-item",{attrs:{label:"带入数量",prop:"deptNo","label-width":"120px"}},[a("span",[e._v("带入数量213")])]),e._v(" "),a("el-form-item",{attrs:{label:"带入状态",prop:"deptNo","label-width":"120px"}},[a("span",[e._v("带入状态123")])]),e._v(" "),a("el-form-item",{attrs:{label:"登记人",prop:"deptNo","label-width":"120px"}},[a("span",[e._v("登记人q2312")])]),e._v(" "),a("el-form-item",{attrs:{label:"登记时间",prop:"deptNo","label-width":"120px"}},[a("span",[e._v("登记时间sdfsf")])]),e._v(" "),a("el-form-item",{attrs:{label:"带入重量",prop:"deptNo","label-width":"120px"}},[a("span",[e._v("带入重量1231")])]),e._v(" "),a("el-form-item",{attrs:{label:"带出重量",prop:"deptNo","label-width":"120px"}},[a("span",[e._v("带出重量123")])]),e._v(" "),a("el-form-item",{attrs:{label:"AI对比结果",prop:"deptNo","label-width":"120px"}},[a("span",[e._v("AI对比结果sdffd")])]),e._v(" "),a("el-form-item",{attrs:{label:"AI对比是否通过",prop:"deptNo","label-width":"120px"}},[a("span",[e._v("AI对比是否通过wrr2r")])]),e._v(" "),a("el-form-item",{attrs:{label:"带出数量",prop:"deptNo","label-width":"120px"}},[a("span",[e._v("带出数量adwf")])]),e._v(" "),a("el-form-item",{attrs:{label:"复制到设备数\t",prop:"deptNo","label-width":"120px"}},[a("span",[e._v("复制到设备数sfsvd")])]),e._v(" "),a("el-form-item",{attrs:{label:"带出人",prop:"deptNo","label-width":"120px"}},[a("span",[e._v("带出人sdfdsf")])]),e._v(" "),a("el-form-item",{attrs:{label:"带出时间",prop:"deptNo","label-width":"120px"}},[a("span",[e._v("带出时间sdfsd")])]),e._v(" "),a("el-form-item",{attrs:{label:"带出数量",prop:"deptNo","label-width":"120px"}},[a("span",[e._v("带出数量")])])],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.addClick}},[e._v("退出区域")])],1)])],1)])},T=[],q={watch:{dialogVisible:function(e){var t=this;e?t.$nextTick((function(){var e=r()(window).height()-70;r()(".el-dialog").css("width","720px"),r()(".el-dialog").css("margin-top","60px"),r()(".el-dialog").css("max-height",e+"px"),r()(".el-dialog").css("overflow","hidden"),r()(".el-dialog__body").css("height",e-130+"px"),r()(".el-dialog__body").css("overflow-y","auto")})):(t.addForm={deptName:"",deptNo:"",deptDescription:"",deptAddress:"",parent:"",deptId:""},t.$refs["addForm"].resetFields())}},data:function(){return{dialogVisible:!1,labelPosition:"right",titel:"",addForm:{type:1,deptName:"",deptNo:"",deptDescription:"",deptAddress:"",parent:"",deptId:""},level:"",rules:{deptName:[{required:!0,message:"请输入电站编号",trigger:"blur"}],deptNo:[{required:!0,message:"请输入现场编号",trigger:"blur"}]}}},mounted:function(){},methods:{addClick:function(){var e=this,t=this;this.$refs["addForm"].validate((function(a){a?t.$emit("addClick",t.addForm):console.log(e.addForm)}))},closeClick:function(){var e=this;e.dialogVisible=!1},init:function(e,t){var a=this;a.dialogVisible=!0}}},$=q,j=(a("c6a2"),Object(h["a"])($,N,T,!1,null,"e25c543a",null)),z=j.exports,L=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"exititemsDetailsexe",attrs:{id:"exititemsDetailsexeTwo"}},[a("div",[a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"物品详情",visible:e.dialogVisible,"close-on-click-modal":!1,top:"5%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[1==e.exitForm.checkType?a("div",{staticClass:"header_img",staticStyle:{"text-align":"center"}},[a("div",{staticClass:"header_img_list"},[a("el-image",{staticStyle:{width:"200px",height:"200px"},attrs:{src:e.showImageFileId(e.exitForm.checkInPic),fit:e.fit}})],1),e._v(" "),a("div",{staticClass:"header_img_list",staticStyle:{width:"10%"}},[a("br"),a("br"),a("br"),a("br"),a("br"),e._v(" "),a("el-progress",{attrs:{"text-inside":!0,"stroke-width":14,percentage:e.setNull(e.exitForm.aiCompareResult),status:"success",format:e.format}})],1),e._v(" "),a("div",{staticClass:"header_img_list"},[a("el-image",{staticStyle:{width:"200px",height:"200px"},attrs:{src:e.showImageFileId(e.exitForm.checkOutPic),fit:e.fit}})],1)]):e._e(),e._v(" "),a("div",{staticStyle:{clear:"both"}},[a("div",{staticClass:"item_content"},[a("el-divider",{attrs:{"content-position":"left"}},[e._v(e._s(e.exitForm.name+"["+e.exitForm.code+"]"))]),e._v(" "),a("el-form",{ref:"exitForm",attrs:{size:"small",rules:e.rules,inline:!0,model:e.exitForm,"label-position":e.labelPosition}},[a("el-form-item",{attrs:{label:"带入数量","label-width":"130px"}},[a("el-input",{staticClass:"el-form-item_input",staticStyle:{width:"180px"},attrs:{disabled:""},model:{value:e.exitForm.checkInQuantity,callback:function(t){e.$set(e.exitForm,"checkInQuantity",t)},expression:"exitForm.checkInQuantity"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"工单号","label-width":"130px"}},[a("el-input",{staticClass:"el-form-item_input",staticStyle:{width:"180px"},attrs:{disabled:""},model:{value:e.exitForm.workOrderNo,callback:function(t){e.$set(e.exitForm,"workOrderNo",t)},expression:"exitForm.workOrderNo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"登记时间","label-width":"130px"}},[a("el-input",{staticClass:"el-form-item_input",staticStyle:{width:"180px"},attrs:{disabled:""},model:{value:e.exitForm.useDatetime,callback:function(t){e.$set(e.exitForm,"useDatetime",t)},expression:"exitForm.useDatetime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"登记人","label-width":"130px"}},[a("el-input",{staticClass:"el-form-item_input",staticStyle:{width:"180px"},attrs:{disabled:""},model:{value:e.exitForm.usePerson,callback:function(t){e.$set(e.exitForm,"usePerson",t)},expression:"exitForm.usePerson"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"带入重量","label-width":"130px"}},[a("el-input",{staticClass:"el-form-item_input",staticStyle:{width:"180px"},attrs:{disabled:""},model:{value:e.exitForm.checkInWeight,callback:function(t){e.$set(e.exitForm,"checkInWeight",t)},expression:"exitForm.checkInWeight"}})],1),e._v(" "),a("el-form-item",{staticStyle:{height:"35px"},attrs:{label:"带入状态","label-width":"130px"}},[a("el-checkbox-group",{staticStyle:{width:"250px","font-size":"12px"},model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}},e._l(e.componentStateList,(function(e){return a("el-checkbox",{key:e.id,staticStyle:{"font-size":"12px"},attrs:{disabled:"",label:e.constDesc}})})),1)],1),e._v(" "),1!=e.exitForm.checkType?a("el-form-item",{staticStyle:{width:"497px"},attrs:{label:"登记图片","label-width":"130px"}},[e.exitForm.checkInPic?a("span",[a("el-image",{staticStyle:{"margin-left":"19px",width:"50px",height:"50px",position:"relative",display:"inline-block"},attrs:{src:e.showImageFileId(e.exitForm.checkInPic),fit:"fill"}})],1):e._e()]):e._e(),e._v(" "),1!=e.exitForm.checkType?a("el-form-item",{attrs:{label:"AI对比是否通过","label-width":"130px"}},[a("el-switch",{attrs:{disabled:""},model:{value:e.isAiResult,callback:function(t){e.isAiResult=t},expression:"isAiResult"}})],1):e._e(),e._v(" "),1!=e.exitForm.checkType?a("el-form-item",{attrs:{label:"AI对比结果","label-width":"130px"}},[a("el-input",{staticClass:"el-form-item_input",staticStyle:{width:"160px"},attrs:{disabled:""},model:{value:e.exitForm.aiCompareResult,callback:function(t){e.$set(e.exitForm,"aiCompareResult",t)},expression:"exitForm.aiCompareResult"}})],1):e._e(),e._v(" "),a("el-form-item",{staticStyle:{height:"35px"},attrs:{label:"是否为异物事件","label-width":"130px"}},[a("el-switch",{attrs:{disabled:""},model:{value:e.isForeighEvent,callback:function(t){e.isForeighEvent=t},expression:"isForeighEvent"}})],1),e._v(" "),a("el-form-item",{staticStyle:{height:"35px"},attrs:{label:"是否为偏差量","label-width":"130px"}},[a("el-switch",{attrs:{disabled:""},model:{value:e.isDeviation,callback:function(t){e.isDeviation=t},expression:"isDeviation"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"偏差是否处理","label-width":"130px"}},[a("el-select",{staticClass:"el-form-item_input",staticStyle:{width:"180px"},attrs:{size:"small",placeholder:"请选择偏差是否处理"},model:{value:e.exitForm.isDeviationProcess,callback:function(t){e.$set(e.exitForm,"isDeviationProcess",t)},expression:"exitForm.isDeviationProcess"}},[a("el-option",{attrs:{label:"",value:""}}),e._v(" "),e._l(e.isDeviationProcessData,(function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"放行原因","label-width":"130px"}},[a("el-select",{staticClass:"el-form-item_input",staticStyle:{width:"180px"},attrs:{size:"small",placeholder:"请选择放行原因"},model:{value:e.exitForm.releaseReason,callback:function(t){e.$set(e.exitForm,"releaseReason",t)},expression:"exitForm.releaseReason"}},[a("el-option",{attrs:{label:"",value:""}}),e._v(" "),e._l(e.ReleaseReasonData,(function(e){return a("el-option",{key:e.id,attrs:{label:e.constDesc,value:e.constDesc}})}))],2)],1),e._v(" "),a("el-form-item",{attrs:{prop:"checkOutQuantity",label:"带出数量","label-width":"130px"}},[a("el-input",{staticClass:"el-form-item_input",staticStyle:{width:"180px"},attrs:{disabled:!e.isEdit,placeholder:"请输入带出数量"},model:{value:e.exitForm.checkOutQuantity,callback:function(t){e.$set(e.exitForm,"checkOutQuantity",t)},expression:"exitForm.checkOutQuantity"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"复制到设备数","label-width":"130px"}},[a("el-input",{staticClass:"el-form-item_input",staticStyle:{width:"180px"},attrs:{disabled:!e.isEdit,placeholder:"请输入复制到设备数"},model:{value:e.exitForm.useQuantity,callback:function(t){e.$set(e.exitForm,"useQuantity",t)},expression:"exitForm.useQuantity"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"带出重量","label-width":"130px"}},[a("el-input",{staticClass:"el-form-item_input",staticStyle:{width:"180px"},attrs:{disabled:!e.isEdit,placeholder:"请输入带出重量"},model:{value:e.exitForm.checkOutWeight,callback:function(t){e.$set(e.exitForm,"checkOutWeight",t)},expression:"exitForm.checkOutWeight"}})],1),e._v(" "),a("el-form-item",{ref:"returnPerson",attrs:{label:"带出人",prop:"returnPerson","label-width":"130px"}},[a("el-input",{staticClass:"el-form-item_input",staticStyle:{width:"180px"},attrs:{disabled:!e.isEdit,placeholder:"请选择"},nativeOn:{click:function(t){return e.staffSelectClick()}},model:{value:e.exitForm.returnPerson,callback:function(t){e.$set(e.exitForm,"returnPerson",t)},expression:"exitForm.returnPerson"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"带出时间",prop:"returnDatetime","label-width":"130px"}},[a("el-date-picker",{staticStyle:{width:"180px"},attrs:{disabled:!e.isEdit,type:"datetime",placeholder:"选择日期"},model:{value:e.exitForm.returnDatetime,callback:function(t){e.$set(e.exitForm,"returnDatetime",t)},expression:"exitForm.returnDatetime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"带出状态","label-width":"130px"}},[a("el-checkbox-group",{staticStyle:{width:"250px","font-size":"12px"},model:{value:e.checkOutList,callback:function(t){e.checkOutList=t},expression:"checkOutList"}},e._l(e.componentStateList,(function(t){return a("el-checkbox",{key:t.id,staticStyle:{"font-size":"12px"},attrs:{disabled:!e.isEdit,label:t.constDesc}})})),1)],1),e._v(" "),e.isEdit?a("el-form-item",{staticStyle:{width:"497px"},attrs:{label:"带出图片","label-width":"130px"}},[a("el-button",{staticStyle:{float:"left"},attrs:{type:"primary",size:"small"},on:{click:e.setImgClick}},[e._v("上传图片")]),e._v(" "),a("input",{staticStyle:{display:"none"},attrs:{type:"file",accept:"image/png, image/jpeg, image/gif, image/jpg",id:"file"},on:{change:function(t){return e.changepic(this)}}}),e._v(" "),e._l(e.fileData,(function(t){return a("div",{key:t.id,staticStyle:{float:"left"}},[a("a",{attrs:{href:"javascript:void(0);"},on:{click:function(a){return e.downloadClick(t)}}},[a("el-image",{staticStyle:{float:"right","padding-top":"10px","margin-left":"19px",width:"100px",height:"100px",position:"relative",display:"inline-block"},attrs:{src:e.showImageInfo+t.id}})],1),e._v(" "),e.isEdit?a("div",{staticStyle:{"margin-left":"60px",widht:"100px",color:"#409eff","font-size":"12px",cursor:"pointer"},on:{click:function(a){return e.deleteFileClick(t)}}},[e._v("删除")]):e._e()])}))],2):e._e(),e._v(" "),a("el-form-item",{staticStyle:{width:"628px"},attrs:{label:"备注","label-width":"130px"}},[a("el-input",{staticStyle:{width:"450px"},attrs:{disabled:!e.isEdit,type:"textarea",placeholder:"请输入备注"},model:{value:e.exitForm.remark,callback:function(t){e.$set(e.exitForm,"remark",t)},expression:"exitForm.remark"}})],1)],1)],1)]),e._v(" "),e.isEdit?a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.cancellationClick}},[e._v("注销")])],1):e._e()])],1),e._v(" "),a("StaffSelect",{ref:"staffSelect",on:{addStaffClick:e.addStaffClick}})],1)},A=[],E=(a("9a33"),a("f753"),{watch:{dialogVisible:function(e){var t,a=this;e?a.$nextTick((function(){var e=r()(window).height()-70;r()("#exititemsDetailsexeTwo").find(".el-dialog").css("width","850px"),r()("#exititemsDetailsexeTwo").find(".el-dialog").css("margin-top","60px"),r()("#exititemsDetailsexeTwo").find(".el-dialog").css("max-height",e+"px"),r()("#exititemsDetailsexeTwo").find(".el-dialog__body").css("max-height",e-120+"px"),r()("#exititemsDetailsexeTwo").find(".el-dialog__body").css("overflow-y","auto")})):a.exitForm=(t={id:"",checkInCompanyStationRangeId:"",repairWorkRangeManagerId:"",repairSequenceId:"",workOrderNo:"",componentId:"",code:"",name:"",unit:"",checkInQuantity:"",checkOutQuantity:"",checkOutWeight:"",usePerson:"",useIdCard:"",useDatetime:"",returnPerson:"",returnIdCard:"",returnDatetime:"",isComplete:"",remark:"",originalPic:"",useQuantity:"",checkInPic:"",checkOutPic:"",returnState:"",checkInState:"",aiComparePast:"",aiCompareResult:"",checkInEasyDlResult:"",checkInGroupType:"",checkInWeight:"",checkOutCompanyStationRangeId:"",checkOutEasyDlResult:"",checkOutGroupType:""},Object(l["a"])(t,"checkInState",""),Object(l["a"])(t,"createdOn",""),Object(l["a"])(t,"createdBy",""),Object(l["a"])(t,"updatedOn",""),Object(l["a"])(t,"updatedBy",""),Object(l["a"])(t,"registType",""),Object(l["a"])(t,"isDeviation",""),Object(l["a"])(t,"isForeighEvent",""),Object(l["a"])(t,"isDeviationProcess",""),Object(l["a"])(t,"releaseReason",""),Object(l["a"])(t,"rangeCode",""),Object(l["a"])(t,"rangeName",""),Object(l["a"])(t,"repairSequenceCode",""),Object(l["a"])(t,"repairSequenceName",""),Object(l["a"])(t,"tableIndex",-1),t)}},data:function(){var e;return{checkList:[],checkOutList:[],ReleaseReasonData:[],fileData:[],isEdit:!0,isDeviationProcessData:[{code:"Y",name:"是"},{code:"N",name:"否"}],showImageInfo:c["a"].showImageInfo,dialogVisible:!1,labelPosition:"right",isAiResult:!1,isForeighEvent:!1,isDeviation:!1,exitForm:(e={id:"",checkInCompanyStationRangeId:"",repairWorkRangeManagerId:"",repairSequenceId:"",workOrderNo:"",componentId:"",code:"",name:"",unit:"",checkInQuantity:"",checkOutQuantity:"",checkOutWeight:"",usePerson:"",useIdCard:"",useDatetime:"",returnPerson:"",returnIdCard:"",returnDatetime:"",isComplete:"",remark:"",originalPic:"",useQuantity:"",checkInPic:"",checkOutPic:"",returnState:"",checkInState:"",aiComparePast:"",aiCompareResult:"",checkInEasyDlResult:"",checkInGroupType:"",checkInWeight:"",checkOutCompanyStationRangeId:"",checkOutEasyDlResult:"",checkOutGroupType:""},Object(l["a"])(e,"checkInState",""),Object(l["a"])(e,"createdOn",""),Object(l["a"])(e,"createdBy",""),Object(l["a"])(e,"updatedOn",""),Object(l["a"])(e,"updatedBy",""),Object(l["a"])(e,"registType",""),Object(l["a"])(e,"isDeviation",""),Object(l["a"])(e,"isForeighEvent",""),Object(l["a"])(e,"isDeviationProcess",""),Object(l["a"])(e,"releaseReason",""),Object(l["a"])(e,"rangeCode",""),Object(l["a"])(e,"rangeName",""),Object(l["a"])(e,"repairSequenceCode",""),Object(l["a"])(e,"repairSequenceName",""),Object(l["a"])(e,"tableIndex",-1),e),componentStateList:[],level:"",rules:{returnPerson:[{required:!0,message:"请选择带出人",trigger:"blur"}],checkOutQuantity:[{required:!0,message:"请选择带出数量",trigger:"blur"}],returnDatetime:[{required:!0,message:"请选择带出时间",trigger:"change"}]}}},mounted:function(){var e=this;e.getComponentState(),e.getReleaseReasonData()},components:{StaffSelect:C["a"]},methods:{format:function(e){return"".concat(e)},showImageFileId:function(e){return"/fme/UC/showImageInfo?fileId="+e},setNull:function(e){var t=0;return t=null==e?0:e,t},staffSelectClick:function(){var e=this;e.$refs["staffSelect"].init({deptNos:"",selectedUser:e.exitForm.returnPerson},"0")},addStaffClick:function(e){var t=this;if(e.length>0){var a=e[0];t.exitForm.returnPerson=a.displayName,t.exitForm.returnIdCard=a.idCard,t.$refs["returnPerson"].clearValidate(),t.$forceUpdate()}else t.exitForm.usePerson="",t.exitForm.useIdCard="";t.$refs["staffSelect"].closeClick()},getFileList:function(e){var t=this;Object(s["a"])({url:c["a"].getFileInfo,method:"get",params:{businessid:t.exitForm.id,businessType:e}}).then((function(e){200==e.code&&(t.fileData=[],t.fileData.push(e.result[e.result.length-1]))}))},cancellationClick:function(){var e=this;this.$refs["exitForm"].validate((function(t){if(t){var a=!0;if("Y"==e.exitForm.isDeviationProcess&&(null!=e.exitForm.releaseReason&&0!=e.exitForm.releaseReason.length||(a=!1)),a){null!=e.checkOutList&&e.checkOutList.length>0&&(e.exitForm.returnState=e.checkOutList.join(","));var i={id:e.exitForm.id,checkOutWeight:e.exitForm.checkOutWeight,checkOutQuantity:e.exitForm.checkOutQuantity,checkOutPic:e.exitForm.checkOutPic,useQuantity:e.exitForm.useQuantity,returnDatetime:new Date(e.exitForm.returnDatetime).getTime(),returnPerson:e.exitForm.returnPerson,returnIdCard:e.exitForm.returnIdCard,returnState:e.exitForm.returnState,isDeviationProcess:e.exitForm.isDeviationProcess,isDeviation:e.exitForm.isDeviation,releaseReason:e.exitForm.releaseReason,checkOutCompanyStationRangeId:e.exitForm.checkOutCompanyStationRangeId,checkOutGroupType:e.exitForm.checkInGroupType,remark:e.exitForm.remark},n=!0,l=parseInt(e.exitForm.checkOutQuantity);null!=e.exitForm.useQuantity&&(l+=parseInt(e.exitForm.useQuantity)),parseInt(e.exitForm.checkInQuantity)!=l&&(n=!1),n?Object(s["a"])({url:c["a"].returnComponentDetails,method:"post",data:i}).then((function(t){e.$emit("cancellationClick",e.exitForm),e.dialogVisible=!1})):e.$confirm("带出数量与登记数量不匹配，是否标记偏差量？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){i.isDeviation="Y",Object(s["a"])({url:c["a"].returnComponentDetails,method:"post",data:i}).then((function(t){e.$emit("cancellationClick",e.exitForm),e.dialogVisible=!1}))})).catch((function(){}))}else e.$message({type:"info",message:"请选择放行原因"})}else;}))},closeClick:function(){var e=this;e.dialogVisible=!1},init:function(e,t){var a=this;a.isEdit=t,a.dialogVisible=!0,a.exitForm=e,a.exitForm.checkInState&&(a.checkList=a.exitForm.checkInState.split(",")),a.exitForm.returnState&&(a.checkOutList=a.exitForm.returnState.split(",")),null!=a.exitForm.checkOutQuantity&&0!=a.exitForm.checkOutQuantity||(a.exitForm.checkOutQuantity=1,a.exitForm.returnDatetime=(new Date).getTime()),"Y"==a.exitForm.aiComparePast&&(a.isAiResult=!0),"Y"==a.exitForm.isForeighEvent&&(a.isForeighEvent=!0),"Y"==a.exitForm.isDeviation&&(a.isDeviation=!0)},getReleaseReasonData:function(){var e=this;Object(s["a"])({url:c["a"].getConstRecByTypeInfo,method:"get",params:{type:"ReleaseReason"}}).then((function(t){200==t.code&&(e.ReleaseReasonData=t.result)}))},getComponentState:function(){var e=this;Object(s["a"])({url:c["a"].getConstRecByTypeInfo,method:"get",params:{type:"ComponentState"}}).then((function(t){200==t.code&&(e.componentStateList=t.result)}))},deleteFileClick:function(e){var t=this;Object(s["a"])({url:c["a"].deleteFile,method:"get",params:{fileID:e.id}}).then((function(e){200==e.code?(t.$message({type:"success",message:"删除成功!"}),t.fileData=[]):t.$message({type:"info",message:e.message})}))},setImgClick:function(){r()("#file").trigger("click")},changepic:function(){var e=this,t=new FileReader,a=document.getElementById("file").files[0];t.readAsDataURL(a);var i=new FormData;i.append("file",document.getElementById("file").files[0]);JSON.parse(sessionStorage.userInfo)["toKey"];i.append("SubType","CheckOut"),i.append("BusinessID",e.exitForm.id),console.log(e.exitForm.id),r.a.ajax({url:c["a"].uploadFile,type:"POST",data:i,headers:{"X-CSRFToken":JSON.parse(sessionStorage.userInfo)["toKey"]},processData:!1,contentType:!1,beforeSend:function(){},success:function(t){e.getFileList("CheckOut"),e.exitForm.checkOutPic=t.result.id},error:function(e){console.log(e)}}),t.onload=function(e){}}}}),W=E,B=(a("cfa2"),Object(h["a"])(W,L,A,!1,null,"e57ecd4c",null)),M=B.exports,V=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"exititemsDetailsexe",attrs:{id:"exititemsDetailsexeOne"}},[i("div",[i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"物品详情1",visible:e.dialogVisible,"close-on-click-modal":!1,top:"5%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("div",[i("el-form",{ref:"addForm",attrs:{size:"small",model:e.addForm,rules:e.rules,"label-position":e.labelPosition}},[i("div",{staticClass:"item_content"},[i("el-divider",{attrs:{"content-position":"left"}},[e._v(e._s(e.componentName))]),e._v(" "),i("el-form-item",{attrs:{label:"带入数量",prop:"checkInQuantity","label-width":"80px"}},[i("el-input",{staticClass:"el-form-item_input",staticStyle:{width:"200px"},attrs:{placeholder:"请输入带入数量"},model:{value:e.addForm.checkInQuantity,callback:function(t){e.$set(e.addForm,"checkInQuantity",t)},expression:"addForm.checkInQuantity"}})],1),e._v(" "),i("el-form-item",{ref:"usePerson",attrs:{label:"登记人",prop:"usePerson","label-width":"80px"}},[i("el-input",{staticClass:"el-form-item_input",staticStyle:{width:"200px"},attrs:{placeholder:"请选择登记人"},nativeOn:{click:function(t){return e.staffSelectClick()}},model:{value:e.addForm.usePerson,callback:function(t){e.$set(e.addForm,"usePerson",t)},expression:"addForm.usePerson"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"登记时间",prop:"useDatetime","label-width":"80px"}},[i("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"datetime",placeholder:"请选择登记时间"},model:{value:e.addForm.useDatetime,callback:function(t){e.$set(e.addForm,"useDatetime",t)},expression:"addForm.useDatetime"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"工单号",prop:"workOrderNo","label-width":"80px"}},[i("el-input",{staticClass:"el-form-item_input",staticStyle:{width:"200px"},attrs:{placeholder:"请输入工单号"},model:{value:e.addForm.workOrderNo,callback:function(t){e.$set(e.addForm,"workOrderNo",t)},expression:"addForm.workOrderNo"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"带入重量","label-width":"80px"}},[i("el-input",{staticClass:"el-form-item_input",staticStyle:{width:"200px"},attrs:{placeholder:"请输入带入数量"},model:{value:e.addForm.checkInWeight,callback:function(t){e.$set(e.addForm,"checkInWeight",t)},expression:"addForm.checkInWeight"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"带入状态","label-width":"80px"}},[i("el-checkbox-group",{staticStyle:{width:"250px"},model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}},e._l(e.componentStateList,(function(e){return i("el-checkbox",{key:e.id,attrs:{label:e.constDesc}})})),1)],1),e._v(" "),i("el-form-item",{staticStyle:{width:"497px",padding:"10px 0"},attrs:{label:"图片","label-width":"80px"}},[i("input",{staticStyle:{display:"none"},attrs:{type:"file",accept:"image/png, image/jpeg, image/gif, image/jpg",id:"file"},on:{change:function(t){return e.changepic(this)}}}),e._v(" "),i("div",{staticClass:"fjcontent",staticStyle:{float:"left","margin-right":"30px"}},e._l(e.fileData,(function(t){return i("div",{key:t.id,staticClass:"fjlist",staticStyle:{"min-width":"120px"}},["png"==t.type||"jpeg"==t.type||"gif"==t.type||"jpg"==t.type?i("div",{staticClass:"fjlistconent"},[i("img",{staticClass:"flclose",attrs:{src:a("a267")},on:{click:function(a){return e.deleteFileClick(t)}}}),e._v(" "),i("div",{on:{click:function(a){return e.downloadClick(t)}}},[i("img",{staticClass:"fjimg",attrs:{src:e.showImageInfo+t.id}})]),e._v(" "),i("div",{staticClass:"fjname"},[e._v("\n                      "+e._s(t.name)+"\n                    ")])]):e._e()])})),0),e._v(" "),i("el-button",{staticStyle:{float:"left"},attrs:{type:"primary",size:"small"},on:{click:e.setImgClick}},[e._v("上传图片")])],1),e._v(" "),i("el-form-item",{staticStyle:{width:"628px"},attrs:{label:"备注",prop:"remark","label-width":"80px"}},[i("el-input",{staticStyle:{width:"628px"},attrs:{type:"textarea",placeholder:"请输入备注"},model:{value:e.addForm.remark,callback:function(t){e.$set(e.addForm,"remark",t)},expression:"addForm.remark"}})],1)],1)])],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.addClick}},[e._v("物品登记")])],1)])],1),e._v(" "),i("StaffSelect",{ref:"staffSelect",on:{addStaffClick:e.addStaffClick}})],1)},U=[],Q={watch:{dialogVisible:function(e){var t=this;e?t.$nextTick((function(){var e=r()(window).height()-70;r()("#exititemsDetailsexeOne").find(".el-dialog").css("width","780px"),r()("#exititemsDetailsexeOne").find(".el-dialog").css("margin-top","60px"),r()("#exititemsDetailsexeOne").find(".el-dialog").css("max-height",e-150+"px"),r()("#exititemsDetailsexeOne").find(".el-dialog").css("overflow","hidden"),r()("#exititemsDetailsexeOne").find(".el-dialog__body").css("max-height",e-280+"px").css("overflow-y","auto")})):(t.componentName="",t.addForm={checkInQuantity:1,usePerson:"",id:"",code:"",name:"",unit:"",repairWorkRangeManagerId:"",stationRangeGroupId:"",stationRangeGroupName:"",repairSequenceId:"",workOrderNo:"",componentId:"",useDatetime:"",checkInCompanyStationRangeId:"",checkInGroupType:"",useIdCard:"",checkInState:"",checkInPic:"",isComplete:"",checkInWeight:""},t.$refs["addForm"].resetFields())}},data:function(){var e;return{checkList:[],dialogVisible:!1,labelPosition:"right",showImageInfo:c["a"].showImageInfo,downloadFileInfo:c["a"].downloadFileInfo,fileData:[],componentStateList:[],addForm:(e={checkInQuantity:1,usePerson:"",id:"",code:"",name:"",unit:"",repairWorkRangeManagerId:"",stationRangeGroupId:"",stationRangeGroupName:"",repairSequenceId:"",workOrderNo:"",componentId:"",useDatetime:"",checkInCompanyStationRangeId:"",checkInGroupType:"",useIdCard:"",checkInState:"",checkInPic:"",isComplete:"",checkInWeight:""},Object(l["a"])(e,"workOrderNo",""),Object(l["a"])(e,"tableIndex",-1),e),componentName:"",level:"",rules:{checkInQuantity:[{required:!0,message:"请输入登记数量",trigger:"blur"}],usePerson:[{required:!0,message:"请输入登记人",trigger:"blur"}],useDatetime:[{required:!0,message:"请输入登记时间",trigger:"blur"}]}}},mounted:function(){},components:{StaffSelect:C["a"]},methods:{downloadClick:function(e){var t=document.createElement("a");t.href=c["a"].serverUrl()+"/fme/UC/downloadFileInfo?fileID="+e.id,document.body.appendChild(t),t.click()},getComponentState:function(){var e=this;Object(s["a"])({url:c["a"].getConstRecByTypeInfo,method:"get",params:{type:"ComponentState"}}).then((function(t){200==t.code&&(e.componentStateList=t.result)}))},addStaffClick:function(e){var t=this;if(e.length>0){var a=e[0];t.addForm.usePerson=a.displayName,t.addForm.useIdCard=a.idCard,t.$refs["usePerson"].clearValidate()}else t.addForm.usePerson="",t.addForm.useIdCard="";t.$forceUpdate(),t.$refs["staffSelect"].closeClick()},staffSelectClick:function(){var e=this;e.$refs["staffSelect"].init({deptNos:"",selectedUser:e.addForm.usePerson},"0")},addClick:function(){var e=this;this.$refs["addForm"].validate((function(t){t&&(null!=e.checkList&&e.checkList.length>0&&(e.addForm.checkInState=e.checkList.join(",")),e.$emit("addDetailClick",e.addForm))}))},getFileList:function(e){var t=this;Object(s["a"])({url:c["a"].getFileInfo,method:"get",params:{businessid:t.addForm.id,businessType:e}}).then((function(e){200==e.code&&(t.fileData=e.result)}))},deleteFileClick:function(e){var t=this;Object(s["a"])({url:c["a"].deleteFile,method:"get",params:{fileID:e.id}}).then((function(a){200==a.code?(t.$message({type:"success",message:"删除成功!"}),t.getFileList(e.businessType)):t.$message({type:"info",message:a.message})}))},setImgClick:function(){var e=this;e.fileData.length>0?this.$message({message:"请删除图片后再选择图片",type:"warning"}):0==e.fileData.length&&r()("#file").trigger("click")},changepic:function(){var e=this,t=new FileReader,a=document.getElementById("file").files[0];t.readAsDataURL(a);var i=new FormData;i.append("file",document.getElementById("file").files[0]);JSON.parse(sessionStorage.userInfo)["toKey"];i.append("SubType","CheckIn"),i.append("BusinessID",e.addForm.id),r.a.ajax({url:c["a"].uploadFile,type:"POST",data:i,headers:{"X-CSRFToken":JSON.parse(sessionStorage.userInfo)["toKey"]},processData:!1,contentType:!1,beforeSend:function(){},success:function(t){e.getFileList("CheckIn"),e.addForm.checkInPic=t.result.id},error:function(e){console.log(e)}}),t.onload=function(e){}},closeClick:function(){var e=this;e.dialogVisible=!1},init:function(e,t,a){var i=this;i.getComponentState(),i.addForm.tableIndex=e.tableIndex,i.componentName=e.name+"["+e.code+"]",a?(i.addForm=e,null!=e.checkInState&&e.checkInState.length>0&&(i.checkList=e.checkInState.split(",")),i.getFileList("CheckIn")):(i.addForm.code=e.code,i.addForm.name=e.name,i.addForm.unit=e.unit,i.addForm.componentId=e.id,i.addForm.checkInCompanyStationRangeId=t.checkInCompanyStationRangeId,i.addForm.checkInGroupType=t.checkInGroupType,i.addForm.repairWorkRangeManagerId=t.repairWorkRangeManagerId,i.addForm.repairSequenceId=t.repairSequenceId,i.addForm.stationRangeGroupId=t.stationRangeGroupId,i.addForm.stationRangeGroupName=t.stationRangeGroupName,i.addForm.id=d["a"].getUUid(),i.addForm.workOrderNo=t.workOrderNo,i.addForm.usePerson=t.checkPerson,i.addForm.useIdCard=t.idCard,i.addForm.useDatetime=new Date),i.dialogVisible=!0}}},G=Q,Y=(a("8593"),Object(h["a"])(G,V,U,!1,null,"719bdb2e",null)),H=Y.exports,J=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"area"},[a("el-dialog",{attrs:{title:"未带出物品管理",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",[a("el-form",{ref:"searchForm",attrs:{model:e.form,inline:!0}},[a("el-form-item",{attrs:{label:"物品信息"}},[a("el-input",{staticClass:"el-form-item_input",staticStyle:{width:"150px"},attrs:{size:"small",placeholder:"请输入物品信息"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"登记人"}},[a("el-input",{staticClass:"el-form-item_input",staticStyle:{width:"150px"},attrs:{size:"small",placeholder:"请输入登记人"},model:{value:e.form.createdBy,callback:function(t){e.$set(e.form,"createdBy",t)},expression:"form.createdBy"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:function(t){return e.getDataList()}}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"info",size:"small",icon:"el-icon-refresh-right"},on:{click:function(t){return e.resetGetDataList()}}},[e._v("重置")])],1),e._v(" "),a("el-form-item")],1)],1),e._v(" "),a("div",{staticStyle:{height:"calc(100vh - 170px)"},attrs:{id:"table_content"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{"font-size":"12px"},attrs:{data:e.tableData,border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"物项",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v("\n                          "+e._s(t.row.name+"["+t.row.code+"]")+"\n                        ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"repairSequenceName",align:"center",label:"大修轮次"}}),e._v(" "),a("el-table-column",{attrs:{prop:"rangeName",align:"center",label:"工作区域"}}),e._v(" "),a("el-table-column",{attrs:{prop:"checkInQuantity",align:"center",label:"登记数量"}}),e._v(" "),a("el-table-column",{attrs:{prop:"usePerson",label:"登记人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"checkInPic",label:"登记图片",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{"text-align":"center",display:"table-cell","vertical-align":"middle"}},[t.row.checkInPic?a("img",{staticStyle:{width:"50%",display:"block",margin:"0 auto"},attrs:{src:e.showImageFileId(t.row.checkInPic)}}):e._e()])]}}])})],1),e._v(" "),a("div",{staticStyle:{"margin-top":"10px"}},e._l(e.multipleSelection,(function(t,i){return a("el-tag",{key:i,staticStyle:{"margin-right":"10px"},attrs:{closable:"","disable-transitions":!1},on:{close:function(a){return e.handleClose(t,i)}}},[e._v(e._s(t.name)+"["+e._s(t.code)+"]")])})),1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.referenceClick}},[e._v("确认标记偏差")])],1)])],1)},K=[],X=(a("6d57"),{data:function(){return{multipleSelection:[],dialogVisible:!1,initData:null,tableData:[],loading:!1,form:{repairWorkRangeManagerId:"",repairSequenceId:"",name:"",createdBy:"",isDeviation:"Y",PageSize:1e3,PageIndex:1}}},watch:{dialogVisible:function(e){var t=this;e&&t.$nextTick((function(){var e=r()(window).height()-90;r()(".el-dialog").css("width","720px"),r()(".el-dialog").css("margin-top","60px"),r()(".el-dialog").css("max-height",e+"px"),r()(".el-dialog").css("overflow","hidden"),r()(".el-dialog__body").css("max-height",e-110+"px")}))}},methods:{referenceClick:function(){var e=this;if(0==e.multipleSelection.length)return e.$message.error("请选择物品"),!1;for(var t=[],a=0;a<e.multipleSelection.length;a++)t.push({companyStationRangeId:e.multipleSelection[a].checkInCompanyStationRangeId,repairSequenceId:e.multipleSelection[a].repairSequenceId,eventPerson:e.multipleSelection[a].usePerson,repairWorkRangeManagerId:e.multipleSelection[a].repairWorkRangeManagerId,componentUerDetails:e.multipleSelection[a].id});Object(s["a"])({url:c["a"].batchDeviationLog,method:"post",data:{logList:t}}).then((function(t){e.$emit("checkOutComponentClick"),e.dialogVisible=!1}))},showImageFileId:function(e){return"/fme/UC/showImageInfo?fileId="+e},handleClose:function(e,t){var a=this;a.multipleSelection.splice(e,1),a.multipleSelection.length>0?a.multipleSelection.forEach((function(e){a.$refs.multipleTable.toggleRowSelection(e)})):a.$refs.multipleTable.clearSelection()},handleSelectionChange:function(e){var t=this;t.multipleSelection=e},init:function(e){var t=this;t.dialogVisible=!0,t.initData=e,t.form.repairSequenceId=e.repairSequenceId,t.form.repairWorkRangeManagerId=e.repairWorkRangeManagerId,t.getDataList()},resetGetDataList:function(){var e=this;e.form.name="",e.form.createdBy="",e.getDataList()},getDataList:function(){var e=this;e.loading=!0,Object(s["a"])({url:c["a"].personComponentRecord,method:"post",data:e.form}).then((function(t){e.loading=!1,e.tableData=t.rows}))}}}),Z=X,ee=Object(h["a"])(Z,J,K,!1,null,"be1f8056",null),te=ee.exports,ae=(a("a18c"),{name:"Access",data:function(){return{tableHeader:0,tableWpData:[],getDataForm:{repairWorkRangeManagerId:"",repairSequenceId:"",checkPerson:"",name:"",planStartDatetime:"",planEndDatetime:"",personType:"",checkOutPic:""},PageIndex:0,total:1,wptotal:1,wpSize:50,wpPageIndex:1,size:50,companyData:[],stataionData:[],sequenceData:[],leftForm:{companyId:"",stationId:"",repairWorkRangeManagerId:"",sequenceId:""},activeName:"first",planTime:"",currentRow:null,searchForm:{startDate:"",endData:"",checked:!1,checkedNo:!1},areaList:[],labelPosition:"right",tableData1:[],initState:"f"}},components:{AddToolPage:v,manForm:D,addPage:R,itemsDetails:z,exititemsDetails:M,editorsDetails:H,checkOutComponent:te},mounted:function(){var e=this;if(r()(".hamburger-close").show(),e.getCompanyData(),e.setHeight(),d["a"].getCookie("accessdata")&&void 0!=d["a"].getCookie("accessdata")&&""!=d["a"].getCookie("accessdata")&&"undefined"!=d["a"].getCookie("accessdata")){var t=JSON.parse(d["a"].getCookie("accessdata"));t.companyId&&(e.leftForm.companyId=t.companyId,e.getInitStataionData(t.companyId)),t.companyStationConfigId&&(e.leftForm.companyStationConfigId=t.companyStationConfigId,e.getInitRepairSequenceData(t.companyStationConfigId,t.sequenceId))}else{t={};d["a"].setCookie("accessdata",JSON.stringify(t)),e.getDataList(-1),e.getWpDataList()}},methods:Object(l["a"])({initSequenceDataFn:function(e){},getInitStataionData:function(e){var t=this;Object(s["a"])({url:c["a"].getStationUnitInfo,method:"get",params:{parent:e,unitlevel:"Plant"}}).then((function(e){t.stataionData=e.result}))},checkOutClick:function(){var e=this,t={repairWorkRangeManagerId:e.getDataForm.repairWorkRangeManagerId,repairSequenceId:e.getDataForm.repairSequenceId};e.$refs["checkOutComponent"].init(t)},checkOutComponentClick:function(){this.getDataList(-1)},getInitRepairSequenceData:function(e,t){var a=this;a.leftForm.sequenceId=t,Object(s["a"])({url:c["a"].getRepairSequenceInfo,method:"get",params:{companyId:e,subId:0}}).then((function(e){a.sequenceData=e.result;var i="";if(t)for(var n=0;n<a.sequenceData.length;n++)a.sequenceData[n].id==t&&(i=d["a"].getTime(a.sequenceData[n].planStartDate).substring(0,10)+" 至 "+d["a"].getTime(a.sequenceData[n].planEndDate).substring(0,10));a.planTime=i,a.getRepairWorkRangeBySequenceIdData()}))},setHeight:function(){var e=this;e.$nextTick((function(){var t=document.getElementById("table_content"),a=t.offsetHeight;e.tableHeader=a}))},checkOutCnt:function(e){var t=parseInt(e.checkOutQuantity)+parseInt(e.usedQuantity);return t},handleSizeChange:function(e){var t=this;t.size=e,t.getDataList(-1)},handleCurrentChange:function(e){var t=this;t.PageIndex=e,t.getDataList(-1)},handleWpSizeChange:function(e){var t=this;t.wpSize=e,t.getWpDataList()},handleWpCurrentChange:function(e){var t=this;t.wpPageIndex=e,t.getWpDataList()},resetGetDataList:function(){var e=this;e.getDataForm.checkPerson="",e.getDataForm.planStartDatetime="",e.getDataForm.planEndDatetime="",e.getDataForm.name="",e.getDataList(-1)},showImageFileId:function(e){return"/fme/UC/showImageInfo?fileId="+e},getDataList:function(e){var t=this,a=t.getDataForm;null!=a.planStartDatetime&&(a.planStartDatetime=new Date(a.planStartDatetime).getTime()),null!=a.planEndDatetime&&(a.planEndDatetime=new Date(a.planEndDatetime).getTime()),a.PageSize=t.size,a.PageIndex=t.PageIndex,Object(s["a"])({url:c["a"].queryAccessRecord,method:"post",data:a}).then((function(a){var i=a.rows;if(null!=i){t.total=parseInt(a.records);for(var n=0;n<i.length;n++)i[n]["tableData"]=[],i[n]["index"]=n+1,i[n]["checkInDatetime"]=d["a"].getTime(i[n]["checkInDatetime"]).substring(0,10),i[n]["checkOutDatetime"]&&(i[n]["checkOutDatetime"]=d["a"].getTime(i[n]["checkOutDatetime"]).substring(0,10)),i[n]["createdOn"]=d["a"].getTime(i[n]["createdOn"]).substring(0,10);t.tableData1=i}t.$nextTick((function(){r()(".el-table__expand-icon").unbind("click"),r()(".el-table__expand-icon").click((function(){var e=r()(".el-table__expand-icon").index(r()(this));r()(".el-table__expand-icon").parent().parent().parent().hasClass("expanded")&&t.refreshChileData(e)})),e>-1&&(r()(".el-table__row").eq(e).addClass("expanded"),r()(".el-table__expand-icon").eq(e).click())}))}))},refreshChileData:function(e){var t=this,a=t.tableData1[e],i={repairWorkRangeManagerId:a.repairWorkRangeManagerId,repairSequenceId:a.repairSequenceId,useIdCard:a.idCard,checkInPerson:a.checkPerson,createdBy:"",isComplete:""};t.getChildData(e,i)},getChildData:function(e,t){var a=this,i=t;i.PageSize=1e4,i.PageIndex=1,Object(s["a"])({url:c["a"].personComponentRecord,method:"post",data:i}).then((function(t){for(var i=t.rows,n=0;n<i.length;n++)i[n]["index"]=n+1,i[n]["tableIndex"]=e,i[n]["useDatetime"]&&(i[n]["useDatetime"]=d["a"].getTime(i[n]["useDatetime"]).substring(0,10));a.tableData1[e].tableData=i,a.setHeight()}))},areaClick:function(e){var t=this;t.getDataForm.repairWorkRangeManagerId=e,t.leftForm.repairWorkRangeManagerId=e,t.getDataList(-1),t.getWpDataList()},getWpDataList:function(){var e=this,t=e.getDataForm;null!=t.planStartDatetime&&(t.planStartDatetime=new Date(t.planStartDatetime).getTime()),null!=t.planEndDatetime&&(t.planEndDatetime=new Date(t.planEndDatetime).getTime()),t.PageSize=e.wpSize,t.PageIndex=e.wpPageIndex,Object(s["a"])({url:c["a"].personComponentRecord,method:"post",data:t}).then((function(t){e.tableWpData=t.rows,e.wptotal=parseInt(t.records)}))},handlExit:function(e,t,a,i){var n=this,l=t;i&&(l.checkType=1),n.$refs["exititemsDetails"].init(l,a)},handleComponentDelete:function(e,t){var a=this;a.$confirm("确定删除物品信息？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["a"])({url:c["a"].deleteBpComponentDetails,method:"post",data:{id:t.id,repairWorkRangeManagerId:t.repairWorkRangeManagerId,repairSequenceId:t.repairSequenceId}}).then((function(e){"200"==e.code?(a.$message({type:"success",message:"删除成功!"}),a.getDataList(t.tableIndex)):a.$message({type:"info",message:e.message})}))})).catch((function(){}))},indexHandleEdit:function(e,t){var a=this;t.tableIndex=e,a.$refs["AddToolPage"].init(t)},choseItmeClick:function(e){var t=this;t.$refs["editorsDetails"].init(e.key,e.val,!1)},editComponent:function(e,t){var a=this;a.$refs["editorsDetails"].init(t,null,!0)},cancellationClick:function(e){var t=this;t.getDataList(e.tableIndex)},addDetailClick:function(e){var t=this,a={code:e.code,name:e.name,unit:e.unit,componentId:e.id,checkInGroupType:e.checkInGroupType,repairWorkRangeManagerId:e.repairWorkRangeManagerId,checkInCompanyStationRangeId:e.checkInCompanyStationRangeId,repairSequenceId:e.repairSequenceId,stationRangeGroupId:e.stationRangeGroupId,stationRangeGroupName:e.stationRangeGroupName,id:e.id,checkInState:e.checkInState,checkInQuantity:e.checkInQuantity,workOrderNo:e.workOrderNo,checkInWeight:e.checkInWeight,checkInPic:e.checkInPic,usePerson:e.usePerson,useIdCard:e.useIdCard,useDatetime:new Date(e.useDatetime).getTime()};Object(s["a"])({url:c["a"].saveBpComponentDetails,method:"post",data:a}).then((function(a){"200"==a.code&&(t.$message({type:"success",message:"保存成功!"}),t.$refs["editorsDetails"].closeClick(),t.getDataList(e.tableIndex))}))},addClick:function(e){var t=this,a={id:e.id,checkInDatetime:new Date(e.checkInDatetime).getTime(),remark:e.remark,magneticCardId:e.magneticCardId,repairSequenceId:e.repairSequenceId,checkInPic:e.checkInPic,checkPerson:e.checkPerson,checkInGroupType:e.checkInGroupType,repairWorkRangeManagerId:e.repairWorkRangeManagerId,personType:e.personType,workOrderNo:e.workOrderNo,checkOutPic:e.checkOutPic,checkInCompanyStationRangeId:e.checkInCompanyStationRangeId,idCard:e.idCard};null!=e.checkOutDatetime&&(a.checkOutDatetime=new Date(e.checkOutDatetime).getTime()),Object(s["a"])({url:c["a"].saveBpWorkOrderPersonRecord,method:"post",data:a}).then((function(e){"200"==e.code&&(t.$message({type:"success",message:"保存成功!"}),t.$refs["addpage"].closeClick(),t.getDataList(-1))}))},addListClick:function(){var e=this;e.postType="add";var t={id:d["a"].getUUid(),createdBy:JSON.parse(sessionStorage.userInfo)["displayName"],companyId:e.leftForm.companyId,stationId:e.leftForm.stationId,repairWorkRangeManagerId:e.leftForm.repairWorkRangeManagerId,repairSequenceId:e.leftForm.sequenceId};e.$refs["addpage"].init(t,!1)},editPersonClick:function(e,t){var a=this;a.postType="edit",a.$refs["addpage"].init(t,!0)},getRepairWorkRangeBySequenceIdData:function(){var e=this;e.leftForm.repairWorkRangeManagerId="";var t={repairsequenceid:e.leftForm.sequenceId};Object(s["a"])({url:c["a"].getWorkRangeBySequence,method:"get",params:t}).then((function(t){e.areaList=t.result,e.getDataForm.repairSequenceId=e.leftForm.sequenceId,e.areaList.length>0&&(e.getDataForm.repairWorkRangeManagerId=e.areaList[0].id),e.getDataList(),e.getWpDataList()}))},sequenceDataFn:function(e){for(var t=this,a="",i=0;i<t.sequenceData.length;i++)t.sequenceData[i].id==e&&(a=d["a"].getTime(t.sequenceData[i].planStartDate).substring(0,10)+" 至 "+d["a"].getTime(t.sequenceData[i].planEndDate).substring(0,10));t.getDataForm.repairSequenceId=e;var n=JSON.parse(d["a"].getCookie("accessdata"));n.sequenceId=e,d["a"].setCookie("accessdata",JSON.stringify(n)),t.planTime=a,t.getRepairWorkRangeBySequenceIdData()},getStataionData:function(e){var t=this;t.leftForm.repairWorkRangeManagerId="",t.leftForm.sequenceId="",t.leftForm.stationId="",t.sequenceData=[],t.stataionData=[],t.areaList=[],t.leftForm.companyStationConfigId="",t.getDataForm.repairWorkRangeManagerId="",t.getDataForm.repairSequenceId="";var a={};a.companyId=e,d["a"].setCookie("accessdata",JSON.stringify(a)),t.getDataList(),Object(s["a"])({url:c["a"].getStationUnitInfo,method:"get",params:{parent:e,unitlevel:"Plant"}}).then((function(e){t.stataionData=e.result}))},getRepairSequenceData:function(e){var t=this;t.leftForm.repairWorkRangeManagerId="",t.leftForm.sequenceId="",t.leftForm.stationId=e,t.sequenceData=[],t.areaList=[],t.getDataForm.repairWorkRangeManagerId="",t.getDataForm.repairSequenceId="";var a=JSON.parse(d["a"].getCookie("accessdata"));a.companyStationConfigId=e,a.sequenceId="",d["a"].setCookie("accessdata",JSON.stringify(a)),t.getDataList(),Object(s["a"])({url:c["a"].getRepairSequenceInfo,method:"get",params:{companyId:e,subId:0}}).then((function(e){t.sequenceData=e.result}))},getCompanyData:function(){var e=this;Object(s["a"])({url:c["a"].getStationUnitInfo,method:"get",params:{parent:"0",unitlevel:"Basic"}}).then((function(t){e.companyData=t.result}))},handleClick:function(e,t){console.log(e)}},"handleCurrentChange",(function(e){var t=this;this.currentRow=e,t.PageIndex=e,t.getDataList()}))}),ie=ae,ne=(a("f8b2"),Object(h["a"])(ie,i,n,!1,null,"293fde1c",null));t["default"]=ne.exports},7768:function(e,t,a){},"81dc":function(e,t,a){var i=a("fb68"),n=a("2346"),l=a("cb3d")("species");e.exports=function(e){var t;return n(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!n(t.prototype)||(t=void 0),i(t)&&(t=t[l],null===t&&(t=void 0))),void 0===t?Array:t}},8593:function(e,t,a){"use strict";var i=a("ed47"),n=a.n(i);n.a},8936:function(e,t,a){"use strict";var i=a("c0f4"),n=a.n(i);n.a},9805:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"bodyStaff",attrs:{id:"bodyStaffOne"}},[a("el-dialog",{attrs:{title:e.titel,visible:e.dialogStaffVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogStaffVisible=t}}},[a("div",{staticClass:"bp-alert bp-alert-info",staticStyle:{"margin-top":"10x"},attrs:{id:"alert"}},[a("strong",[e._v("提示：")]),e._v("关键字至少2个字，双击选中或取消。\n      ")]),e._v(" "),a("table",{attrs:{id:"tab"}},[a("tr",[a("td",[a("el-input",{ref:"editTagFoucus",staticStyle:{width:"200px"},attrs:{size:"mini"},on:{blur:function(t){return e.keywordChange()}},nativeOn:{keyup:function(t){return e.keywordChange()}},model:{value:e.staffName,callback:function(t){e.staffName=t},expression:"staffName"}}),e._v(" "),a("a",{staticClass:"bp-linkbtn",attrs:{id:"menuBtn",href:"#"},on:{click:function(t){return e.showDept(),!1}}},[e._v("部门")])],1),e._v(" "),a("td",{attrs:{rowspan:"2",id:"td2"}},[a("div",[a("el-button",{attrs:{type:"primary",title:"添加全部",size:"small",id:"addAll",icon:"el-icon-d-arrow-right"},on:{click:function(t){return e.allStaff()}}})],1),e._v(" "),a("div",[a("el-button",{attrs:{type:"primary",title:"移除选中项",size:"small",icon:"el-icon-arrow-right"},on:{click:function(t){return e.selectSingle()}}})],1),e._v(" "),a("div",[a("el-button",{attrs:{type:"primary",title:"移除选中项",size:"small",icon:"el-icon-arrow-left"},on:{click:function(t){return e.removeSingle()}}})],1),e._v(" "),a("div",[a("el-button",{attrs:{type:"primary",title:"移除全部",size:"small",icon:"el-icon-d-arrow-left"},on:{click:function(t){return e.removeStaff()}}})],1)]),e._v(" "),a("td",[a("span",[e._v("已选人员："+e._s(e.selectCount))])])]),e._v(" "),a("tr",[a("td",[a("select",{attrs:{id:"selecting",name:"selecting",multiple:"multiple"},on:{dblclick:function(t){return e.selectSingle(1)},click:e.showDeptName}},e._l(e.selectingData,(function(t){return a("option",{key:t.id,attrs:{"data-value":t},domProps:{value:t.id}},[e._v("\n                "+e._s(t.displayName)+"\n              ")])})),0)]),e._v(" "),a("td",{staticStyle:{"padding-top":"10px"}},[a("select",{attrs:{id:"selected",name:"selected",multiple:"multiple"},on:{dblclick:function(t){return e.removeSingle()}}},e._l(e.selectData,(function(t){return a("option",{key:t.id,domProps:{value:t.id}},[e._v("\n                "+e._s(t.displayName)+"\n              ")])})),0)])])]),e._v(" "),a("p",{staticStyle:{"margin-bottom":"0px"},attrs:{id:"deptInfo"}},[a("strong",[e._v("所属部门："+e._s(e.currentDept))]),e._v(" "),a("span")]),e._v(" "),a("div",{staticClass:"menuContent bp-borderColor",attrs:{id:"menuContent"}},[a("el-tree",{ref:"tree",staticClass:"ztree",staticStyle:{"font-size":"14px"},attrs:{data:e.treeData,"node-key":"id",props:e.defaultProps},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,n=t.data;return a("span",{staticClass:"custom-tree-node"},[a("span",{staticClass:"node",on:{dblclick:function(t){return e.dblclickNode(i,n)}}},[e._v(e._s(i.label))])])}}])})],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogStaffVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.addStaffClick}},[e._v("确 定")])],1)])],1)},n=[],l=(a("e697"),a("2b45"),a("9a33"),a("52c1"),a("b775")),o=a("7c15"),r=(a("6c8d"),a("a336")),s=a.n(r),c={name:"StaffSelect",watch:{dialogStaffVisible:function(e){var t=this;e?t.$nextTick((function(){var e=s()(window).height()-70;t.$nextTick((function(){s()("#bodyStaffOne .el-dialog").css("width","640px"),s()("#bodyStaffOne .el-dialog").css("margin-top","60px"),s()("#bodyStaffOne .el-dialog").css("max-height",e-10+"px"),s()("#bodyStaffOne .el-dialog").css("overflow","hidden"),s()("#bodyStaffOne .el-dialog__body").css("overflow-y","auto")}))})):(t.staffName="",t.keyUpName="",t.currentDept="",t.currentUser="",t.selectData=[],t.deptNos="",t.selectingData=[],t.selectCount=0,t.treeData=[])}},data:function(){return{isMultiple:"",dialogStaffVisible:!1,selectCount:0,selectData:[],currentUser:"",currentDept:"",queryTimeout:"",selectingData:[],deptNos:"",staffName:"",keyUpName:"",deptNoPath:"",defaultProps:{children:"children",label:"name",id:"id"},titel:"人员选择",treeData:[]}},mounted:function(){},methods:{addStaffClick:function(){var e=this;e.$emit("addStaffClick",e.selectData)},dblclickNode:function(e,t){var a=this;a.staffName=t.attribute.deptName,a.deptNoPath=t.attribute.deptNoPath,a.queryStaff(2),a.hideDept()},loadStaffs:function(){var e=this;if(null!=e.currentUser&&e.currentUser.length>0){for(var t=e.currentUser.toString().split(","),a=new Array,i=0;i<t.length;i++)t[i].length>0&&(t[i].indexOf("[")>0?a.push(t[i].split("[")[1].slice(0,-1)):a.push(t[i]));if(a.length>0){var n=o["a"].getStaffInfoByStaffIdsInfo,r={staffIDs:a.join(",")};Object(l["a"])({url:n,method:"get",params:r}).then((function(t){e.selectData=t.result,e.selectCount=e.selectData.length}))}}},showDeptName:function(){var e=this,t=s()("#selecting").find("option:selected"),a=t.val();for(var i in e.selectingData)e.selectingData[i].id==a&&(e.currentDept=e.selectingData[i].deptNamePath)},handleNodeClick:function(e){},hideDept:function(){var e=this;s()("#menuContent").fadeOut("fast"),s()(".bodyStaff").unbind("mousedown",e.onBodyDown)},showDept:function(){var e=this,t=s()("#keyword");t.offset();s()("#menuContent").css({left:"24px",top:"140px"}).slideDown("fast"),s()(".bodyStaff").bind("mousedown",e.onBodyDown)},onBodyDown:function(e){var t=this;"menuBtn"==e.target.id||"menuContent"==e.target.id||s()(e.target).parents("#menuContent").length>0||t.hideDept()},selectSingle:function(e){var t=this,a=s()("#selecting").find("option:selected"),i=a.val();for(var n in"0"==t.isMultiple&&t.selectData.length>0&&(t.selectingData.push(t.selectData[0]),t.selectData=[]),t.selectingData){var l=t.selectingData[n];l.id==i&&(t.selectData.push(l),t.selectingData.splice(s.a.inArray(l,t.selectingData),1))}t.selectCount=t.selectData.length,"0"==t.isMultiple&&1==e&&t.addStaffClick()},removeStaff:function(){var e=this;if(null!=e.selectData&&e.selectData.length>0){for(var t in e.selectData)e.selectingData.push(e.selectData[t]);e.selectData=[]}e.selectCount=0},allStaff:function(){var e=this;if("0"!=e.isMultiple){if(null!=e.selectingData&&e.selectingData.length>0){for(var t in e.selectingData)e.selectData.push(e.selectingData[t]);e.selectingData=[]}e.selectCount=e.selectData.length}},removeSingle:function(){var e=this,t=s()("#selected").find("option:selected"),a=t.val();if(null!=a&&null!=e.selectData&&e.selectData.length>0)for(var i in e.selectData){var n=e.selectData[i];n.id==a&&(e.selectingData.push(n),e.selectData.splice(s.a.inArray(n,e.selectData),1))}e.selectCount=e.selectData.length},keywordChange:function(){var e=this;e.staffName.length>1&&e.staffName!=e.keyUpName?(e.queryTimeout&&clearTimeout(e.queryTimeout),e.queryTimeout=setTimeout((function(){e.queryStaff(1)}),500)):e.staffName.length<2&&(e.queryTimeout&&clearTimeout(e.queryTimeout),e.selectingData=[]),e.keyUpName=e.staffName},queryStaff:function(e){var t=this,a=o["a"].getStaffInfosByName,i={staffName:t.staffName};2==e&&(a=o["a"].getStaffInfosByDepartNoPath,i={deptNoPath:t.deptNoPath}),Object(l["a"])({url:a,method:"get",params:i}).then((function(e){if(t.selectingData=e.result,t.selectData.length>0)for(var a in t.selectData)for(var i in t.selectingData)t.selectData[a].id==t.selectingData[i].id&&t.selectingData.splice(s.a.inArray(t.selectingData[i],t.selectingData),1)}))},initDept:function(){var e=this;Object(l["a"])({url:o["a"].getAllDepartmentInfos,method:"get",params:{depNos:e.deptNos}}).then((function(t){e.treeData=t.result}))},closeClick:function(){var e=this;e.dialogStaffVisible=!1},init:function(e,t){var a=this;a.staffName=JSON.parse(sessionStorage.userInfo)["departmentName"],a.keyUpName=JSON.parse(sessionStorage.userInfo)["departmentName"],a.deptNoPath=JSON.parse(sessionStorage.userInfo)["departmentNoPath"],a.dialogStaffVisible=!0,a.isMultiple=t,a.hideDept(),null!=e&&(null!=e.deptNos&&e.deptNos.length>0&&(a.deptNos=e.deptNos.spilt(",")),null!=e.selectedUser&&(a.currentUser=e.selectedUser)),"0"==a.isMultiple?a.titel="单选人员选择":a.titel="多选人员选择",a.initDept(),a.loadStaffs(),setTimeout((function(){a.queryStaff(2)}),200)}}},d=c,p=(a("3b7c"),a("9ca4")),m=Object(p["a"])(d,i,n,!1,null,"6c6c6327",null);t["a"]=m.exports},"9e76":function(e,t,a){"use strict";var i=a("69b3"),n=a("eafa"),l=a("e754"),o=a("7108");a("0aed")("match",1,(function(e,t,a,r){return[function(a){var i=e(this),n=void 0==a?void 0:a[t];return void 0!==n?n.call(a,i):new RegExp(a)[t](String(i))},function(e){var t=r(a,e,this);if(t.done)return t.value;var s=i(e),c=String(this);if(!s.global)return o(s,c);var d=s.unicode;s.lastIndex=0;var p,m=[],u=0;while(null!==(p=o(s,c))){var f=String(p[0]);m[u]=f,""===f&&(s.lastIndex=l(c,n(s.lastIndex),d)),u++}return 0===u?null:m}]}))},a267:function(e,t,a){e.exports=a.p+"static/img/close.9efce744.png"},adb3:function(e,t,a){},c0f4:function(e,t,a){},c6a2:function(e,t,a){"use strict";var i=a("adb3"),n=a.n(i);n.a},cfa2:function(e,t,a){"use strict";var i=a("7768"),n=a.n(i);n.a},cfb2:function(e,t,a){},e697:function(e,t,a){"use strict";var i=a("e46b"),n=a("013f")(5),l="find",o=!0;l in[]&&Array(1)[l]((function(){o=!1})),i(i.P+i.F*o,"Array",{find:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),a("0e8b")(l)},e753:function(e,t,a){},ed47:function(e,t,a){},f8b2:function(e,t,a){"use strict";var i=a("68a9"),n=a.n(i);n.a}}]);