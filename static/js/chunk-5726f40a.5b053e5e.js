(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5726f40a"],{"013f":function(e,t,a){var n=a("4ce5"),i=a("224c"),o=a("008a"),l=a("eafa"),r=a("5dd2");e.exports=function(e,t){var a=1==e,s=2==e,d=3==e,c=4==e,u=6==e,p=5==e||u,m=t||r;return function(t,r,f){for(var g,h,v=o(t),b=i(v),y=n(r,f,3),D=l(b.length),S=0,_=a?m(t,D):s?m(t,0):void 0;D>S;S++)if((p||S in b)&&(g=b[S],h=y(g,S,v),e))if(a)_[S]=h;else if(h)switch(e){case 3:return!0;case 5:return g;case 6:return S;case 2:_.push(g)}else if(c)return!1;return u?-1:d||c?c:_}}},"1d00":function(e,t,a){"use strict";var n=a("4b8b"),i=a.n(n);i.a},"3b7c":function(e,t,a){"use strict";var n=a("cfb2"),i=a.n(n);i.a},"4b8b":function(e,t,a){},"5dd2":function(e,t,a){var n=a("81dc");e.exports=function(e,t){return new(n(e))(t)}},"6c8d":function(e,t,a){"use strict";a("9e76"),a("9dd9"),a("9a33");t["a"]={getUUid:function(){for(var e=[],t="0123456789abcdef",a=0;a<36;a++)e[a]=t.substr(Math.floor(16*Math.random()),1);e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-";var n=e.join("");return n},getTime:function(e){var t=new Date(e),a=t.getFullYear()+"-",n=(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-",i=(t.getDate()<10?"0"+t.getDate():t.getDate())+" ",o=(t.getHours()<10?"0"+t.getHours():t.getHours())+":",l=(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":",r=t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds();return a+n+i+o+l+r},getDate:function(e){var t=new Date(e),a=t.getFullYear()+"-",n=(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-",i=t.getDate()<10?"0"+t.getDate():t.getDate();return a+n+i},ConvertLevel:function(e){return"Basic"==e?"基地":"Plant"==e?"电厂":"机组"},IsCanDisplayImage:function(e){for(var t="jpg,png,gif,bmp,icon,jpeg",a=t.split(","),n=0;n<a.length;n++)if(a[n]==e)return!0;return!1},getQueryVariable:function(e){var t=window.location.href,a=t.split("?");if(a.length>1){a=a[1].split("&");for(var n=0;n<a.length;n++){var i=a[n].split("=");if(i[0]==e)return i[1]}return null}return null},setCookie:function(e,t){var a=30,n=new Date;n.setTime(n.getTime()+24*a*60*60*1e3),document.cookie=e+"="+escape(t)+";expires="+n.toGMTString()},getCookie:function(e){var t,a=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(a))?unescape(t[2]):null},delCookie:function(e){var t=new Date;t.setTime(t.getTime()-1);var a=getCookie(e);null!=a&&(document.cookie=e+"="+a+";expires="+t.toGMTString())}}},"81dc":function(e,t,a){var n=a("fb68"),i=a("2346"),o=a("cb3d")("species");e.exports=function(e){var t;return i(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!i(t.prototype)||(t=void 0),n(t)&&(t=t[o],null===t&&(t=void 0))),void 0===t?Array:t}},9805:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"bodyStaff",attrs:{id:"bodyStaffOne"}},[a("el-dialog",{attrs:{title:e.titel,visible:e.dialogStaffVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogStaffVisible=t}}},[a("div",{staticClass:"bp-alert bp-alert-info",staticStyle:{"margin-top":"10x"},attrs:{id:"alert"}},[a("strong",[e._v("提示：")]),e._v("关键字至少2个字，双击选中或取消。\n      ")]),e._v(" "),a("table",{attrs:{id:"tab"}},[a("tr",[a("td",[a("el-input",{ref:"editTagFoucus",staticStyle:{width:"200px"},attrs:{size:"mini"},on:{blur:function(t){return e.keywordChange()}},nativeOn:{keyup:function(t){return e.keywordChange()}},model:{value:e.staffName,callback:function(t){e.staffName=t},expression:"staffName"}}),e._v(" "),a("a",{staticClass:"bp-linkbtn",attrs:{id:"menuBtn",href:"#"},on:{click:function(t){return e.showDept(),!1}}},[e._v("部门")])],1),e._v(" "),a("td",{attrs:{rowspan:"2",id:"td2"}},[a("div",[a("el-button",{attrs:{type:"primary",title:"添加全部",size:"small",id:"addAll",icon:"el-icon-d-arrow-right"},on:{click:function(t){return e.allStaff()}}})],1),e._v(" "),a("div",[a("el-button",{attrs:{type:"primary",title:"移除选中项",size:"small",icon:"el-icon-arrow-right"},on:{click:function(t){return e.selectSingle()}}})],1),e._v(" "),a("div",[a("el-button",{attrs:{type:"primary",title:"移除选中项",size:"small",icon:"el-icon-arrow-left"},on:{click:function(t){return e.removeSingle()}}})],1),e._v(" "),a("div",[a("el-button",{attrs:{type:"primary",title:"移除全部",size:"small",icon:"el-icon-d-arrow-left"},on:{click:function(t){return e.removeStaff()}}})],1)]),e._v(" "),a("td",[a("span",[e._v("已选人员："+e._s(e.selectCount))])])]),e._v(" "),a("tr",[a("td",[a("select",{attrs:{id:"selecting",name:"selecting",multiple:"multiple"},on:{dblclick:function(t){return e.selectSingle(1)},click:e.showDeptName}},e._l(e.selectingData,(function(t){return a("option",{key:t.id,attrs:{"data-value":t},domProps:{value:t.id}},[e._v("\n                "+e._s(t.displayName)+"\n              ")])})),0)]),e._v(" "),a("td",{staticStyle:{"padding-top":"10px"}},[a("select",{attrs:{id:"selected",name:"selected",multiple:"multiple"},on:{dblclick:function(t){return e.removeSingle()}}},e._l(e.selectData,(function(t){return a("option",{key:t.id,domProps:{value:t.id}},[e._v("\n                "+e._s(t.displayName)+"\n              ")])})),0)])])]),e._v(" "),a("p",{staticStyle:{"margin-bottom":"0px"},attrs:{id:"deptInfo"}},[a("strong",[e._v("所属部门："+e._s(e.currentDept))]),e._v(" "),a("span")]),e._v(" "),a("div",{staticClass:"menuContent bp-borderColor",attrs:{id:"menuContent"}},[a("el-tree",{ref:"tree",staticClass:"ztree",staticStyle:{"font-size":"14px"},attrs:{data:e.treeData,"node-key":"id",props:e.defaultProps},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node,i=t.data;return a("span",{staticClass:"custom-tree-node"},[a("span",{staticClass:"node",on:{dblclick:function(t){return e.dblclickNode(n,i)}}},[e._v(e._s(n.label))])])}}])})],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogStaffVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.addStaffClick}},[e._v("确 定")])],1)])],1)},i=[],o=(a("e697"),a("2b45"),a("9a33"),a("52c1"),a("b775")),l=a("7c15"),r=(a("6c8d"),a("a336")),s=a.n(r),d={name:"StaffSelect",watch:{dialogStaffVisible:function(e){var t=this;e?t.$nextTick((function(){var e=s()(window).height()-70;t.$nextTick((function(){s()("#bodyStaffOne .el-dialog").css("width","640px"),s()("#bodyStaffOne .el-dialog").css("margin-top","60px"),s()("#bodyStaffOne .el-dialog").css("max-height",e-10+"px"),s()("#bodyStaffOne .el-dialog").css("overflow","hidden"),s()("#bodyStaffOne .el-dialog__body").css("overflow-y","auto")}))})):(t.staffName="",t.keyUpName="",t.currentDept="",t.currentUser="",t.selectData=[],t.deptNos="",t.selectingData=[],t.selectCount=0,t.treeData=[])}},data:function(){return{isMultiple:"",dialogStaffVisible:!1,selectCount:0,selectData:[],currentUser:"",currentDept:"",queryTimeout:"",selectingData:[],deptNos:"",staffName:"",keyUpName:"",deptNoPath:"",defaultProps:{children:"children",label:"name",id:"id"},titel:"人员选择",treeData:[]}},mounted:function(){},methods:{addStaffClick:function(){var e=this;e.$emit("addStaffClick",e.selectData)},dblclickNode:function(e,t){var a=this;a.staffName=t.attribute.deptName,a.deptNoPath=t.attribute.deptNoPath,a.queryStaff(2),a.hideDept()},loadStaffs:function(){var e=this;if(null!=e.currentUser&&e.currentUser.length>0){for(var t=e.currentUser.toString().split(","),a=new Array,n=0;n<t.length;n++)t[n].length>0&&(t[n].indexOf("[")>0?a.push(t[n].split("[")[1].slice(0,-1)):a.push(t[n]));if(a.length>0){var i=l["a"].getStaffInfoByStaffIdsInfo,r={staffIDs:a.join(",")};Object(o["a"])({url:i,method:"get",params:r}).then((function(t){e.selectData=t.result,e.selectCount=e.selectData.length}))}}},showDeptName:function(){var e=this,t=s()("#selecting").find("option:selected"),a=t.val();for(var n in e.selectingData)e.selectingData[n].id==a&&(e.currentDept=e.selectingData[n].deptNamePath)},handleNodeClick:function(e){},hideDept:function(){var e=this;s()("#menuContent").fadeOut("fast"),s()(".bodyStaff").unbind("mousedown",e.onBodyDown)},showDept:function(){var e=this,t=s()("#keyword");t.offset();s()("#menuContent").css({left:"24px",top:"140px"}).slideDown("fast"),s()(".bodyStaff").bind("mousedown",e.onBodyDown)},onBodyDown:function(e){var t=this;"menuBtn"==e.target.id||"menuContent"==e.target.id||s()(e.target).parents("#menuContent").length>0||t.hideDept()},selectSingle:function(e){var t=this,a=s()("#selecting").find("option:selected"),n=a.val();for(var i in"0"==t.isMultiple&&t.selectData.length>0&&(t.selectingData.push(t.selectData[0]),t.selectData=[]),t.selectingData){var o=t.selectingData[i];o.id==n&&(t.selectData.push(o),t.selectingData.splice(s.a.inArray(o,t.selectingData),1))}t.selectCount=t.selectData.length,"0"==t.isMultiple&&1==e&&t.addStaffClick()},removeStaff:function(){var e=this;if(null!=e.selectData&&e.selectData.length>0){for(var t in e.selectData)e.selectingData.push(e.selectData[t]);e.selectData=[]}e.selectCount=0},allStaff:function(){var e=this;if("0"!=e.isMultiple){if(null!=e.selectingData&&e.selectingData.length>0){for(var t in e.selectingData)e.selectData.push(e.selectingData[t]);e.selectingData=[]}e.selectCount=e.selectData.length}},removeSingle:function(){var e=this,t=s()("#selected").find("option:selected"),a=t.val();if(null!=a&&null!=e.selectData&&e.selectData.length>0)for(var n in e.selectData){var i=e.selectData[n];i.id==a&&(e.selectingData.push(i),e.selectData.splice(s.a.inArray(i,e.selectData),1))}e.selectCount=e.selectData.length},keywordChange:function(){var e=this;e.staffName.length>1&&e.staffName!=e.keyUpName?(e.queryTimeout&&clearTimeout(e.queryTimeout),e.queryTimeout=setTimeout((function(){e.queryStaff(1)}),500)):e.staffName.length<2&&(e.queryTimeout&&clearTimeout(e.queryTimeout),e.selectingData=[]),e.keyUpName=e.staffName},queryStaff:function(e){var t=this,a=l["a"].getStaffInfosByName,n={staffName:t.staffName};2==e&&(a=l["a"].getStaffInfosByDepartNoPath,n={deptNoPath:t.deptNoPath}),Object(o["a"])({url:a,method:"get",params:n}).then((function(e){if(t.selectingData=e.result,t.selectData.length>0)for(var a in t.selectData)for(var n in t.selectingData)t.selectData[a].id==t.selectingData[n].id&&t.selectingData.splice(s.a.inArray(t.selectingData[n],t.selectingData),1)}))},initDept:function(){var e=this;Object(o["a"])({url:l["a"].getAllDepartmentInfos,method:"get",params:{depNos:e.deptNos}}).then((function(t){e.treeData=t.result}))},closeClick:function(){var e=this;e.dialogStaffVisible=!1},init:function(e,t){var a=this;a.staffName=JSON.parse(sessionStorage.userInfo)["departmentName"],a.keyUpName=JSON.parse(sessionStorage.userInfo)["departmentName"],a.deptNoPath=JSON.parse(sessionStorage.userInfo)["departmentNoPath"],a.dialogStaffVisible=!0,a.isMultiple=t,a.hideDept(),null!=e&&(null!=e.deptNos&&e.deptNos.length>0&&(a.deptNos=e.deptNos.spilt(",")),null!=e.selectedUser&&(a.currentUser=e.selectedUser)),"0"==a.isMultiple?a.titel="单选人员选择":a.titel="多选人员选择",a.initDept(),a.loadStaffs(),setTimeout((function(){a.queryStaff(2)}),200)}}},c=d,u=(a("3b7c"),a("9ca4")),p=Object(u["a"])(c,n,i,!1,null,"6c6c6327",null);t["a"]=p.exports},"9e76":function(e,t,a){"use strict";var n=a("69b3"),i=a("eafa"),o=a("e754"),l=a("7108");a("0aed")("match",1,(function(e,t,a,r){return[function(a){var n=e(this),i=void 0==a?void 0:a[t];return void 0!==i?i.call(a,n):new RegExp(a)[t](String(n))},function(e){var t=r(a,e,this);if(t.done)return t.value;var s=n(e),d=String(this);if(!s.global)return l(s,d);var c=s.unicode;s.lastIndex=0;var u,p=[],m=0;while(null!==(u=l(s,d))){var f=String(u[0]);p[m]=f,""===f&&(s.lastIndex=o(d,i(s.lastIndex),c)),m++}return 0===m?null:p}]}))},cfb2:function(e,t,a){},dd13:function(e,t,a){},e292:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dashboard-container"},[a("div",{staticClass:"sidebar-container"},[a("div",{staticClass:"tree_content"},[a("el-tree",{ref:"tree",staticClass:"filter-tree",attrs:{data:e.treeData,props:e.defaultProps,"highlight-current":"","default-expand-all":"","filter-node-method":e.filterNode},on:{"node-click":e.handleNodeClick}})],1)]),e._v(" "),a("div",{staticClass:"main-container"},[a("div"),e._v(" "),a("div",[a("div",[a("el-form",{ref:"searchForm",attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"大修名称"}},[a("el-input",{staticClass:"el-form-item_input",staticStyle:{width:"250px"},attrs:{size:"small",placeholder:"请输入名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:function(t){return e.getDataList("check")}}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"info",size:"small",icon:"el-icon-refresh-right"},on:{click:function(t){return e.resetGetDataList()}}},[e._v("重置")])],1)],1)],1),e._v(" "),a("div",{staticStyle:{height:"calc(100vh - 170px)"},attrs:{id:"table_content"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"font-size":"12px"},attrs:{data:e.tableData,border:"",height:e.tableHeader}},[a("el-table-column",{attrs:{prop:"companyName",label:"基地",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"station",label:"电站"}}),e._v(" "),a("el-table-column",{attrs:{prop:"code",label:"大修编码"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"大修名称",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{label:"计划开始时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.setTime(t.row.planStartDate)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"计划结束时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.setTime(t.row.planEndDate)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"实际开始时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.setTime(t.row.startDate)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"实际完成时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.setTime(t.row.endDate)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"是否结束",align:"center",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return["N"==t.row.isComplete?a("span",[e._v("否")]):e._e(),e._v(" "),"Y"==t.row.isComplete?a("span",[e._v("是")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"备注说明",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"el-icon-edit",attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}}),e._v(" "),a("el-button",{staticClass:"el-icon-delete",attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}})]}}])},[a("template",{slot:"header"},[a("span",[e._v("\n                操作\n                "),a("i",{staticClass:"el-icon-circle-plus",staticStyle:{color:"#409eff","margin-left":"3px","font-size":"17px",cursor:"pointer",top:"2px",position:"relative"},on:{click:e.addListClick}})])])],2)],1),e._v(" "),a("div",{staticClass:"my_el_pagination"},[a("el-pagination",{attrs:{"page-sizes":[20,50,100],"page-size":e.form.PageSize,layout:"prev, pager, next, jumper,sizes,total",total:e.total,"current-page":e.form.PageIndex},on:{"update:currentPage":function(t){return e.$set(e.form,"PageIndex",t)},"update:current-page":function(t){return e.$set(e.form,"PageIndex",t)},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)])]),e._v(" "),a("AddPage",{ref:"addpage",on:{addClick:e.addClick}})],1)},i=[],o=a("a336"),l=a.n(o),r=a("b775"),s=a("7c15"),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"repairSequenceIndex_add"}},[a("div",[a("el-dialog",{attrs:{title:"编辑大修信息",visible:e.dialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticStyle:{"margin-top":"10px"}},[a("el-form",{ref:"addForm",attrs:{inline:!0,model:e.addForm,rules:e.rules,"label-position":e.labelPosition}},[a("el-card",{staticClass:"box-card"},[a("el-form-item",{attrs:{label:"基地",prop:"companyId",required:!0,"label-width":"120px"}},[a("el-select",{staticClass:"el-form-item_input",staticStyle:{width:"176px"},attrs:{size:"small",placeholder:"请选择基地"},on:{change:e.getStationArray},model:{value:e.addForm.companyId,callback:function(t){e.$set(e.addForm,"companyId",t)},expression:"addForm.companyId"}},e._l(e.stationUnitInfoArray,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"电站",prop:"companyStationConfigId","label-width":"120px",required:!0}},[a("el-select",{staticClass:"el-form-item_input",staticStyle:{width:"176px"},attrs:{size:"small",placeholder:"请选择电站"},model:{value:e.addForm.companyStationConfigId,callback:function(t){e.$set(e.addForm,"companyStationConfigId",t)},expression:"addForm.companyStationConfigId"}},e._l(e.stationArray,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"大修编码",prop:"code",required:!0,"label-width":"120px"}},[a("el-input",{staticClass:"el-form-item_input",staticStyle:{width:"176px"},attrs:{size:"small",placeholder:"请输入大修编码"},model:{value:e.addForm.code,callback:function(t){e.$set(e.addForm,"code",t)},expression:"addForm.code"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"大修名称","label-width":"120px",prop:"name",required:!0}},[a("el-input",{staticClass:"el-form-item_input",staticStyle:{width:"176px"},attrs:{size:"small",placeholder:"请输入大修名称"},model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"计划开始时间","label-width":"120px",prop:"planStartDate",required:!0}},[a("el-date-picker",{attrs:{size:"small","picker-options":e.planStarDateOptions,type:"date",placeholder:"请选择计划开始时间"},model:{value:e.addForm.planStartDate,callback:function(t){e.$set(e.addForm,"planStartDate",t)},expression:"addForm.planStartDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"计划完成时间","label-width":"120px",prop:"planEndDate",required:!0}},[a("el-date-picker",{attrs:{size:"small",type:"date","picker-options":e.planEndDateOptions,placeholder:"请选择计划完成时间"},model:{value:e.addForm.planEndDate,callback:function(t){e.$set(e.addForm,"planEndDate",t)},expression:"addForm.planEndDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"实际开始时间","label-width":"120px"}},[a("el-date-picker",{attrs:{size:"small","picker-options":e.startDateDateOptions,type:"date",placeholder:"请选择实际开始时间"},model:{value:e.addForm.startDate,callback:function(t){e.$set(e.addForm,"startDate",t)},expression:"addForm.startDate"}})],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"实际完成时间","label-width":"120px"}},[a("el-date-picker",{attrs:{"picker-options":e.endDateOptions,type:"date",placeholder:"请选择实际开始时间"},model:{value:e.addForm.endDate,callback:function(t){e.$set(e.addForm,"endDate",t)},expression:"addForm.endDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"大修是否结束","label-width":"120px"}},[a("el-select",{staticStyle:{width:"176px"},attrs:{placeholder:"请选择",size:"small"},model:{value:e.addForm.isComplete,callback:function(t){e.$set(e.addForm,"isComplete",t)},expression:"addForm.isComplete"}},[a("el-option",{attrs:{label:"否",value:"N"}}),e._v(" "),a("el-option",{attrs:{label:"是",value:"Y"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"创建人","label-width":"120px"}},[a("span",[e._v(e._s(e.addForm.createdBy))])]),e._v(" "),a("el-form-item",{attrs:{label:"备注","label-width":"100px"}},[a("el-input",{staticStyle:{width:"460px"},attrs:{type:"textarea",placeholder:"请输入备注"},model:{value:e.addForm.remark,callback:function(t){e.$set(e.addForm,"remark",t)},expression:"addForm.remark"}})],1)],1),e._v(" "),a("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"10px","padding-bottom":"20px"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("大修轮次关联的区域")]),e._v(" "),a("el-button",{staticStyle:{float:"right",padding:"3px 0","margin-left":"10px"},attrs:{type:"text"},on:{click:e.showArea}},[e._v("关联区域")]),e._v(" "),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:e.batchClick}},[e._v("批量删除")])],1),e._v(" "),a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"code",label:"区域编码",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"区域名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"rangePersonMax",label:"上限人数",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"authCount",label:"授权人数",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-delete",staticStyle:{color:"#F56C6C","font-size":"18px","margin-right":"10px",cursor:"pointer"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}}),e._v(" "),a("i",{staticClass:"el-icon-user",staticStyle:{color:"#409eff","font-size":"18px",cursor:"pointer"},on:{click:function(a){return e.staffSelectClick(t.row)}}})]}}])})],1)],1)])],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.addClick}},[e._v("保 存")])],1)])],1),e._v(" "),a("v-Area",{ref:"area",on:{addAreaClick:e.addAreaClick}}),e._v(" "),a("V-StaffSelect",{ref:"staffSelect",on:{addStaffClick:e.addStaffClick}})],1)},c=[],u=(a("cc57"),a("6c8d")),p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"area",attrs:{id:"area"}},[a("el-dialog",{attrs:{title:"电站区域管理",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",[a("el-form",{ref:"searchForm",attrs:{model:e.form,inline:!0}},[a("el-form-item",{attrs:{label:"区域编码"}},[a("el-input",{staticClass:"el-form-item_input",staticStyle:{width:"150px"},attrs:{size:"small",placeholder:"区域编码"},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"区域名称"}},[a("el-input",{staticClass:"el-form-item_input",staticStyle:{width:"150px"},attrs:{size:"small",placeholder:"区域名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:function(t){return e.getDataList()}}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"info",size:"small",icon:"el-icon-refresh-right"},on:{click:function(t){return e.resetGetDataList()}}},[e._v("重置")])],1),e._v(" "),a("el-form-item")],1)],1),e._v(" "),a("div",{staticStyle:{height:"calc(100vh - 170px)"},attrs:{id:"table_content"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{"font-size":"12px"},attrs:{data:e.tableData,border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"companyName",label:"基地",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"station",label:"电站",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"code",label:"区域编码",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"区域名称",align:"center"}})],1),e._v(" "),a("div",{staticStyle:{"margin-top":"10px"}},e._l(e.multipleSelection,(function(t,n){return a("el-tag",{key:n,staticStyle:{"margin-right":"10px"},attrs:{closable:"","disable-transitions":!1},on:{close:function(a){return e.handleClose(t,n)}}},[e._v(e._s(t.companyName)+"#"+e._s(t.station))])})),1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.referenceClick}},[e._v("引 用")])],1)])],1)},m=[],f=(a("6d57"),{data:function(){return{multipleSelection:[],dialogVisible:!1,initData:null,tableData:[],loading:!1,form:{companyStationConfigId:"",companyId:"",name:"",code:"",PageSize:50,PageIndex:1}}},watch:{dialogVisible:function(e){var t=this;e&&t.$nextTick((function(){var e=l()(window).height()-70;l()("#area .el-dialog").css("width","720px"),l()("#area .el-dialog").css("max-height",e-10+"px"),l()("#area .el-dialog__body").css("max-height",e-150+"px"),l()("#area .el-dialog").css("margin-top","60px"),l()("#area .el-dialog__body").css("overflow-y","auto")}))}},methods:{referenceClick:function(){var e=this;if(0==e.multipleSelection.length)return e.$message.error("请选择区域"),!1;var t={},a=[];t.repairSequenceId=e.initData.id,t.companyStationRangeId=e.initData.companyStationConfigId;for(var n=0;n<e.multipleSelection.length;n++)a.push(e.multipleSelection[n].id);t.ids=a.toString(),Object(r["a"])({url:s["a"].saveRepairWorkRange,method:"get",params:t}).then((function(t){e.$emit("addAreaClick"),e.dialogVisible=!1}))},handleClose:function(e,t){var a=this;this.multipleSelection.splice(t,1),this.multipleSelection.length>0?this.multipleSelection.forEach((function(e){a.$refs.multipleTable.toggleRowSelection(e)})):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(e){var t=this;t.multipleSelection=e},init:function(e){var t=this;t.dialogVisible=!0,console.log(e),t.initData=e,t.form.companyStationConfigId=e.companyStationConfigId,t.form.companyId=e.id,t.getDataList()},resetGetDataList:function(){var e=this;e.form.name="",e.form.code="",e.getDataList()},getDataList:function(){var e=this;e.loading=!0,Object(r["a"])({url:s["a"].getCompanyStataionRangeByStation,method:"get",params:e.form}).then((function(t){200==t.code&&(e.loading=!1,e.tableData=t.result.rows)}))}}}),g=f,h=a("9ca4"),v=Object(h["a"])(g,p,m,!1,null,"39c1ed6a",null),b=v.exports,y=a("9805"),D={components:{"V-StaffSelect":y["a"],"v-Area":b},watch:{dialogVisible:function(e){var t=this;e?t.$nextTick((function(){var e=l()(window).height()-70;l()("#repairSequenceIndex_add .el-dialog").css("width","720px"),l()("#repairSequenceIndex_add .el-dialog").css("max-height",e-10+"px"),l()("#repairSequenceIndex_add .el-dialog__body").css("max-height",e-150+"px"),l()("#repairSequenceIndex_add .el-dialog").css("margin-top","60px"),l()("#repairSequenceIndex_add .el-dialog__body").css("overflow-y","auto");var a={parent:0,unitlevel:"Basic"};t.getStationUnitInfo(a)})):(t.addForm={companyId:"",companyStationConfigId:"",code:"",name:"",planStartDate:"",planEndDate:"",startDate:"",endDate:"",isComplete:"",remark:"",id:"",createdBy:""},t.$refs["addForm"].resetFields())}},data:function(){var e=this;return{planEndDateOptions:{disabledDate:function(t){if(e.addForm.planStartDate)return"number"==typeof e.addForm.planStartDate?t.getTime()<e.addForm.planStartDate:t.getTime()<e.addForm.planStartDate.getTime()}},planStarDateOptions:{disabledDate:function(t){if(e.addForm.planEndDate)return"number"==typeof e.addForm.planEndDate?t.getTime()>e.addForm.planEndDate:t.getTime()>e.addForm.planEndDate.getTime()}},endDateOptions:{disabledDate:function(t){if(e.addForm.startDate)return"number"==typeof e.addForm.startDate?t.getTime()<e.addForm.startDate:t.getTime()<e.addForm.startDate.getTime()}},startDateDateOptions:{disabledDate:function(t){if(e.addForm.endDate)return"number"==typeof e.addForm.startDate?t.getTime()>e.addForm.endDate:t.getTime()>e.addForm.endDate.getTime()}},loading:!1,stationArray:[],multipleSelection:[],dialogVisible:!1,labelPosition:"right",titel:"",stationUnitInfoArray:[],tableData:[],addForm:{companyId:"",companyStationConfigId:"",code:"",name:"",planStartDate:"",planEndDate:"",startDate:"",endDate:"",isComplete:"",remark:"",id:"",createdBy:""},level:"",rules:{companyId:[{required:!0,message:"请选择物机组类型",trigger:"change"}],companyStationConfigId:[{required:!0,message:"请选择物机组类型",trigger:"change"}],code:[{required:!0,message:"请输入大修编码",trigger:"blur"}],name:[{required:!0,message:"请输入大修名称",trigger:"blur"}],planStartDate:[{required:!0,message:"请选择计划开始时间",trigger:"blur"}],planEndDate:[{required:!0,message:"请选择计划结束时间",trigger:"blur"}]},repairWorkRangeManagerId:""}},mounted:function(){},methods:{addAreaClick:function(){var e=this;e.getRepairWorkRangeBySequenceIdData()},addStaffClick:function(e){for(var t=this,a=new Array,n=0;n<e.length;n++)a.push(e[n].idCard);Object(r["a"])({url:s["a"].batchBpWorkspacePersonAuth,method:"post",data:{repairWorkRangeManagerId:t.repairWorkRangeManagerId,planStartDatetime:new Date(t.addForm.planStartDate).getTime(),planEndDatetime:new Date(t.addForm.planEndDate).getTime(),idCard:a.join(",")}}).then((function(e){"200"==e.code&&t.getRepairWorkRangeBySequenceIdData()})),t.$refs["staffSelect"].closeClick()},staffSelectClick:function(e){var t=this;t.repairWorkRangeManagerId=e.id,Object(r["a"])({url:s["a"].getWorkspacePersonAuthByRangeId,method:"post",data:{repairWorkRangeManagerId:e.id}}).then((function(e){if(200==e.code){var a=e.result;t.$refs["staffSelect"].init({deptNos:"",selectedUser:a.join(",")},"1")}}))},showArea:function(){var e=this;e.$refs["area"].init(e.addForm)},batchClick:function(){var e=this,t=[];if(0==e.multipleSelection.length)return e.$message.error("请选择关联区域"),!1;for(var a=0;a<e.multipleSelection.length;a++)console.log(e.multipleSelection[a]),t.push(e.multipleSelection[a].id);e=this;this.$confirm("您确定要批量删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(r["a"])({url:s["a"].deleteaRepairWorkRange,method:"post",data:{id:t.toString()}}).then((function(t){200==t.code&&(e.$message({type:"success",message:"删除成功!"}),e.getRepairWorkRangeBySequenceIdData())}))})).catch((function(){}))},handleSelectionChange:function(e){var t=this;t.multipleSelection=e},handleDelete:function(e,t){var a=this;this.$confirm("您确定要删除该信息吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(r["a"])({url:s["a"].deleteaRepairWorkRange,method:"post",data:{id:t.id}}).then((function(e){200==e.code&&(a.$message({type:"success",message:"删除成功!"}),a.getRepairWorkRangeBySequenceIdData())}))})).catch((function(){}))},handleEdit:function(){},getStationArray:function(e){var t=this,a={parent:e,unitlevel:"Plant"};Object(r["a"])({url:s["a"].getStationUnitInfo,method:"get",params:a}).then((function(e){t.stationArray=e.result}))},getStationUnitInfo:function(e){var t=this,a=e;Object(r["a"])({url:s["a"].getStationUnitInfo,method:"get",params:a}).then((function(e){t.stationUnitInfoArray=e.result,t.addForm.companyStationConfigId&&(console.log("执行有"),t.getStationArray(t.addForm.companyId))}))},getRepairWorkRangeBySequenceIdData:function(){var e=this;e.loading=!0;var t={repairSequenceId:e.addForm.id,rows:1e4,page:1};Object(r["a"])({url:s["a"].getRepairWorkRangeBySequenceId,method:"get",params:t}).then((function(t){e.loading=!1,e.tableData=t.result.rows}))},addListAreaClick:function(){},addClick:function(){var e=this;this.$refs["addForm"].validate((function(t){if(t){var a=e;e.addForm.planStartDate=new Date(e.addForm.planStartDate).getTime(),e.addForm.planEndDate=new Date(e.addForm.planEndDate).getTime(),e.addForm.startDate=new Date(e.addForm.startDate).getTime(),e.addForm.endDate=new Date(e.addForm.endDate).getTime();var n={companyId:a.addForm.companyId,companyStationConfigId:a.addForm.companyStationConfigId,code:a.addForm.code,name:a.addForm.name,planStartDate:a.addForm.planStartDate,planEndDate:a.addForm.planEndDate,startDate:a.addForm.startDate,endDate:a.addForm.endDate,isComplete:a.addForm.isComplete,remark:a.addForm.remark,createdBy:a.addForm.createdBy};a.addForm.id&&(n.id=a.addForm.id),Object(r["a"])({url:s["a"].saveRepairSequence,method:"post",data:n}).then((function(e){1==a.type?(a.type=2,a.addForm.id=e.result,a.getRepairWorkRangeBySequenceIdData()):a.dialogVisible=!1,a.$emit("addClick")}))}else;}))},closeClick:function(){var e=this;e.dialogVisible=!1},init:function(e,t){var a=this;a.type=t,1==t?(a.addForm.createdBy=JSON.parse(sessionStorage.userInfo)["displayName"],e.companyId&&(a.addForm.companyId=e.companyId),e.companyStationConfigId&&(a.addForm.companyStationConfigId=e.companyStationConfigId),a.addForm.parent=0):2==t&&(a.addForm={companyId:e.companyId,companyStationConfigId:e.companyStationConfigId,code:e.code,name:e.name,planStartDate:e.planStartDate,planEndDate:e.planEndDate,startDate:e.startDate,endDate:e.endDate,isComplete:e.isComplete,remark:e.remark,id:e.id,createdBy:e.createdBy}),a.getStationArray(e.companyId),a.getRepairWorkRangeBySequenceIdData(),a.dialogVisible=!0}}},S=D,_=(a("1d00"),Object(h["a"])(S,d,c,!1,null,"ccd36d24",null)),k=_.exports,C={name:"ConstManagement",data:function(){return{loading:!1,treeData:[],tableData:[],form:{companyStationConfigId:"",companyId:"",name:"",PageSize:50,PageIndex:1},initJD:{companyId:"",companyStationConfigId:""},total:1,tableHeader:0,choseNode:{currentItem:null,parentItem:null,type:1},defaultProps:{children:"children",label:"name"}}},components:{AddPage:k},mounted:function(){l()(".hamburger-close").show();var e=this;e.getTreeData(),e.setHeight(),e.getDataList()},methods:{resetGetDataList:function(){var e=this;e.form={companyStationConfigId:"",companyId:"",name:"",PageSize:50,PageIndex:1},e.getDataList()},setTime:function(e){var t=e;return t=e?u["a"].getTime(t):"-",t},addClick:function(){var e=this;e.getDataList()},addListClick:function(){var e=this;e.$refs["addpage"].init(e.initJD,1)},handleNodeClick:function(e,t,a){var n=this;0==e.attribute.parent?(n.initJD.companyId=e.attribute.id,n.initJD.companyStationConfigId=""):(n.initJD.companyId=e.attribute.parent,n.initJD.companyStationConfigId=e.attribute.id),e.attribute&&(n.form.name=""),n.form.companyId="",n.form.companyStationConfigId="",1==t.level?(n.form.companyId=t.data.id,n.choseNode.type=1,n.choseNode.currentItem=t.data):(n.form.companyStationConfigId=t.data.id,n.form.companyId=t.parent.data.id,n.choseNode.type=2,n.choseNode.currentItem=t.data,n.choseNode.parentItem=t.parent.data),n.getDataList()},handleEdit:function(e,t){var a=this;a.$refs["addpage"].init(t,2)},handleDelete:function(e,t){var a=this;this.$confirm("您确定要删除该信息吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(r["a"])({url:s["a"].deleteRepairSequence,method:"post",data:{id:t.id}}).then((function(e){"200"==e.code&&(a.$message({type:"success",message:"删除成功!"}),a.getDataList())}))})).catch((function(){}))},setHeight:function(){var e=this;e.$nextTick((function(){var t=document.getElementById("table_content"),a=t.offsetHeight;e.tableHeader=a-50}))},getDataList:function(e){var t=this;t.loading=!0,"check"==e&&(t.form.PageIndex=1),Object(r["a"])({url:s["a"].getRepairSequence,method:"get",params:t.form}).then((function(e){200==e.code&&(t.loading=!1,t.tableData=e.result.rows,t.total=parseInt(e.result.records))}))},handleSizeChange:function(e){var t=this;t.form.PageSize=e,t.getDataList(),console.log("每页 ".concat(e," 条"))},handleCurrentChange:function(e){var t=this;t.form.PageIndex=e,t.getDataList()},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},getTreeData:function(){var e=this;Object(r["a"])({url:s["a"].getCompanyStationZtree,method:"get"}).then((function(t){200==t.code&&(e.treeData=t.result)}))}}},x=C,I=(a("fcd8"),Object(h["a"])(x,n,i,!1,null,"993b307e",null));t["default"]=I.exports},e697:function(e,t,a){"use strict";var n=a("e46b"),i=a("013f")(5),o="find",l=!0;o in[]&&Array(1)[o]((function(){l=!1})),n(n.P+n.F*l,"Array",{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),a("0e8b")(o)},fcd8:function(e,t,a){"use strict";var n=a("dd13"),i=a.n(n);i.a}}]);