(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-main-main"],{2824:function(e,n,i){"use strict";i.r(n);var t=i("e561"),o=i("8c1e");for(var a in o)"default"!==a&&function(e){i.d(n,e,(function(){return o[e]}))}(a);i("db21");var c,u=i("f0c5"),s=Object(u["a"])(o["default"],t["b"],t["c"],!1,null,"27676312",null,!1,t["a"],c);n["default"]=s.exports},3671:function(e,n,i){var t=i("24fb");n=t(!1),n.push([e.i,".hello[data-v-27676312]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-flex:1;-webkit-flex:1;flex:1;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column}.title[data-v-27676312]{color:#8f8f94;margin-top:25px}.ul[data-v-27676312]{font-size:15px;color:#8f8f94;margin-top:25px}.ul>uni-view[data-v-27676312]{line-height:25px}",""]),e.exports=n},"4d67":function(e,n,i){"use strict";(function(e,t){var o=i("4ea4");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=o(i("5530")),c=i("2f62"),u=i("95b1"),s={computed:(0,c.mapState)(["forcedLogin","hasLogin","userName"]),onLoad:function(){var n=this,i=uni.getStorageSync("login_type");if("local"!==i){var o=uni.getStorageSync("uni_id_token");o?(this.login(uni.getStorageSync("username")),e.callFunction({name:"user-center",data:{action:"checkToken"},success:function(e){t("log","checkToken success",e," at pages/main/main.vue:51"),e.result.code>0&&(n.forcedLogin?uni.reLaunch({url:"../login/login"}):uni.navigateTo({url:"../login/login"}))},fail:function(e){uni.showModal({content:JSON.stringify(e),showCancel:!1})}})):this.guideToLogin()}else this.login(uni.getStorageSync("username"))},methods:(0,a.default)((0,a.default)({},(0,c.mapMutations)(["login"])),{},{guideToLogin:function(){var e=this;uni.showModal({title:"未登录",content:"您未登录，需要登录后才能继续",showCancel:!this.forcedLogin,success:function(n){n.confirm&&(0,u.univerifyLogin)().catch((function(n){!1!==n&&(e.forcedLogin?uni.reLaunch({url:"../login/login"}):uni.navigateTo({url:"../login/login"}))}))}})}})};n.default=s}).call(this,i("a9ff")["default"],i("0de9")["log"])},8983:function(e,n,i){var t=i("3671");"string"===typeof t&&(t=[[e.i,t,""]]),t.locals&&(e.exports=t.locals);var o=i("4f06").default;o("153b9c13",t,!0,{sourceMap:!1,shadowMode:!1})},"8c1e":function(e,n,i){"use strict";i.r(n);var t=i("4d67"),o=i.n(t);for(var a in t)"default"!==a&&function(e){i.d(n,e,(function(){return t[e]}))}(a);n["default"]=o.a},"95b1":function(e,n,i){"use strict";(function(e,t){var o=i("4ea4");i("99af"),i("c975"),i("d3b7"),Object.defineProperty(n,"__esModule",{value:!0}),n.univerifyLogin=c,n.univerifyErrorHandler=u;var a=o(i("2a96"));function c(){var n=a.default.commit,i="univerify";return new Promise((function(o,a){uni.getProvider({service:"oauth",success:function(c){-1!==c.provider.indexOf(i)?uni.login({provider:i,success:function(i){uni.closeAuthView(),uni.showLoading(),e.callFunction({name:"user-center",data:{action:"loginByUniverify",params:i.authResult},success:function(e){if(t("log","login success",e," at common/univerify.js:30"),0==e.result.code){var i=e.result.username||e.result.mobile||"一键登录新用户";uni.setStorageSync("uni_id_token",e.result.token),uni.setStorageSync("username",i),uni.setStorageSync("login_type","online"),n("login",i),o(),uni.switchTab({url:"../main/main"})}else uni.showModal({title:"登录失败: ".concat(e.result.code),content:e.result.message,showCancel:!1}),t("log","登录失败",e," at common/univerify.js:51"),e.result.errMsg=e.result.message},fail:function(e){uni.showModal({title:"登录失败",content:e.errMsg,showCancel:!1})},complete:function(){uni.hideLoading()}})},fail:function(e){return t("error","授权登录失败："+JSON.stringify(e)," at common/univerify.js:69"),30002==e.code?(uni.closeAuthView(),void a(!0)):30003==e.code?(uni.closeAuthView(),void a(!1)):void a(e)}}):a()},fail:function(e){t("error","获取服务供应商失败："+e.errMsg," at common/univerify.js:93"),a(e)}})}))}function u(e,n){if(e){a.default.state;var i={};switch(!0){case 1e3==e.code:uni.showModal(Object.assign({title:"登录失败",content:"".concat(e.errMsg,"，错误码：").concat(e.code,"\n开通指南：https://ask.dcloud.net.cn/article/37965")},i));break;case 30005==e.code:uni.showModal(Object.assign({showCancel:!1,title:"预登录失败",content:"".concat(e.errMsg,"，错误码：").concat(e.code)},i));break;case 30003!=e.code:uni.showModal(Object.assign({showCancel:!1,title:"登录失败",content:"".concat(e.errMsg,"，错误码：").concat(e.code)},i));break}}else n&&n()}}).call(this,i("a9ff")["default"],i("0de9")["log"])},db21:function(e,n,i){"use strict";var t=i("8983"),o=i.n(t);o.a},e561:function(e,n,i){"use strict";var t;i.d(n,"b",(function(){return o})),i.d(n,"c",(function(){return a})),i.d(n,"a",(function(){return t}));var o=function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("v-uni-view",{staticClass:"content"},[e.hasLogin?i("v-uni-view",{staticClass:"hello"},[i("v-uni-view",{staticClass:"title"},[e._v("您好 "+e._s(e.userName)+"，您已成功登录。")]),i("v-uni-view",{staticClass:"ul"},[i("v-uni-view",[e._v("这是 uni-app 带登录模板的示例App首页。")]),i("v-uni-view",[e._v("在 “我的” 中点击 “退出” 可以 “注销当前账户”")])],1)],1):e._e(),e.hasLogin?e._e():i("v-uni-view",{staticClass:"hello"},[i("v-uni-view",{staticClass:"title"},[e._v("您好 游客。")]),i("v-uni-view",{staticClass:"ul"},[i("v-uni-view",[e._v("这是 uni-app 带登录模板的示例App首页。")]),i("v-uni-view",[e._v("在 “我的” 中点击 “登录” 可以 “登录您的账户”")])],1)],1)],1)},a=[]}}]);