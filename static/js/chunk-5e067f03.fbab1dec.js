(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5e067f03"],{"013f":function(t,e,a){var n=a("4ce5"),i=a("224c"),l=a("008a"),r=a("eafa"),o=a("5dd2");t.exports=function(t,e){var a=1==t,s=2==t,c=3==t,f=4==t,u=6==t,d=5==t||u,p=e||o;return function(e,o,g){for(var m,v,h=l(e),b=i(h),D=n(o,g,3),y=r(b.length),S=0,N=a?p(e,y):s?p(e,0):void 0;y>S;S++)if((d||S in b)&&(m=b[S],v=D(m,S,h),t))if(a)N[S]=v;else if(v)switch(t){case 3:return!0;case 5:return m;case 6:return S;case 2:N.push(m)}else if(f)return!1;return u?-1:c||f?f:N}}},"03fc":function(t,e,a){"use strict";var n=a("1968"),i=a.n(n);i.a},1968:function(t,e,a){},"3b7c":function(t,e,a){"use strict";var n=a("cfb2"),i=a.n(n);i.a},"5dd2":function(t,e,a){var n=a("81dc");t.exports=function(t,e){return new(n(t))(e)}},"6c8d":function(t,e,a){"use strict";a("9e76"),a("9dd9"),a("9a33");e["a"]={getUUid:function(){for(var t=[],e="0123456789abcdef",a=0;a<36;a++)t[a]=e.substr(Math.floor(16*Math.random()),1);t[14]="4",t[19]=e.substr(3&t[19]|8,1),t[8]=t[13]=t[18]=t[23]="-";var n=t.join("");return n},getTime:function(t){var e=new Date(t),a=e.getFullYear()+"-",n=(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-",i=(e.getDate()<10?"0"+e.getDate():e.getDate())+" ",l=(e.getHours()<10?"0"+e.getHours():e.getHours())+":",r=(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+":",o=e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds();return a+n+i+l+r+o},getDate:function(t){var e=new Date(t),a=e.getFullYear()+"-",n=(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-",i=e.getDate()<10?"0"+e.getDate():e.getDate();return a+n+i},ConvertLevel:function(t){return"Basic"==t?"基地":"Plant"==t?"电厂":"机组"},IsCanDisplayImage:function(t){for(var e="jpg,png,gif,bmp,icon,jpeg",a=e.split(","),n=0;n<a.length;n++)if(a[n]==t)return!0;return!1},getQueryVariable:function(t){var e=window.location.href,a=e.split("?");if(a.length>1){a=a[1].split("&");for(var n=0;n<a.length;n++){var i=a[n].split("=");if(i[0]==t)return i[1]}return null}return null},setCookie:function(t,e){var a=30,n=new Date;n.setTime(n.getTime()+24*a*60*60*1e3),document.cookie=t+"="+escape(e)+";expires="+n.toGMTString()},getCookie:function(t){var e,a=new RegExp("(^| )"+t+"=([^;]*)(;|$)");return(e=document.cookie.match(a))?unescape(e[2]):null},delCookie:function(t){var e=new Date;e.setTime(e.getTime()-1);var a=getCookie(t);null!=a&&(document.cookie=t+"="+a+";expires="+e.toGMTString())}}},"81dc":function(t,e,a){var n=a("fb68"),i=a("2346"),l=a("cb3d")("species");t.exports=function(t){var e;return i(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!i(e.prototype)||(e=void 0),n(e)&&(e=e[l],null===e&&(e=void 0))),void 0===e?Array:e}},9805:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bodyStaff",attrs:{id:"bodyStaffOne"}},[a("el-dialog",{attrs:{title:t.titel,visible:t.dialogStaffVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogStaffVisible=e}}},[a("div",{staticClass:"bp-alert bp-alert-info",staticStyle:{"margin-top":"10x"},attrs:{id:"alert"}},[a("strong",[t._v("提示：")]),t._v("关键字至少2个字，双击选中或取消。\n      ")]),t._v(" "),a("table",{attrs:{id:"tab"}},[a("tr",[a("td",[a("el-input",{ref:"editTagFoucus",staticStyle:{width:"200px"},attrs:{size:"mini"},on:{blur:function(e){return t.keywordChange()}},nativeOn:{keyup:function(e){return t.keywordChange()}},model:{value:t.staffName,callback:function(e){t.staffName=e},expression:"staffName"}}),t._v(" "),a("a",{staticClass:"bp-linkbtn",attrs:{id:"menuBtn",href:"#"},on:{click:function(e){return t.showDept(),!1}}},[t._v("部门")])],1),t._v(" "),a("td",{attrs:{rowspan:"2",id:"td2"}},[a("div",[a("el-button",{attrs:{type:"primary",title:"添加全部",size:"small",id:"addAll",icon:"el-icon-d-arrow-right"},on:{click:function(e){return t.allStaff()}}})],1),t._v(" "),a("div",[a("el-button",{attrs:{type:"primary",title:"移除选中项",size:"small",icon:"el-icon-arrow-right"},on:{click:function(e){return t.selectSingle()}}})],1),t._v(" "),a("div",[a("el-button",{attrs:{type:"primary",title:"移除选中项",size:"small",icon:"el-icon-arrow-left"},on:{click:function(e){return t.removeSingle()}}})],1),t._v(" "),a("div",[a("el-button",{attrs:{type:"primary",title:"移除全部",size:"small",icon:"el-icon-d-arrow-left"},on:{click:function(e){return t.removeStaff()}}})],1)]),t._v(" "),a("td",[a("span",[t._v("已选人员："+t._s(t.selectCount))])])]),t._v(" "),a("tr",[a("td",[a("select",{attrs:{id:"selecting",name:"selecting",multiple:"multiple"},on:{dblclick:function(e){return t.selectSingle(1)},click:t.showDeptName}},t._l(t.selectingData,(function(e){return a("option",{key:e.id,attrs:{"data-value":e},domProps:{value:e.id}},[t._v("\n                "+t._s(e.displayName)+"\n              ")])})),0)]),t._v(" "),a("td",{staticStyle:{"padding-top":"10px"}},[a("select",{attrs:{id:"selected",name:"selected",multiple:"multiple"},on:{dblclick:function(e){return t.removeSingle()}}},t._l(t.selectData,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v("\n                "+t._s(e.displayName)+"\n              ")])})),0)])])]),t._v(" "),a("p",{staticStyle:{"margin-bottom":"0px"},attrs:{id:"deptInfo"}},[a("strong",[t._v("所属部门："+t._s(t.currentDept))]),t._v(" "),a("span")]),t._v(" "),a("div",{staticClass:"menuContent bp-borderColor",attrs:{id:"menuContent"}},[a("el-tree",{ref:"tree",staticClass:"ztree",staticStyle:{"font-size":"14px"},attrs:{data:t.treeData,"node-key":"id",props:t.defaultProps},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.node,i=e.data;return a("span",{staticClass:"custom-tree-node"},[a("span",{staticClass:"node",on:{dblclick:function(e){return t.dblclickNode(n,i)}}},[t._v(t._s(n.label))])])}}])})],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.dialogStaffVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.addStaffClick}},[t._v("确 定")])],1)])],1)},i=[],l=(a("e697"),a("2b45"),a("9a33"),a("52c1"),a("b775")),r=a("7c15"),o=(a("6c8d"),a("a336")),s=a.n(o),c={name:"StaffSelect",watch:{dialogStaffVisible:function(t){var e=this;t?e.$nextTick((function(){var t=s()(window).height()-70;e.$nextTick((function(){s()("#bodyStaffOne .el-dialog").css("width","640px"),s()("#bodyStaffOne .el-dialog").css("margin-top","60px"),s()("#bodyStaffOne .el-dialog").css("max-height",t-10+"px"),s()("#bodyStaffOne .el-dialog").css("overflow","hidden"),s()("#bodyStaffOne .el-dialog__body").css("overflow-y","auto")}))})):(e.staffName="",e.keyUpName="",e.currentDept="",e.currentUser="",e.selectData=[],e.deptNos="",e.selectingData=[],e.selectCount=0,e.treeData=[])}},data:function(){return{isMultiple:"",dialogStaffVisible:!1,selectCount:0,selectData:[],currentUser:"",currentDept:"",queryTimeout:"",selectingData:[],deptNos:"",staffName:"",keyUpName:"",deptNoPath:"",defaultProps:{children:"children",label:"name",id:"id"},titel:"人员选择",treeData:[]}},mounted:function(){},methods:{addStaffClick:function(){var t=this;t.$emit("addStaffClick",t.selectData)},dblclickNode:function(t,e){var a=this;a.staffName=e.attribute.deptName,a.deptNoPath=e.attribute.deptNoPath,a.queryStaff(2),a.hideDept()},loadStaffs:function(){var t=this;if(null!=t.currentUser&&t.currentUser.length>0){for(var e=t.currentUser.toString().split(","),a=new Array,n=0;n<e.length;n++)e[n].length>0&&(e[n].indexOf("[")>0?a.push(e[n].split("[")[1].slice(0,-1)):a.push(e[n]));if(a.length>0){var i=r["a"].getStaffInfoByStaffIdsInfo,o={staffIDs:a.join(",")};Object(l["a"])({url:i,method:"get",params:o}).then((function(e){t.selectData=e.result,t.selectCount=t.selectData.length}))}}},showDeptName:function(){var t=this,e=s()("#selecting").find("option:selected"),a=e.val();for(var n in t.selectingData)t.selectingData[n].id==a&&(t.currentDept=t.selectingData[n].deptNamePath)},handleNodeClick:function(t){},hideDept:function(){var t=this;s()("#menuContent").fadeOut("fast"),s()(".bodyStaff").unbind("mousedown",t.onBodyDown)},showDept:function(){var t=this,e=s()("#keyword");e.offset();s()("#menuContent").css({left:"24px",top:"140px"}).slideDown("fast"),s()(".bodyStaff").bind("mousedown",t.onBodyDown)},onBodyDown:function(t){var e=this;"menuBtn"==t.target.id||"menuContent"==t.target.id||s()(t.target).parents("#menuContent").length>0||e.hideDept()},selectSingle:function(t){var e=this,a=s()("#selecting").find("option:selected"),n=a.val();for(var i in"0"==e.isMultiple&&e.selectData.length>0&&(e.selectingData.push(e.selectData[0]),e.selectData=[]),e.selectingData){var l=e.selectingData[i];l.id==n&&(e.selectData.push(l),e.selectingData.splice(s.a.inArray(l,e.selectingData),1))}e.selectCount=e.selectData.length,"0"==e.isMultiple&&1==t&&e.addStaffClick()},removeStaff:function(){var t=this;if(null!=t.selectData&&t.selectData.length>0){for(var e in t.selectData)t.selectingData.push(t.selectData[e]);t.selectData=[]}t.selectCount=0},allStaff:function(){var t=this;if("0"!=t.isMultiple){if(null!=t.selectingData&&t.selectingData.length>0){for(var e in t.selectingData)t.selectData.push(t.selectingData[e]);t.selectingData=[]}t.selectCount=t.selectData.length}},removeSingle:function(){var t=this,e=s()("#selected").find("option:selected"),a=e.val();if(null!=a&&null!=t.selectData&&t.selectData.length>0)for(var n in t.selectData){var i=t.selectData[n];i.id==a&&(t.selectingData.push(i),t.selectData.splice(s.a.inArray(i,t.selectData),1))}t.selectCount=t.selectData.length},keywordChange:function(){var t=this;t.staffName.length>1&&t.staffName!=t.keyUpName?(t.queryTimeout&&clearTimeout(t.queryTimeout),t.queryTimeout=setTimeout((function(){t.queryStaff(1)}),500)):t.staffName.length<2&&(t.queryTimeout&&clearTimeout(t.queryTimeout),t.selectingData=[]),t.keyUpName=t.staffName},queryStaff:function(t){var e=this,a=r["a"].getStaffInfosByName,n={staffName:e.staffName};2==t&&(a=r["a"].getStaffInfosByDepartNoPath,n={deptNoPath:e.deptNoPath}),Object(l["a"])({url:a,method:"get",params:n}).then((function(t){if(e.selectingData=t.result,e.selectData.length>0)for(var a in e.selectData)for(var n in e.selectingData)e.selectData[a].id==e.selectingData[n].id&&e.selectingData.splice(s.a.inArray(e.selectingData[n],e.selectingData),1)}))},initDept:function(){var t=this;Object(l["a"])({url:r["a"].getAllDepartmentInfos,method:"get",params:{depNos:t.deptNos}}).then((function(e){t.treeData=e.result}))},closeClick:function(){var t=this;t.dialogStaffVisible=!1},init:function(t,e){var a=this;a.staffName=JSON.parse(sessionStorage.userInfo)["departmentName"],a.keyUpName=JSON.parse(sessionStorage.userInfo)["departmentName"],a.deptNoPath=JSON.parse(sessionStorage.userInfo)["departmentNoPath"],a.dialogStaffVisible=!0,a.isMultiple=e,a.hideDept(),null!=t&&(null!=t.deptNos&&t.deptNos.length>0&&(a.deptNos=t.deptNos.spilt(",")),null!=t.selectedUser&&(a.currentUser=t.selectedUser)),"0"==a.isMultiple?a.titel="单选人员选择":a.titel="多选人员选择",a.initDept(),a.loadStaffs(),setTimeout((function(){a.queryStaff(2)}),200)}}},f=c,u=(a("3b7c"),a("9ca4")),d=Object(u["a"])(f,n,i,!1,null,"6c6c6327",null);e["a"]=d.exports},"9e76":function(t,e,a){"use strict";var n=a("69b3"),i=a("eafa"),l=a("e754"),r=a("7108");a("0aed")("match",1,(function(t,e,a,o){return[function(a){var n=t(this),i=void 0==a?void 0:a[e];return void 0!==i?i.call(a,n):new RegExp(a)[e](String(n))},function(t){var e=o(a,t,this);if(e.done)return e.value;var s=n(t),c=String(this);if(!s.global)return r(s,c);var f=s.unicode;s.lastIndex=0;var u,d=[],p=0;while(null!==(u=r(s,c))){var g=String(u[0]);d[p]=g,""===g&&(s.lastIndex=l(c,i(s.lastIndex),f)),p++}return 0===p?null:d}]}))},c50d:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"deptManager"},[a("div",{staticStyle:{}},[a("el-form",{ref:"form",attrs:{inline:!0,model:t.form,"label-position":t.labelPosition}},[a("el-form-item",{attrs:{label:"姓名","label-width":"100px"}},[a("el-input",{staticClass:"el-form-item_input",attrs:{size:"small",placeholder:"请输入姓名"},nativeOn:{click:function(e){return t.staffSelectClick()}},model:{value:t.form.userName,callback:function(e){t.$set(t.form,"userName",e)},expression:"form.userName"}})],1),t._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:function(e){return t.getListData()}}},[t._v("查询")])],1)],1),t._v(" "),a("div",{staticStyle:{height:"calc(100vh - 100px)"},attrs:{id:"table_content"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{label:"人员授权",border:"",data:t.tableData}},[a("el-table-column",{attrs:{prop:"roleName",label:"角色名称",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"roleNote",label:"描述"}}),t._v(" "),a("el-table-column",{attrs:{prop:"createdBy",label:"授权人"}}),t._v(" "),a("el-table-column",{attrs:{prop:"",label:"授权时间",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.convertDateTime(e.row.createdOn)))])]}}])})],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%","margin-top":"20px"},attrs:{label:"部门授权",border:"",data:t.tableData1}},[a("el-table-column",{attrs:{prop:"roleName",label:"角色名称",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"roleNote",label:"描述"}}),t._v(" "),a("el-table-column",{attrs:{prop:"createdBy",label:"授权人"}}),t._v(" "),a("el-table-column",{attrs:{prop:"",label:"授权时间",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.convertDateTime(e.row.createdOn)))])]}}])})],1)],1),t._v(" "),a("V-StaffSelect",{ref:"staffSelect",on:{addStaffClick:t.addStaffClick}})],1)},i=[],l=a("a336"),r=a.n(l),o=a("b775"),s=a("7c15"),c=a("6c8d"),f=a("9805"),u={data:function(){return{tableData:[],tableData1:[],tableHeader:0,tableHeader1:0,labelPosition:"right",form:{userName:""},loading:!1}},mounted:function(){var t=this;r()(".hamburger-close").hide(),t.getListData(),t.setHeight()},components:{"V-StaffSelect":f["a"]},methods:{convertDateTime:function(t){return c["a"].getDate(t)},setHeight:function(){var t=this;t.$nextTick((function(){var e=document.getElementById("table_content"),a=e.offsetHeight;t.tableHeader=a-30}))},addStaffClick:function(t){var e=this;t.length>0&&(e.form.userName=t[0].displayName),e.$refs["staffSelect"].closeClick()},staffSelectClick:function(){var t=this;t.$refs["staffSelect"].init({deptNos:"",selectedUser:t.form.userName},"0")},getListData:function(){var t=this;t.loading=!0,Object(o["a"])({url:s["a"].staffRightsQuery,method:"post",data:t.form}).then((function(e){if(t.loading=!1,"200"==e.code){var a=e.result;t.form.userName=e.workOrderManagerId,t.tableData=a,t.tableData1=e.resultTwo}}))}}},d=u,p=(a("03fc"),a("9ca4")),g=Object(p["a"])(d,n,i,!1,null,"bdd691fa",null);e["default"]=g.exports},cfb2:function(t,e,a){},e697:function(t,e,a){"use strict";var n=a("e46b"),i=a("013f")(5),l="find",r=!0;l in[]&&Array(1)[l]((function(){r=!1})),n(n.P+n.F*r,"Array",{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),a("0e8b")(l)}}]);