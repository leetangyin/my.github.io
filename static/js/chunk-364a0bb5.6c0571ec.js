(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-364a0bb5"],{5821:function(e,t,a){},8859:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dashboard-container"},[a("div",{staticClass:"sidebar-container"},[a("div",{staticClass:"tree_content"},[a("el-tree",{staticStyle:{"font-size":"14px"},attrs:{data:e.treeData,"node-key":"id","default-expand-all":"","highlight-current":"",props:e.defaultProps,"expand-on-click-node":!1,"render-content":e.renderContent}})],1)]),e._v(" "),a("div",{staticClass:"main-container"},[a("div",[a("el-form",{ref:"searchForm",attrs:{model:e.searchForm}},[a("el-form-item",{attrs:{label:"关键字："}},[a("el-input",{staticClass:"el-form-item_input",attrs:{size:"small",placeholder:"请输入名称或描述"},model:{value:e.searchForm.searchKey,callback:function(t){e.$set(e.searchForm,"searchKey",t)},expression:"searchForm.searchKey"}}),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:function(t){return e.getDataList()}}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"info",size:"small",icon:"el-icon-refresh-right"},on:{click:function(t){return e.resetGetDataList()}}},[e._v("重置")])],1)],1)],1),e._v(" "),a("div",{staticStyle:{height:"calc(100vh - 150px)"},attrs:{id:"table_content"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"font-size":"12px"},attrs:{data:e.tableData,border:"",height:e.tableHeader}},[a("el-table-column",{attrs:{prop:"sequence",label:"序号",width:"60",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"value",label:"常量名称",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"constDesc",label:"常量描述"}}),e._v(" "),a("el-table-column",{attrs:{prop:"note",label:"备注说明",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createdBy",label:"录入人",width:"120",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"录入时间",width:"140",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.timestampToTime(t.row.createdOn)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"el-icon-edit",attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticClass:"el-icon-delete",attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])},[a("template",{slot:"header"},[a("span",[e._v("\n              操作\n              "),a("i",{staticClass:"el-icon-circle-plus",staticStyle:{color:"#409eff","margin-left":"3px","font-size":"17px",cursor:"pointer",top:"2px",position:"relative"},on:{click:e.addListClick}})])])],2)],1),e._v(" "),a("div",{staticClass:"my_el_pagination"},[a("el-pagination",{attrs:{"page-sizes":[20,50,100],"page-size":e.size,layout:"prev, pager, next,jumper,sizes,total",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)]),e._v(" "),a("el-dialog",{attrs:{title:"常量管理",visible:e.dialogVisible,width:"35%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",[a("el-form",{ref:"addForm",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.addForm,rules:e.addFormrules,"label-position":e.labelPosition}},[a("el-form-item",{attrs:{label:"序号",prop:"sequence",required:!0,"label-width":"150px"}},[a("el-input",{staticClass:"el-form-item_input",staticStyle:{width:"250px"},attrs:{size:"small",placeholder:"请输入序号"},model:{value:e.addForm.sequence,callback:function(t){e.$set(e.addForm,"sequence",t)},expression:"addForm.sequence"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"常量名称",prop:"value",required:!0,"label-width":"150px"}},[a("el-input",{staticClass:"el-form-item_input",staticStyle:{width:"250px"},attrs:{size:"small",placeholder:"请输入常量名称"},model:{value:e.addForm.value,callback:function(t){e.$set(e.addForm,"value",t)},expression:"addForm.value"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"常量描述",prop:"constDesc",required:!0,"label-width":"150px"}},[a("el-input",{staticClass:"el-form-item_input",staticStyle:{width:"250px"},attrs:{size:"small",placeholder:"请输入常量名称"},model:{value:e.addForm.constDesc,callback:function(t){e.$set(e.addForm,"constDesc",t)},expression:"addForm.constDesc"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注说明","label-width":"150px"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{type:"textarea",placeholder:"请输入备注说明"},model:{value:e.addForm.note,callback:function(t){e.$set(e.addForm,"note",t)},expression:"addForm.note"}})],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.saveConstClick}},[e._v("确 定")])],1)])],1)},s=[],i=a("a336"),o=a.n(i),l=a("b775"),r=a("7c15"),c={name:"ConstManagement",data:function(){return{loading:!1,PageIndex:1,tableHeader:0,labelPosition:"right",dialogVisible:!1,size:50,total:1,tableData:[],searchForm:{constType:"",searchKey:""},addForm:{id:"",constDesc:"",sequence:"",value:"",note:"",type:"",createdBy:"",createdOn:""},defaultProps:{children:"children",label:"name",code:"code",id:"id"},addFormrules:{sequence:[{required:!0,message:"请输入序号",trigger:"blur"}],value:[{required:!0,message:"请输入常量名称",trigger:"blur"}],constDesc:[{required:!0,message:"请输入常量描述",trigger:"blur"}]},treeData:[]}},mounted:function(){var e=this;e.getDataTreeList(),e.getDataList(),e.setHeight(),o()(window).resize((function(){e.setHeight()}))},methods:{addListClick:function(){var e=this;if(""===e.searchForm.constType)return e.$message({type:"info",message:"请选择常量类型"}),!1;e.dialogVisible=!0,e.$nextTick((function(){e.addForm={id:"",constDesc:"",sequence:"",value:"",note:"",type:"",unitType:"",createdBy:"",createdOn:""},e.$refs["addForm"].resetFields(),e.addForm.type=e.searchForm.constType,Object(l["a"])({url:r["a"].getMaxConstRec,method:"get",params:{type:e.searchForm.constType}}).then((function(t){e.addForm.sequence=t.result}))})),e.dialogVisible=!0},saveConstClick:function(){var e=this;this.$refs["addForm"].validate((function(t){t&&Object(l["a"])({url:r["a"].saveConstRec,method:"post",data:e.addForm}).then((function(t){"200"===t.code?(e.$message({type:"success",message:"操作成功!"}),e.getDataList(),e.dialogVisible=!1):e.$message({type:"info",message:t.message})}))}))},setHeight:function(){var e=this;e.$nextTick((function(){var t=document.getElementById("table_content"),a=t.offsetHeight;e.tableHeader=a-60}))},handleEdit:function(e,t){var a=this;a.addForm={id:t.id,value:t.value,sequence:t.sequence,constDesc:t.constDesc,note:t.note,unitType:t.unitType,type:t.type},a.dialogVisible=!0},handleDelete:function(e,t){var a=this;this.$confirm("您确定要删除该信息吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(l["a"])({url:r["a"].deleteConstRec,method:"post",data:{id:t.id}}).then((function(e){200==e.code?(a.$message({type:"success",message:"删除成功!"}),a.getDataList()):a.$message({type:"info",message:e.message})}))})).catch((function(){}))},resetGetDataList:function(){var e=this;e.searchForm={constType:"",searchKey:""},e.PageIndex=1,e.getDataList()},getDataList:function(){var e=this,t={constType:e.searchForm.constType,searchKey:e.searchForm.searchKey,PageSize:e.size,PageIndex:e.PageIndex};e.loading=!0,Object(l["a"])({url:r["a"].getConstTypeInfo,method:"get",params:t}).then((function(t){var a=t.result.rows;e.loading=!1,e.tableData=a,e.total=parseInt(t.result.records)}))},timestampToTime:function(e){var t=new Date(e),a=t.getFullYear()+"-",n=(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-",s=(t.getDate()<10?"0"+t.getDate():t.getDate())+" ",i=(t.getHours()<10?"0"+t.getHours():t.getHours())+":",o=(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":",l=t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds();return a+n+s+i+o+l},renderContent:function(e,t){var a=this,n=t.node,s=t.data;t.store;return"全部"==n.label?e("span",{class:"custom-tree-node"},[e("span",[n.label])]):("null"!=JSON.stringify(s.children)&&""!=JSON.stringify(s.children)&&void 0!=JSON.stringify(s.children)&&JSON.stringify(s.children),e("span",{class:"custom-tree-node"},[e("span",{on:{click:function(){return a.onClickTree(s,n)}}},[n.label])]))},onClickTree:function(e,t){var a=this;1==t.level?a.searchForm.constType="":a.searchForm.constType=e.code,a.getDataList()},getDataTreeList:function(){var e=this;Object(l["a"])({url:r["a"].getCommonConstInfo,method:"get"}).then((function(t){e.treeData=t.result,e.$nextTick((function(){o()(".el-tree-node__children").removeClass("el-tree-node__children")}))}))},handleSizeChange:function(e){var t=this;t.size=e,t.getDataList(),console.log("每页 ".concat(e," 条"))},handleCurrentChange:function(e){var t=this;t.PageIndex=e,t.getDataList()}}},d=c,u=(a("e458"),a("9ca4")),m=Object(u["a"])(d,n,s,!1,null,"02152a72",null);t["default"]=m.exports},e458:function(e,t,a){"use strict";var n=a("5821"),s=a.n(n);s.a}}]);